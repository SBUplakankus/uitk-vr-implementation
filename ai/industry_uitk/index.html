
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://uitk.dev/ai/industry_uitk/">
      
      
        <link rel="prev" href="../bg_analysis/">
      
      
        <link rel="next" href="../layer_architecture/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/tablet.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Industry UITK Practices - UITK Implementation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#industry-standard-ui-toolkit-practices-code-first-architecture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="UITK Implementation" class="md-header__button md-logo" aria-label="UITK Implementation" data-md-component="logo">
      
  <img src="../../assets/images/tablet.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            UITK Implementation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Industry UITK Practices
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4m0-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/your-org/uitk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="UITK Implementation" class="md-nav__button md-logo" aria-label="UITK Implementation" data-md-component="logo">
      
  <img src="../../assets/images/tablet.svg" alt="logo">

    </a>
    UITK Implementation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/your-org/uitk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../references/uitk_refs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Research
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Research
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research/shader_graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shader Graph
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research/vr_integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VR Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research/web_to_uss/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Web To USS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    AI Docs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI Docs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bg_analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bagel Game Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Industry UITK Practices
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Industry UITK Practices
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-architecture-patterns-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Architecture Patterns Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Architecture Patterns Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-common-ui-architecture-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Common UI Architecture Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-ui-toolkit-best-pattern-choice" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 UI Toolkit Best Pattern Choice
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-layer-responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3 Layer Responsibilities
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-code-first-ui-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Code-First UI Generation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Code-First UI Generation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-pure-code-ui-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Pure Code UI Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-template-based-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Template-Based Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-builder-pattern-for-complex-ui" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Builder Pattern for Complex UI
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-separation-of-concerns" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Separation of Concerns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Separation of Concerns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-layer-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Layer Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-interface-based-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Interface-Based Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-command-pattern-for-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Command Pattern for Actions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-data-binding-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Data Binding Strategies
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Data Binding Strategies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-observable-pattern-manual-binding" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Observable Pattern (Manual Binding)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-unity-6-native-data-binding" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Unity 6 Native Data Binding
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-reactive-binding-with-unirx-advanced" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Reactive Binding with UniRx (Advanced)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-factory-pattern-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Factory Pattern Implementation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Factory Pattern Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-ui-element-factory" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 UI Element Factory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-panel-factory" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Panel Factory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-abstract-factory-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Abstract Factory Pattern
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-view-controller-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. View-Controller Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. View-Controller Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-screen-controller-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Screen Controller Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-screen-manager-navigation-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Screen Manager / Navigation System
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-presenter-pattern-mvp" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Presenter Pattern (MVP)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-runtime-customization" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Runtime Customization
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Runtime Customization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-dynamic-theme-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Dynamic Theme System
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-runtime-style-modification" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Runtime Style Modification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-user-customization-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 User Customization System
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-team-collaboration-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Team Collaboration Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Team Collaboration Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-component-library-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Component Library Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-style-guide-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Style Guide &amp; Documentation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8.2 Style Guide &amp; Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#icon-button" class="md-nav__link">
    <span class="md-ellipsis">
      
        Icon Button
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Forms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Forms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#text-input" class="md-nav__link">
    <span class="md-ellipsis">
      
        Text Input
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#styling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Styling
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#theme-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Theme Support
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../layer_architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layer Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-architecture-patterns-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Architecture Patterns Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Architecture Patterns Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-common-ui-architecture-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Common UI Architecture Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-ui-toolkit-best-pattern-choice" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 UI Toolkit Best Pattern Choice
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-layer-responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3 Layer Responsibilities
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-code-first-ui-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Code-First UI Generation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Code-First UI Generation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-pure-code-ui-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Pure Code UI Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-template-based-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Template-Based Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-builder-pattern-for-complex-ui" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Builder Pattern for Complex UI
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-separation-of-concerns" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Separation of Concerns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Separation of Concerns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-layer-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Layer Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-interface-based-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Interface-Based Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-command-pattern-for-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Command Pattern for Actions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-data-binding-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Data Binding Strategies
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Data Binding Strategies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-observable-pattern-manual-binding" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Observable Pattern (Manual Binding)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-unity-6-native-data-binding" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Unity 6 Native Data Binding
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-reactive-binding-with-unirx-advanced" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Reactive Binding with UniRx (Advanced)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-factory-pattern-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Factory Pattern Implementation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Factory Pattern Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-ui-element-factory" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 UI Element Factory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-panel-factory" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Panel Factory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-abstract-factory-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Abstract Factory Pattern
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-view-controller-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. View-Controller Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. View-Controller Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-screen-controller-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Screen Controller Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-screen-manager-navigation-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Screen Manager / Navigation System
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-presenter-pattern-mvp" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Presenter Pattern (MVP)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-runtime-customization" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Runtime Customization
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Runtime Customization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-dynamic-theme-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Dynamic Theme System
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-runtime-style-modification" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Runtime Style Modification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-user-customization-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 User Customization System
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-team-collaboration-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Team Collaboration Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Team Collaboration Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-component-library-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Component Library Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-style-guide-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Style Guide &amp; Documentation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8.2 Style Guide &amp; Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#icon-button" class="md-nav__link">
    <span class="md-ellipsis">
      
        Icon Button
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Forms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Forms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#text-input" class="md-nav__link">
    <span class="md-ellipsis">
      
        Text Input
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#styling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Styling
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#theme-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Theme Support
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="industry-standard-ui-toolkit-practices-code-first-architecture">Industry-Standard UI Toolkit Practices: Code-First Architecture</h1>
<blockquote>
<p><strong>Focus</strong>: Enterprise-grade UI Toolkit patterns for team environments<br />
<strong>Audience</strong>: Teams transitioning from code-generated UI to scalable architectures<br />
<strong>Approach</strong>: Code-first with separation of concerns and data binding</p>
</blockquote>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#1-architecture-patterns-overview">Architecture Patterns Overview</a></li>
<li><a href="#2-code-first-ui-generation">Code-First UI Generation</a></li>
<li><a href="#3-separation-of-concerns">Separation of Concerns</a></li>
<li><a href="#4-data-binding-strategies">Data Binding Strategies</a></li>
<li><a href="#5-factory-pattern-implementation">Factory Pattern Implementation</a></li>
<li><a href="#6-view-controller-patterns">View-Controller Patterns</a></li>
<li><a href="#7-runtime-customization">Runtime Customization</a></li>
<li><a href="#8-team-collaboration-patterns">Team Collaboration Patterns</a></li>
<li><a href="#9-testing-strategies">Testing Strategies</a></li>
<li><a href="#10-performance--scalability">Performance &amp; Scalability</a></li>
<li><a href="#11-production-patterns">Production Patterns</a></li>
</ol>
<hr />
<h2 id="1-architecture-patterns-overview">1. Architecture Patterns Overview</h2>
<h3 id="11-common-ui-architecture-patterns">1.1 Common UI Architecture Patterns</h3>
<p><strong>Model-View-Controller (MVC)</strong></p>
<pre><code>Model (Data) ←→ Controller (Logic) ←→ View (UI)
     ↓                                    ↑
     └────────── Events ──────────────────┘
</code></pre>
<p><strong>Model-View-Presenter (MVP)</strong></p>
<pre><code>Model (Data) ←→ Presenter (Logic) ←→ View (Interface)
</code></pre>
<p><strong>Model-View-ViewModel (MVVM)</strong></p>
<pre><code>Model (Data) ←→ ViewModel (Logic + State) ←→ View (UI + Binding)
</code></pre>
<h3 id="12-ui-toolkit-best-pattern-choice">1.2 UI Toolkit Best Pattern Choice</h3>
<p><strong>Recommendation: MVVM with UI Toolkit</strong></p>
<p><strong>Why MVVM for UI Toolkit:</strong>
- Unity 6 native data binding support
- Clear separation of logic and presentation
- Easy to unit test ViewModels
- Scales well for large teams
- Designer-friendly (artists work on UXML/USS)
- Developers work on ViewModels and Models</p>
<p><strong>Architecture Diagram:</strong></p>
<pre><code>┌─────────────────────────────────────────────────┐
│                   Application                    │
└───────────────────┬─────────────────────────────┘
                    │
        ┌───────────┴───────────┐
        │                       │
┌───────▼────────┐    ┌────────▼────────┐
│  UI Services   │    │  Game Services  │
│  - UIRouter    │    │  - GameManager  │
│  - UIFactory   │    │  - AudioManager │
└───────┬────────┘    └────────┬────────┘
        │                      │
        └──────────┬───────────┘
                   │
         ┌─────────▼──────────┐
         │   View Controllers │
         │  (Screen Logic)    │
         └─────────┬──────────┘
                   │
    ┌──────────────┼──────────────┐
    │              │              │
┌───▼────┐   ┌────▼─────┐   ┌───▼────┐
│ View   │   │ ViewModel│   │ Model  │
│ (UXML  │◄──┤ (Binding │◄──┤ (Data) │
│  USS)  │   │  Logic)  │   │        │
└────────┘   └──────────┘   └────────┘
</code></pre>
<h3 id="13-layer-responsibilities">1.3 Layer Responsibilities</h3>
<p><strong>Model Layer</strong>
- Pure data structures
- Business logic
- No Unity dependencies
- Easily unit testable</p>
<p><strong>ViewModel Layer</strong>
- Presentation logic
- Command handling
- Property change notifications
- Data transformation for view</p>
<p><strong>View Layer</strong>
- UXML structure
- USS styling
- Minimal C# (wiring only)
- Event routing to ViewModel</p>
<p><strong>Controller Layer</strong>
- Orchestrates Views and ViewModels
- Lifecycle management
- Navigation
- Dependency injection</p>
<hr />
<h2 id="2-code-first-ui-generation">2. Code-First UI Generation</h2>
<h3 id="21-pure-code-ui-generation">2.1 Pure Code UI Generation</h3>
<p><strong>Example: Building UI Programmatically</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using UnityEngine.UIElements;

public static class UIFactory
{
    // Create a styled button
    public static Button CreateButton(string text, string[] classes = null)
    {
        var button = new Button { text = text };

        // Apply base styling
        button.style.minHeight = 50;
        button.style.minWidth = 200;
        button.style.marginBottom = 10;
        button.style.borderRadius = new Length(8, LengthUnit.Pixel);

        // Apply classes if provided
        if (classes != null)
        {
            foreach (var className in classes)
            {
                button.AddToClassList(className);
            }
        }

        return button;
    }

    // Create a labeled input field
    public static VisualElement CreateLabeledField(string label, VisualElement field)
    {
        var container = new VisualElement();
        container.AddToClassList(&quot;labeled-field&quot;);

        var labelElement = new Label(label);
        labelElement.AddToClassList(&quot;field-label&quot;);

        container.Add(labelElement);
        container.Add(field);

        return container;
    }

    // Create a panel with header
    public static VisualElement CreatePanel(string title, VisualElement content)
    {
        var panel = new VisualElement();
        panel.AddToClassList(&quot;panel&quot;);

        // Header
        var header = new VisualElement();
        header.AddToClassList(&quot;panel-header&quot;);

        var titleLabel = new Label(title);
        titleLabel.AddToClassList(&quot;panel-title&quot;);
        header.Add(titleLabel);

        // Content container
        var contentContainer = new VisualElement();
        contentContainer.AddToClassList(&quot;panel-content&quot;);
        contentContainer.Add(content);

        panel.Add(header);
        panel.Add(contentContainer);

        return panel;
    }
}
</code></pre>
<p><strong>Usage Example:</strong></p>
<pre><code class="language-csharp">public class MenuView : MonoBehaviour
{
    [SerializeField] private UIDocument _uiDocument;

    private void OnEnable()
    {
        var root = _uiDocument.rootVisualElement;
        root.Clear(); // Clear existing content

        // Build UI programmatically
        var container = new VisualElement();
        container.AddToClassList(&quot;menu-container&quot;);

        // Create buttons
        var playButton = UIFactory.CreateButton(&quot;Play&quot;, new[] { &quot;primary-button&quot; });
        var settingsButton = UIFactory.CreateButton(&quot;Settings&quot;, new[] { &quot;secondary-button&quot; });
        var quitButton = UIFactory.CreateButton(&quot;Quit&quot;, new[] { &quot;secondary-button&quot; });

        // Add callbacks
        playButton.clicked += OnPlayClicked;
        settingsButton.clicked += OnSettingsClicked;
        quitButton.clicked += OnQuitClicked;

        // Add to container
        container.Add(playButton);
        container.Add(settingsButton);
        container.Add(quitButton);

        // Add to root
        root.Add(container);
    }

    private void OnPlayClicked() { /* ... */ }
    private void OnSettingsClicked() { /* ... */ }
    private void OnQuitClicked() { /* ... */ }
}
</code></pre>
<h3 id="22-template-based-generation">2.2 Template-Based Generation</h3>
<p><strong>Hybrid Approach: UXML Templates + Code Generation</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using UnityEngine.UIElements;

public class InventoryItemTemplate
{
    // UXML template (can be embedded or loaded from file)
    private static VisualTreeAsset _template;

    public static VisualElement Create(InventoryItemData data)
    {
        // Load template if not cached
        if (_template == null)
        {
            _template = Resources.Load&lt;VisualTreeAsset&gt;(&quot;UI/Templates/InventoryItem&quot;);
        }

        // Clone template
        var instance = _template.CloneTree();

        // Populate with data
        var icon = instance.Q&lt;VisualElement&gt;(&quot;Icon&quot;);
        var nameLabel = instance.Q&lt;Label&gt;(&quot;ItemName&quot;);
        var quantityLabel = instance.Q&lt;Label&gt;(&quot;Quantity&quot;);

        icon.style.backgroundImage = new StyleBackground(data.Icon);
        nameLabel.text = data.Name;
        quantityLabel.text = data.Quantity.ToString();

        // Add interaction
        instance.RegisterCallback&lt;ClickEvent&gt;(evt =&gt; OnItemClicked(data));

        return instance;
    }

    private static void OnItemClicked(InventoryItemData data)
    {
        Debug.Log($&quot;Clicked item: {data.Name}&quot;);
    }
}
</code></pre>
<p><strong>InventoryItem.uxml Template:</strong></p>
<pre><code class="language-xml">&lt;ui:UXML xmlns:ui=&quot;UnityEngine.UIElements&quot;&gt;
    &lt;ui:VisualElement class=&quot;inventory-item&quot;&gt;
        &lt;ui:VisualElement name=&quot;Icon&quot; class=&quot;item-icon&quot; /&gt;
        &lt;ui:VisualElement class=&quot;item-info&quot;&gt;
            &lt;ui:Label name=&quot;ItemName&quot; class=&quot;item-name&quot; /&gt;
            &lt;ui:Label name=&quot;Quantity&quot; class=&quot;item-quantity&quot; /&gt;
        &lt;/ui:VisualElement&gt;
    &lt;/ui:VisualElement&gt;
&lt;/ui:UXML&gt;
</code></pre>
<h3 id="23-builder-pattern-for-complex-ui">2.3 Builder Pattern for Complex UI</h3>
<pre><code class="language-csharp">using UnityEngine.UIElements;

public class FormBuilder
{
    private VisualElement _form;
    private VisualElement _currentSection;

    public FormBuilder()
    {
        _form = new VisualElement();
        _form.AddToClassList(&quot;form&quot;);
    }

    public FormBuilder AddSection(string title)
    {
        _currentSection = new VisualElement();
        _currentSection.AddToClassList(&quot;form-section&quot;);

        if (!string.IsNullOrEmpty(title))
        {
            var sectionTitle = new Label(title);
            sectionTitle.AddToClassList(&quot;section-title&quot;);
            _currentSection.Add(sectionTitle);
        }

        _form.Add(_currentSection);
        return this;
    }

    public FormBuilder AddTextField(string label, string bindingPath)
    {
        var field = new TextField(label);
        field.bindingPath = bindingPath;
        field.AddToClassList(&quot;form-field&quot;);

        _currentSection.Add(field);
        return this;
    }

    public FormBuilder AddSlider(string label, float min, float max, string bindingPath)
    {
        var container = new VisualElement();
        container.AddToClassList(&quot;form-field&quot;);

        var labelElement = new Label(label);
        labelElement.AddToClassList(&quot;field-label&quot;);

        var slider = new Slider(min, max);
        slider.bindingPath = bindingPath;
        slider.AddToClassList(&quot;slider-field&quot;);

        container.Add(labelElement);
        container.Add(slider);

        _currentSection.Add(container);
        return this;
    }

    public FormBuilder AddToggle(string label, string bindingPath)
    {
        var toggle = new Toggle(label);
        toggle.bindingPath = bindingPath;
        toggle.AddToClassList(&quot;form-field&quot;);

        _currentSection.Add(toggle);
        return this;
    }

    public FormBuilder AddDropdown(string label, System.Collections.Generic.List&lt;string&gt; choices, string bindingPath)
    {
        var container = new VisualElement();
        container.AddToClassList(&quot;form-field&quot;);

        var labelElement = new Label(label);
        labelElement.AddToClassList(&quot;field-label&quot;);

        var dropdown = new DropdownField(choices, 0);
        dropdown.bindingPath = bindingPath;
        dropdown.AddToClassList(&quot;dropdown-field&quot;);

        container.Add(labelElement);
        container.Add(dropdown);

        _currentSection.Add(container);
        return this;
    }

    public FormBuilder AddButton(string text, System.Action onClick)
    {
        var button = new Button(onClick) { text = text };
        button.AddToClassList(&quot;form-button&quot;);

        _currentSection.Add(button);
        return this;
    }

    public VisualElement Build()
    {
        return _form;
    }
}

// Usage:
var settingsForm = new FormBuilder()
    .AddSection(&quot;Video Settings&quot;)
    .AddDropdown(&quot;Resolution&quot;, new List&lt;string&gt; { &quot;1920x1080&quot;, &quot;2560x1440&quot;, &quot;3840x2160&quot; }, &quot;resolution&quot;)
    .AddToggle(&quot;Fullscreen&quot;, &quot;isFullscreen&quot;)
    .AddSlider(&quot;Brightness&quot;, 0f, 1f, &quot;brightness&quot;)
    .AddSection(&quot;Audio Settings&quot;)
    .AddSlider(&quot;Master Volume&quot;, 0f, 1f, &quot;masterVolume&quot;)
    .AddSlider(&quot;Music Volume&quot;, 0f, 1f, &quot;musicVolume&quot;)
    .AddSlider(&quot;SFX Volume&quot;, 0f, 1f, &quot;sfxVolume&quot;)
    .AddSection(&quot;&quot;)
    .AddButton(&quot;Apply&quot;, OnApplySettings)
    .AddButton(&quot;Reset&quot;, OnResetSettings)
    .Build();
</code></pre>
<hr />
<h2 id="3-separation-of-concerns">3. Separation of Concerns</h2>
<h3 id="31-layer-structure">3.1 Layer Structure</h3>
<p><strong>Project Organization:</strong></p>
<pre><code>Assets/
├── Scripts/
│   ├── Core/
│   │   ├── Models/           # Data models
│   │   ├── Services/         # Business logic services
│   │   └── Utilities/        # Helpers, extensions
│   │
│   ├── UI/
│   │   ├── ViewModels/       # Presentation logic
│   │   ├── Views/            # View scripts (minimal)
│   │   ├── Controllers/      # Screen controllers
│   │   ├── Components/       # Reusable UI components
│   │   ├── Factories/        # UI element factories
│   │   └── Bindings/         # Custom binding adapters
│   │
│   └── Application/
│       ├── Bootstrap/        # App initialization
│       └── Configuration/    # Settings, config
│
└── UI/
    ├── Documents/            # UIDocument prefabs
    ├── Templates/            # UXML templates
    ├── Styles/               # USS stylesheets
    └── Assets/               # Icons, sprites
</code></pre>
<h3 id="32-interface-based-design">3.2 Interface-Based Design</h3>
<p><strong>View Interface:</strong></p>
<pre><code class="language-csharp">using UnityEngine.UIElements;

// View interface defines what the view can do
public interface IView
{
    VisualElement Root { get; }
    void Show();
    void Hide();
    void Dispose();
}

// Generic view interface with data type
public interface IView&lt;TData&gt; : IView
{
    void Initialize(TData data);
}

// Example: Main Menu View
public interface IMainMenuView : IView
{
    event System.Action PlayClicked;
    event System.Action SettingsClicked;
    event System.Action QuitClicked;
}
</code></pre>
<p><strong>View Implementation:</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using UnityEngine.UIElements;

public class MainMenuView : MonoBehaviour, IMainMenuView
{
    [SerializeField] private UIDocument _uiDocument;

    private VisualElement _root;
    private Button _playButton;
    private Button _settingsButton;
    private Button _quitButton;

    // Events
    public event System.Action PlayClicked;
    public event System.Action SettingsClicked;
    public event System.Action QuitClicked;

    // Properties
    public VisualElement Root =&gt; _root;

    private void Awake()
    {
        _root = _uiDocument.rootVisualElement;

        // Query elements
        _playButton = _root.Q&lt;Button&gt;(&quot;PlayButton&quot;);
        _settingsButton = _root.Q&lt;Button&gt;(&quot;SettingsButton&quot;);
        _quitButton = _root.Q&lt;Button&gt;(&quot;QuitButton&quot;);

        // Wire up events
        _playButton.clicked += () =&gt; PlayClicked?.Invoke();
        _settingsButton.clicked += () =&gt; SettingsClicked?.Invoke();
        _quitButton.clicked += () =&gt; QuitClicked?.Invoke();
    }

    public void Show()
    {
        _root.style.display = DisplayStyle.Flex;
        _root.style.opacity = 1;
    }

    public void Hide()
    {
        _root.style.display = DisplayStyle.None;
    }

    public void Dispose()
    {
        // Clean up event subscriptions
        PlayClicked = null;
        SettingsClicked = null;
        QuitClicked = null;
    }
}
</code></pre>
<p><strong>Controller:</strong></p>
<pre><code class="language-csharp">using UnityEngine;

public class MainMenuController : MonoBehaviour
{
    [SerializeField] private MainMenuView _view;

    // Injected dependencies
    private ISceneLoader _sceneLoader;
    private IAudioService _audioService;

    public void Initialize(ISceneLoader sceneLoader, IAudioService audioService)
    {
        _sceneLoader = sceneLoader;
        _audioService = audioService;
    }

    private void OnEnable()
    {
        // Subscribe to view events
        _view.PlayClicked += OnPlayClicked;
        _view.SettingsClicked += OnSettingsClicked;
        _view.QuitClicked += OnQuitClicked;

        _view.Show();
    }

    private void OnDisable()
    {
        // Unsubscribe from view events
        _view.PlayClicked -= OnPlayClicked;
        _view.SettingsClicked -= OnSettingsClicked;
        _view.QuitClicked -= OnQuitClicked;
    }

    private void OnPlayClicked()
    {
        _audioService.PlaySFX(&quot;ButtonClick&quot;);
        _sceneLoader.LoadScene(&quot;GameScene&quot;);
    }

    private void OnSettingsClicked()
    {
        _audioService.PlaySFX(&quot;ButtonClick&quot;);
        // Open settings panel
    }

    private void OnQuitClicked()
    {
        _audioService.PlaySFX(&quot;ButtonClick&quot;);
        Application.Quit();
    }
}
</code></pre>
<h3 id="33-command-pattern-for-actions">3.3 Command Pattern for Actions</h3>
<p><strong>Command Interface:</strong></p>
<pre><code class="language-csharp">public interface ICommand
{
    void Execute();
    void Undo();
    bool CanExecute();
}

public interface ICommand&lt;T&gt; : ICommand
{
    void Execute(T parameter);
}
</code></pre>
<p><strong>Command Implementation:</strong></p>
<pre><code class="language-csharp">using UnityEngine;

public class LoadSceneCommand : ICommand&lt;string&gt;
{
    private readonly ISceneLoader _sceneLoader;
    private readonly IAudioService _audioService;

    public LoadSceneCommand(ISceneLoader sceneLoader, IAudioService audioService)
    {
        _sceneLoader = sceneLoader;
        _audioService = audioService;
    }

    public bool CanExecute()
    {
        return !_sceneLoader.IsLoading;
    }

    public void Execute(string sceneName)
    {
        if (!CanExecute()) return;

        _audioService.PlaySFX(&quot;SceneTransition&quot;);
        _sceneLoader.LoadScene(sceneName);
    }

    public void Execute()
    {
        // Default implementation
    }

    public void Undo()
    {
        // Not applicable for scene loading
    }
}
</code></pre>
<p><strong>Using Commands in Views:</strong></p>
<pre><code class="language-csharp">public class MainMenuViewModel
{
    private readonly ICommand&lt;string&gt; _loadSceneCommand;

    public MainMenuViewModel(ICommand&lt;string&gt; loadSceneCommand)
    {
        _loadSceneCommand = loadSceneCommand;
    }

    public void OnPlayButtonClicked()
    {
        if (_loadSceneCommand.CanExecute())
        {
            _loadSceneCommand.Execute(&quot;GameScene&quot;);
        }
    }
}
</code></pre>
<hr />
<h2 id="4-data-binding-strategies">4. Data Binding Strategies</h2>
<h3 id="41-observable-pattern-manual-binding">4.1 Observable Pattern (Manual Binding)</h3>
<p><strong>Observable Property:</strong></p>
<pre><code class="language-csharp">using System;

public class ObservableProperty&lt;T&gt;
{
    private T _value;

    public event Action&lt;T&gt; ValueChanged;

    public T Value
    {
        get =&gt; _value;
        set
        {
            if (!Equals(_value, value))
            {
                _value = value;
                ValueChanged?.Invoke(_value);
            }
        }
    }

    public ObservableProperty(T initialValue = default)
    {
        _value = initialValue;
    }
}
</code></pre>
<p><strong>Observable Collection:</strong></p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;

public class ObservableCollection&lt;T&gt; : List&lt;T&gt;
{
    public event Action&lt;T&gt; ItemAdded;
    public event Action&lt;T&gt; ItemRemoved;
    public event Action CollectionCleared;
    public event Action CollectionChanged;

    public new void Add(T item)
    {
        base.Add(item);
        ItemAdded?.Invoke(item);
        CollectionChanged?.Invoke();
    }

    public new bool Remove(T item)
    {
        bool removed = base.Remove(item);
        if (removed)
        {
            ItemRemoved?.Invoke(item);
            CollectionChanged?.Invoke();
        }
        return removed;
    }

    public new void Clear()
    {
        base.Clear();
        CollectionCleared?.Invoke();
        CollectionChanged?.Invoke();
    }
}
</code></pre>
<p><strong>ViewModel with Observables:</strong></p>
<pre><code class="language-csharp">public class PlayerViewModel
{
    // Observable properties
    public ObservableProperty&lt;string&gt; PlayerName { get; }
    public ObservableProperty&lt;int&gt; Health { get; }
    public ObservableProperty&lt;int&gt; MaxHealth { get; }
    public ObservableProperty&lt;int&gt; Score { get; }

    // Computed property
    public ObservableProperty&lt;float&gt; HealthPercentage { get; }

    public PlayerViewModel(PlayerModel model)
    {
        PlayerName = new ObservableProperty&lt;string&gt;(model.Name);
        Health = new ObservableProperty&lt;int&gt;(model.Health);
        MaxHealth = new ObservableProperty&lt;int&gt;(model.MaxHealth);
        Score = new ObservableProperty&lt;int&gt;(model.Score);
        HealthPercentage = new ObservableProperty&lt;float&gt;(1f);

        // Update computed property when dependencies change
        Health.ValueChanged += _ =&gt; UpdateHealthPercentage();
        MaxHealth.ValueChanged += _ =&gt; UpdateHealthPercentage();
    }

    private void UpdateHealthPercentage()
    {
        HealthPercentage.Value = (float)Health.Value / MaxHealth.Value;
    }

    public void TakeDamage(int damage)
    {
        Health.Value = Mathf.Max(0, Health.Value - damage);
    }

    public void Heal(int amount)
    {
        Health.Value = Mathf.Min(MaxHealth.Value, Health.Value + amount);
    }

    public void AddScore(int points)
    {
        Score.Value += points;
    }
}
</code></pre>
<p><strong>View Binding:</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using UnityEngine.UIElements;

public class PlayerHUDView : MonoBehaviour
{
    [SerializeField] private UIDocument _uiDocument;

    private Label _playerNameLabel;
    private Label _healthLabel;
    private ProgressBar _healthBar;
    private Label _scoreLabel;

    private PlayerViewModel _viewModel;

    public void Initialize(PlayerViewModel viewModel)
    {
        _viewModel = viewModel;

        // Get UI elements
        var root = _uiDocument.rootVisualElement;
        _playerNameLabel = root.Q&lt;Label&gt;(&quot;PlayerName&quot;);
        _healthLabel = root.Q&lt;Label&gt;(&quot;HealthValue&quot;);
        _healthBar = root.Q&lt;ProgressBar&gt;(&quot;HealthBar&quot;);
        _scoreLabel = root.Q&lt;Label&gt;(&quot;ScoreValue&quot;);

        // Bind to observables
        _viewModel.PlayerName.ValueChanged += OnPlayerNameChanged;
        _viewModel.Health.ValueChanged += OnHealthChanged;
        _viewModel.HealthPercentage.ValueChanged += OnHealthPercentageChanged;
        _viewModel.Score.ValueChanged += OnScoreChanged;

        // Initialize with current values
        OnPlayerNameChanged(_viewModel.PlayerName.Value);
        OnHealthChanged(_viewModel.Health.Value);
        OnHealthPercentageChanged(_viewModel.HealthPercentage.Value);
        OnScoreChanged(_viewModel.Score.Value);
    }

    private void OnDestroy()
    {
        // Unsubscribe from observables
        if (_viewModel != null)
        {
            _viewModel.PlayerName.ValueChanged -= OnPlayerNameChanged;
            _viewModel.Health.ValueChanged -= OnHealthChanged;
            _viewModel.HealthPercentage.ValueChanged -= OnHealthPercentageChanged;
            _viewModel.Score.ValueChanged -= OnScoreChanged;
        }
    }

    private void OnPlayerNameChanged(string name)
    {
        _playerNameLabel.text = name;
    }

    private void OnHealthChanged(int health)
    {
        _healthLabel.text = $&quot;{health}/{_viewModel.MaxHealth.Value}&quot;;
    }

    private void OnHealthPercentageChanged(float percentage)
    {
        _healthBar.value = percentage * 100f;

        // Update health bar color based on percentage
        if (percentage &lt; 0.3f)
            _healthBar.RemoveFromClassList(&quot;health-ok&quot;);
            _healthBar.AddToClassList(&quot;health-low&quot;);
        else
            _healthBar.RemoveFromClassList(&quot;health-low&quot;);
            _healthBar.AddToClassList(&quot;health-ok&quot;);
    }

    private void OnScoreChanged(int score)
    {
        _scoreLabel.text = score.ToString(&quot;N0&quot;);
    }
}
</code></pre>
<h3 id="42-unity-6-native-data-binding">4.2 Unity 6 Native Data Binding</h3>
<p><strong>ScriptableObject Model with Binding:</strong></p>
<pre><code class="language-csharp">using UnityEngine;

[CreateAssetMenu(fileName = &quot;GameSettings&quot;, menuName = &quot;Game/Settings&quot;)]
public class GameSettings : ScriptableObject
{
    [SerializeField] private float _masterVolume = 1f;
    [SerializeField] private float _musicVolume = 1f;
    [SerializeField] private float _sfxVolume = 1f;
    [SerializeField] private bool _isFullscreen = true;
    [SerializeField] private int _resolutionIndex = 0;

    public float MasterVolume
    {
        get =&gt; _masterVolume;
        set =&gt; _masterVolume = Mathf.Clamp01(value);
    }

    public float MusicVolume
    {
        get =&gt; _musicVolume;
        set =&gt; _musicVolume = Mathf.Clamp01(value);
    }

    public float SfxVolume
    {
        get =&gt; _sfxVolume;
        set =&gt; _sfxVolume = Mathf.Clamp01(value);
    }

    public bool IsFullscreen
    {
        get =&gt; _isFullscreen;
        set =&gt; _isFullscreen = value;
    }

    public int ResolutionIndex
    {
        get =&gt; _resolutionIndex;
        set =&gt; _resolutionIndex = value;
    }
}
</code></pre>
<p><strong>UXML with Binding Paths:</strong></p>
<pre><code class="language-xml">&lt;ui:UXML xmlns:ui=&quot;UnityEngine.UIElements&quot;&gt;
    &lt;ui:VisualElement class=&quot;settings-panel&quot;&gt;

        &lt;ui:Label text=&quot;Audio Settings&quot; class=&quot;section-title&quot; /&gt;

        &lt;ui:Slider name=&quot;MasterVolumeSlider&quot; 
                   label=&quot;Master Volume&quot;
                   binding-path=&quot;_masterVolume&quot;
                   low-value=&quot;0&quot; 
                   high-value=&quot;1&quot;
                   class=&quot;volume-slider&quot; /&gt;

        &lt;ui:Slider name=&quot;MusicVolumeSlider&quot; 
                   label=&quot;Music Volume&quot;
                   binding-path=&quot;_musicVolume&quot;
                   low-value=&quot;0&quot; 
                   high-value=&quot;1&quot;
                   class=&quot;volume-slider&quot; /&gt;

        &lt;ui:Slider name=&quot;SfxVolumeSlider&quot; 
                   label=&quot;SFX Volume&quot;
                   binding-path=&quot;_sfxVolume&quot;
                   low-value=&quot;0&quot; 
                   high-value=&quot;1&quot;
                   class=&quot;volume-slider&quot; /&gt;

        &lt;ui:Label text=&quot;Video Settings&quot; class=&quot;section-title&quot; /&gt;

        &lt;ui:Toggle name=&quot;FullscreenToggle&quot; 
                   label=&quot;Fullscreen&quot;
                   binding-path=&quot;_isFullscreen&quot;
                   class=&quot;settings-toggle&quot; /&gt;

        &lt;ui:DropdownField name=&quot;ResolutionDropdown&quot; 
                          label=&quot;Resolution&quot;
                          binding-path=&quot;_resolutionIndex&quot;
                          class=&quot;settings-dropdown&quot; /&gt;

    &lt;/ui:VisualElement&gt;
&lt;/ui:UXML&gt;
</code></pre>
<p><strong>View Controller with Binding:</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using UnityEngine.UIElements;

public class SettingsViewController : MonoBehaviour
{
    [SerializeField] private UIDocument _uiDocument;
    [SerializeField] private GameSettings _settings;

    private SerializedObject _serializedSettings;
    private Slider _masterVolumeSlider;
    private AudioSource _audioSource;

    private void OnEnable()
    {
        var root = _uiDocument.rootVisualElement;

        // Setup binding
        _serializedSettings = new SerializedObject(_settings);
        root.Bind(_serializedSettings);

        // Get slider reference for immediate audio feedback
        _masterVolumeSlider = root.Q&lt;Slider&gt;(&quot;MasterVolumeSlider&quot;);

        // Add immediate feedback for volume changes
        _masterVolumeSlider.RegisterValueChangedCallback(evt =&gt;
        {
            AudioListener.volume = evt.newValue;
        });
    }

    private void OnDisable()
    {
        // Unbind
        var root = _uiDocument.rootVisualElement;
        root.Unbind();
    }
}
</code></pre>
<h3 id="43-reactive-binding-with-unirx-advanced">4.3 Reactive Binding with UniRx (Advanced)</h3>
<p><strong>Note</strong>: This requires UniRx package from GitHub.</p>
<pre><code class="language-csharp">using UniRx;
using UnityEngine;

public class ReactivePlayerViewModel
{
    // Reactive properties
    public ReactiveProperty&lt;string&gt; PlayerName { get; }
    public ReactiveProperty&lt;int&gt; Health { get; }
    public ReactiveProperty&lt;int&gt; MaxHealth { get; }
    public ReactiveProperty&lt;int&gt; Score { get; }

    // Computed reactive property
    public IReadOnlyReactiveProperty&lt;float&gt; HealthPercentage { get; }

    public ReactivePlayerViewModel(PlayerModel model)
    {
        PlayerName = new ReactiveProperty&lt;string&gt;(model.Name);
        Health = new ReactiveProperty&lt;int&gt;(model.Health);
        MaxHealth = new ReactiveProperty&lt;int&gt;(model.MaxHealth);
        Score = new ReactiveProperty&lt;int&gt;(model.Score);

        // Computed property using CombineLatest
        HealthPercentage = Health
            .CombineLatest(MaxHealth, (h, mh) =&gt; (float)h / mh)
            .ToReadOnlyReactiveProperty();
    }
}

// View binding with UniRx
public class ReactivePlayerHUDView : MonoBehaviour
{
    [SerializeField] private UIDocument _uiDocument;

    private Label _healthLabel;
    private ProgressBar _healthBar;
    private ReactivePlayerViewModel _viewModel;
    private CompositeDisposable _disposables = new CompositeDisposable();

    public void Initialize(ReactivePlayerViewModel viewModel)
    {
        _viewModel = viewModel;

        var root = _uiDocument.rootVisualElement;
        _healthLabel = root.Q&lt;Label&gt;(&quot;HealthValue&quot;);
        _healthBar = root.Q&lt;ProgressBar&gt;(&quot;HealthBar&quot;);

        // Bind with automatic disposal
        _viewModel.Health
            .CombineLatest(_viewModel.MaxHealth, (h, mh) =&gt; $&quot;{h}/{mh}&quot;)
            .Subscribe(text =&gt; _healthLabel.text = text)
            .AddTo(_disposables);

        _viewModel.HealthPercentage
            .Subscribe(percentage =&gt; _healthBar.value = percentage * 100f)
            .AddTo(_disposables);
    }

    private void OnDestroy()
    {
        _disposables.Dispose();
    }
}
</code></pre>
<hr />
<h2 id="5-factory-pattern-implementation">5. Factory Pattern Implementation</h2>
<h3 id="51-ui-element-factory">5.1 UI Element Factory</h3>
<p><strong>Base Factory Interface:</strong></p>
<pre><code class="language-csharp">using UnityEngine.UIElements;

public interface IUIElementFactory&lt;out T&gt; where T : VisualElement
{
    T Create();
}

public interface IUIElementFactory&lt;out T, in TData&gt; where T : VisualElement
{
    T Create(TData data);
}
</code></pre>
<p><strong>Button Factory:</strong></p>
<pre><code class="language-csharp">using UnityEngine.UIElements;

public enum ButtonStyle
{
    Primary,
    Secondary,
    Danger,
    Success
}

public class ButtonFactory : IUIElementFactory&lt;Button, ButtonFactoryData&gt;
{
    public Button Create(ButtonFactoryData data)
    {
        var button = new Button
        {
            text = data.Text
        };

        // Apply style class
        button.AddToClassList(&quot;btn&quot;);
        button.AddToClassList(GetStyleClass(data.Style));

        // Apply size class if specified
        if (data.Size != ButtonSize.Default)
        {
            button.AddToClassList(GetSizeClass(data.Size));
        }

        // Add icon if specified
        if (data.Icon != null)
        {
            var icon = new VisualElement();
            icon.AddToClassList(&quot;btn-icon&quot;);
            icon.style.backgroundImage = new StyleBackground(data.Icon);
            button.Insert(0, icon);
        }

        // Add callback if specified
        if (data.OnClick != null)
        {
            button.clicked += data.OnClick;
        }

        return button;
    }

    private string GetStyleClass(ButtonStyle style)
    {
        return style switch
        {
            ButtonStyle.Primary =&gt; &quot;btn-primary&quot;,
            ButtonStyle.Secondary =&gt; &quot;btn-secondary&quot;,
            ButtonStyle.Danger =&gt; &quot;btn-danger&quot;,
            ButtonStyle.Success =&gt; &quot;btn-success&quot;,
            _ =&gt; &quot;btn-primary&quot;
        };
    }

    private string GetSizeClass(ButtonSize size)
    {
        return size switch
        {
            ButtonSize.Small =&gt; &quot;btn-sm&quot;,
            ButtonSize.Large =&gt; &quot;btn-lg&quot;,
            _ =&gt; &quot;&quot;
        };
    }
}

public class ButtonFactoryData
{
    public string Text { get; set; }
    public ButtonStyle Style { get; set; } = ButtonStyle.Primary;
    public ButtonSize Size { get; set; } = ButtonSize.Default;
    public Sprite Icon { get; set; }
    public System.Action OnClick { get; set; }
}

public enum ButtonSize
{
    Default,
    Small,
    Large
}
</code></pre>
<p><strong>Usage:</strong></p>
<pre><code class="language-csharp">var buttonFactory = new ButtonFactory();

var playButton = buttonFactory.Create(new ButtonFactoryData
{
    Text = &quot;Play&quot;,
    Style = ButtonStyle.Primary,
    Size = ButtonSize.Large,
    OnClick = () =&gt; Debug.Log(&quot;Play clicked&quot;)
});

var cancelButton = buttonFactory.Create(new ButtonFactoryData
{
    Text = &quot;Cancel&quot;,
    Style = ButtonStyle.Secondary,
    OnClick = () =&gt; Debug.Log(&quot;Cancel clicked&quot;)
});
</code></pre>
<h3 id="52-panel-factory">5.2 Panel Factory</h3>
<p><strong>Panel Factory:</strong></p>
<pre><code class="language-csharp">using UnityEngine.UIElements;

public class PanelFactory : IUIElementFactory&lt;VisualElement, PanelFactoryData&gt;
{
    public VisualElement Create(PanelFactoryData data)
    {
        var panel = new VisualElement();
        panel.AddToClassList(&quot;panel&quot;);
        panel.AddToClassList(GetThemeClass(data.Theme));

        // Header
        if (!string.IsNullOrEmpty(data.Title))
        {
            var header = CreateHeader(data.Title, data.HeaderActions);
            panel.Add(header);
        }

        // Content
        var content = new VisualElement();
        content.AddToClassList(&quot;panel-content&quot;);

        if (data.Content != null)
        {
            content.Add(data.Content);
        }

        panel.Add(content);

        // Footer
        if (data.FooterButtons != null &amp;&amp; data.FooterButtons.Count &gt; 0)
        {
            var footer = CreateFooter(data.FooterButtons);
            panel.Add(footer);
        }

        return panel;
    }

    private VisualElement CreateHeader(string title, System.Collections.Generic.List&lt;Button&gt; actions)
    {
        var header = new VisualElement();
        header.AddToClassList(&quot;panel-header&quot;);

        var titleLabel = new Label(title);
        titleLabel.AddToClassList(&quot;panel-title&quot;);
        header.Add(titleLabel);

        if (actions != null &amp;&amp; actions.Count &gt; 0)
        {
            var actionsContainer = new VisualElement();
            actionsContainer.AddToClassList(&quot;panel-header-actions&quot;);

            foreach (var action in actions)
            {
                actionsContainer.Add(action);
            }

            header.Add(actionsContainer);
        }

        return header;
    }

    private VisualElement CreateFooter(System.Collections.Generic.List&lt;Button&gt; buttons)
    {
        var footer = new VisualElement();
        footer.AddToClassList(&quot;panel-footer&quot;);

        foreach (var button in buttons)
        {
            footer.Add(button);
        }

        return footer;
    }

    private string GetThemeClass(PanelTheme theme)
    {
        return theme switch
        {
            PanelTheme.Light =&gt; &quot;panel-light&quot;,
            PanelTheme.Dark =&gt; &quot;panel-dark&quot;,
            PanelTheme.Glass =&gt; &quot;panel-glass&quot;,
            _ =&gt; &quot;panel-dark&quot;
        };
    }
}

public class PanelFactoryData
{
    public string Title { get; set; }
    public PanelTheme Theme { get; set; } = PanelTheme.Dark;
    public VisualElement Content { get; set; }
    public System.Collections.Generic.List&lt;Button&gt; HeaderActions { get; set; }
    public System.Collections.Generic.List&lt;Button&gt; FooterButtons { get; set; }
}

public enum PanelTheme
{
    Light,
    Dark,
    Glass
}
</code></pre>
<h3 id="53-abstract-factory-pattern">5.3 Abstract Factory Pattern</h3>
<p><strong>UI Component Family:</strong></p>
<pre><code class="language-csharp">using UnityEngine.UIElements;

// Abstract factory interface
public interface IUIComponentFactory
{
    Button CreateButton(string text, System.Action onClick = null);
    TextField CreateTextField(string label, string bindingPath = null);
    VisualElement CreatePanel(string title);
    Label CreateLabel(string text);
}

// Modern theme factory
public class ModernUIFactory : IUIComponentFactory
{
    public Button CreateButton(string text, System.Action onClick = null)
    {
        var button = new Button { text = text };
        button.AddToClassList(&quot;modern-button&quot;);

        if (onClick != null)
        {
            button.clicked += onClick;
        }

        return button;
    }

    public TextField CreateTextField(string label, string bindingPath = null)
    {
        var field = new TextField(label);
        field.AddToClassList(&quot;modern-textfield&quot;);

        if (!string.IsNullOrEmpty(bindingPath))
        {
            field.bindingPath = bindingPath;
        }

        return field;
    }

    public VisualElement CreatePanel(string title)
    {
        var panel = new VisualElement();
        panel.AddToClassList(&quot;modern-panel&quot;);

        if (!string.IsNullOrEmpty(title))
        {
            var titleLabel = new Label(title);
            titleLabel.AddToClassList(&quot;modern-panel-title&quot;);
            panel.Add(titleLabel);
        }

        return panel;
    }

    public Label CreateLabel(string text)
    {
        var label = new Label(text);
        label.AddToClassList(&quot;modern-label&quot;);
        return label;
    }
}

// Retro theme factory
public class RetroUIFactory : IUIComponentFactory
{
    public Button CreateButton(string text, System.Action onClick = null)
    {
        var button = new Button { text = text };
        button.AddToClassList(&quot;retro-button&quot;);

        if (onClick != null)
        {
            button.clicked += onClick;
        }

        return button;
    }

    public TextField CreateTextField(string label, string bindingPath = null)
    {
        var field = new TextField(label);
        field.AddToClassList(&quot;retro-textfield&quot;);

        if (!string.IsNullOrEmpty(bindingPath))
        {
            field.bindingPath = bindingPath;
        }

        return field;
    }

    public VisualElement CreatePanel(string title)
    {
        var panel = new VisualElement();
        panel.AddToClassList(&quot;retro-panel&quot;);

        if (!string.IsNullOrEmpty(title))
        {
            var titleLabel = new Label(title);
            titleLabel.AddToClassList(&quot;retro-panel-title&quot;);
            panel.Add(titleLabel);
        }

        return panel;
    }

    public Label CreateLabel(string text)
    {
        var label = new Label(text);
        label.AddToClassList(&quot;retro-label&quot;);
        return label;
    }
}

// Usage with dependency injection
public class UIBuilder
{
    private readonly IUIComponentFactory _factory;

    public UIBuilder(IUIComponentFactory factory)
    {
        _factory = factory;
    }

    public VisualElement BuildLoginForm()
    {
        var panel = _factory.CreatePanel(&quot;Login&quot;);

        var usernameField = _factory.CreateTextField(&quot;Username&quot;);
        var passwordField = _factory.CreateTextField(&quot;Password&quot;);

        var loginButton = _factory.CreateButton(&quot;Login&quot;, OnLoginClicked);
        var cancelButton = _factory.CreateButton(&quot;Cancel&quot;, OnCancelClicked);

        panel.Add(usernameField);
        panel.Add(passwordField);
        panel.Add(loginButton);
        panel.Add(cancelButton);

        return panel;
    }

    private void OnLoginClicked() { /* ... */ }
    private void OnCancelClicked() { /* ... */ }
}
</code></pre>
<hr />
<h2 id="6-view-controller-patterns">6. View-Controller Patterns</h2>
<h3 id="61-screen-controller-pattern">6.1 Screen Controller Pattern</h3>
<p><strong>Base Screen Controller:</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using UnityEngine.UIElements;

public abstract class ScreenController : MonoBehaviour
{
    [SerializeField] protected UIDocument _uiDocument;

    protected VisualElement Root =&gt; _uiDocument.rootVisualElement;

    public virtual void Initialize()
    {
        // Override in derived classes
    }

    public virtual void Show()
    {
        Root.style.display = DisplayStyle.Flex;
        OnShown();
    }

    public virtual void Hide()
    {
        Root.style.display = DisplayStyle.None;
        OnHidden();
    }

    protected virtual void OnShown() { }
    protected virtual void OnHidden() { }

    public virtual void Dispose()
    {
        // Clean up resources
    }
}
</code></pre>
<p><strong>Concrete Screen Controller:</strong></p>
<pre><code class="language-csharp">public class InventoryScreenController : ScreenController
{
    [SerializeField] private InventoryViewModel _viewModel;

    private VisualElement _itemsContainer;
    private Button _closeButton;
    private TextField _searchField;

    public override void Initialize()
    {
        base.Initialize();

        // Query elements
        _itemsContainer = Root.Q&lt;VisualElement&gt;(&quot;ItemsContainer&quot;);
        _closeButton = Root.Q&lt;Button&gt;(&quot;CloseButton&quot;);
        _searchField = Root.Q&lt;TextField&gt;(&quot;SearchField&quot;);

        // Wire up events
        _closeButton.clicked += OnCloseClicked;
        _searchField.RegisterValueChangedCallback(OnSearchChanged);

        // Bind to ViewModel
        BindToViewModel();
    }

    private void BindToViewModel()
    {
        _viewModel.Items.CollectionChanged += RefreshItems;
        RefreshItems();
    }

    private void RefreshItems()
    {
        _itemsContainer.Clear();

        foreach (var item in _viewModel.FilteredItems)
        {
            var itemElement = CreateItemElement(item);
            _itemsContainer.Add(itemElement);
        }
    }

    private VisualElement CreateItemElement(InventoryItemData item)
    {
        var itemElement = new VisualElement();
        itemElement.AddToClassList(&quot;inventory-item&quot;);

        var icon = new VisualElement();
        icon.style.backgroundImage = new StyleBackground(item.Icon);
        icon.AddToClassList(&quot;item-icon&quot;);

        var nameLabel = new Label(item.Name);
        nameLabel.AddToClassList(&quot;item-name&quot;);

        var quantityLabel = new Label($&quot;x{item.Quantity}&quot;);
        quantityLabel.AddToClassList(&quot;item-quantity&quot;);

        itemElement.Add(icon);
        itemElement.Add(nameLabel);
        itemElement.Add(quantityLabel);

        // Click handler
        itemElement.RegisterCallback&lt;ClickEvent&gt;(evt =&gt; OnItemClicked(item));

        return itemElement;
    }

    private void OnItemClicked(InventoryItemData item)
    {
        _viewModel.SelectItem(item);
    }

    private void OnSearchChanged(ChangeEvent&lt;string&gt; evt)
    {
        _viewModel.SetSearchFilter(evt.newValue);
    }

    private void OnCloseClicked()
    {
        Hide();
    }

    public override void Dispose()
    {
        base.Dispose();

        _viewModel.Items.CollectionChanged -= RefreshItems;
        _closeButton.clicked -= OnCloseClicked;
    }
}
</code></pre>
<h3 id="62-screen-manager-navigation-system">6.2 Screen Manager / Navigation System</h3>
<p><strong>Screen Manager:</strong></p>
<pre><code class="language-csharp">using System.Collections.Generic;
using UnityEngine;

public class ScreenManager : MonoBehaviour
{
    private static ScreenManager _instance;
    public static ScreenManager Instance =&gt; _instance;

    private Dictionary&lt;string, ScreenController&gt; _screens = new Dictionary&lt;string, ScreenController&gt;();
    private Stack&lt;ScreenController&gt; _history = new Stack&lt;ScreenController&gt;();
    private ScreenController _currentScreen;

    private void Awake()
    {
        if (_instance != null &amp;&amp; _instance != this)
        {
            Destroy(gameObject);
            return;
        }

        _instance = this;
        DontDestroyOnLoad(gameObject);
    }

    public void RegisterScreen(string screenId, ScreenController screen)
    {
        if (!_screens.ContainsKey(screenId))
        {
            _screens.Add(screenId, screen);
            screen.Initialize();
            screen.Hide();
        }
    }

    public void ShowScreen(string screenId, bool addToHistory = true)
    {
        if (!_screens.TryGetValue(screenId, out var screen))
        {
            Debug.LogError($&quot;Screen '{screenId}' not registered!&quot;);
            return;
        }

        // Hide current screen
        if (_currentScreen != null)
        {
            _currentScreen.Hide();

            if (addToHistory)
            {
                _history.Push(_currentScreen);
            }
        }

        // Show new screen
        _currentScreen = screen;
        _currentScreen.Show();
    }

    public void GoBack()
    {
        if (_history.Count &gt; 0)
        {
            var previousScreen = _history.Pop();

            if (_currentScreen != null)
            {
                _currentScreen.Hide();
            }

            _currentScreen = previousScreen;
            _currentScreen.Show();
        }
    }

    public void ClearHistory()
    {
        _history.Clear();
    }

    public T GetScreen&lt;T&gt;(string screenId) where T : ScreenController
    {
        if (_screens.TryGetValue(screenId, out var screen))
        {
            return screen as T;
        }

        return null;
    }
}

// Usage:
public class GameBootstrap : MonoBehaviour
{
    [SerializeField] private ScreenController _mainMenuScreen;
    [SerializeField] private ScreenController _gameplayScreen;
    [SerializeField] private ScreenController _settingsScreen;

    private void Start()
    {
        var screenManager = ScreenManager.Instance;

        screenManager.RegisterScreen(&quot;MainMenu&quot;, _mainMenuScreen);
        screenManager.RegisterScreen(&quot;Gameplay&quot;, _gameplayScreen);
        screenManager.RegisterScreen(&quot;Settings&quot;, _settingsScreen);

        screenManager.ShowScreen(&quot;MainMenu&quot;);
    }
}
</code></pre>
<h3 id="63-presenter-pattern-mvp">6.3 Presenter Pattern (MVP)</h3>
<p><strong>Presenter Interface:</strong></p>
<pre><code class="language-csharp">public interface IPresenter
{
    void Initialize();
    void OnViewShown();
    void OnViewHidden();
    void Dispose();
}

public interface IPresenter&lt;TView&gt; : IPresenter where TView : IView
{
    TView View { get; set; }
}
</code></pre>
<p><strong>Concrete Presenter:</strong></p>
<pre><code class="language-csharp">public class InventoryPresenter : IPresenter&lt;IInventoryView&gt;
{
    public IInventoryView View { get; set; }

    private readonly InventoryService _inventoryService;
    private readonly IUIFactory _uiFactory;

    public InventoryPresenter(InventoryService inventoryService, IUIFactory uiFactory)
    {
        _inventoryService = inventoryService;
        _uiFactory = uiFactory;
    }

    public void Initialize()
    {
        // Subscribe to view events
        View.ItemSelected += OnItemSelected;
        View.SearchChanged += OnSearchChanged;
        View.CloseRequested += OnCloseRequested;

        // Subscribe to model events
        _inventoryService.InventoryChanged += OnInventoryChanged;

        // Initial data load
        RefreshView();
    }

    public void OnViewShown()
    {
        RefreshView();
    }

    public void OnViewHidden()
    {
        // Cleanup if needed
    }

    public void Dispose()
    {
        // Unsubscribe from events
        View.ItemSelected -= OnItemSelected;
        View.SearchChanged -= OnSearchChanged;
        View.CloseRequested -= OnCloseRequested;

        _inventoryService.InventoryChanged -= OnInventoryChanged;
    }

    private void RefreshView()
    {
        var items = _inventoryService.GetAllItems();
        View.DisplayItems(items);
    }

    private void OnItemSelected(InventoryItemData item)
    {
        View.ShowItemDetails(item);
    }

    private void OnSearchChanged(string searchText)
    {
        var filteredItems = _inventoryService.SearchItems(searchText);
        View.DisplayItems(filteredItems);
    }

    private void OnCloseRequested()
    {
        View.Hide();
    }

    private void OnInventoryChanged()
    {
        RefreshView();
    }
}
</code></pre>
<hr />
<h2 id="7-runtime-customization">7. Runtime Customization</h2>
<h3 id="71-dynamic-theme-system">7.1 Dynamic Theme System</h3>
<p><strong>Theme Configuration:</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using System.Collections.Generic;

[CreateAssetMenu(fileName = &quot;UITheme&quot;, menuName = &quot;UI/Theme&quot;)]
public class UITheme : ScriptableObject
{
    [System.Serializable]
    public class ColorPalette
    {
        public Color primary;
        public Color secondary;
        public Color background;
        public Color surface;
        public Color error;
        public Color warning;
        public Color success;
        public Color textPrimary;
        public Color textSecondary;
    }

    [System.Serializable]
    public class Typography
    {
        public int fontSizeSmall = 12;
        public int fontSizeMedium = 16;
        public int fontSizeLarge = 24;
        public int fontSizeXLarge = 32;
    }

    [System.Serializable]
    public class Spacing
    {
        public int small = 8;
        public int medium = 16;
        public int large = 24;
        public int xLarge = 32;
    }

    public string themeName;
    public ColorPalette colors;
    public Typography typography;
    public Spacing spacing;
    public StyleSheet styleSheet;
}
</code></pre>
<p><strong>Theme Manager:</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using UnityEngine.UIElements;
using System.Collections.Generic;

public class ThemeManager : MonoBehaviour
{
    private static ThemeManager _instance;
    public static ThemeManager Instance =&gt; _instance;

    [SerializeField] private List&lt;UITheme&gt; _availableThemes;
    [SerializeField] private int _currentThemeIndex = 0;

    private List&lt;UIDocument&gt; _registeredDocuments = new List&lt;UIDocument&gt;();
    private UITheme _currentTheme;

    public UITheme CurrentTheme =&gt; _currentTheme;

    public event System.Action&lt;UITheme&gt; ThemeChanged;

    private void Awake()
    {
        if (_instance != null &amp;&amp; _instance != this)
        {
            Destroy(gameObject);
            return;
        }

        _instance = this;
        DontDestroyOnLoad(gameObject);

        ApplyTheme(_currentThemeIndex);
    }

    public void RegisterDocument(UIDocument document)
    {
        if (!_registeredDocuments.Contains(document))
        {
            _registeredDocuments.Add(document);
            ApplyThemeToDocument(document, _currentTheme);
        }
    }

    public void UnregisterDocument(UIDocument document)
    {
        _registeredDocuments.Remove(document);
    }

    public void ApplyTheme(int themeIndex)
    {
        if (themeIndex &lt; 0 || themeIndex &gt;= _availableThemes.Count)
            return;

        _currentThemeIndex = themeIndex;
        _currentTheme = _availableThemes[themeIndex];

        // Apply to all registered documents
        foreach (var document in _registeredDocuments)
        {
            ApplyThemeToDocument(document, _currentTheme);
        }

        ThemeChanged?.Invoke(_currentTheme);
    }

    public void ApplyThemeByName(string themeName)
    {
        int index = _availableThemes.FindIndex(t =&gt; t.themeName == themeName);
        if (index &gt;= 0)
        {
            ApplyTheme(index);
        }
    }

    public void NextTheme()
    {
        int nextIndex = (_currentThemeIndex + 1) % _availableThemes.Count;
        ApplyTheme(nextIndex);
    }

    private void ApplyThemeToDocument(UIDocument document, UITheme theme)
    {
        var root = document.rootVisualElement;

        // Remove previous theme stylesheets
        foreach (var availableTheme in _availableThemes)
        {
            if (availableTheme.styleSheet != null)
            {
                root.styleSheets.Remove(availableTheme.styleSheet);
            }
        }

        // Add new theme stylesheet
        if (theme.styleSheet != null)
        {
            root.styleSheets.Add(theme.styleSheet);
        }

        // Apply CSS variables
        ApplyThemeVariables(root, theme);
    }

    private void ApplyThemeVariables(VisualElement root, UITheme theme)
    {
        // Color variables
        root.style.SetCustomProperty(&quot;--color-primary&quot;, theme.colors.primary);
        root.style.SetCustomProperty(&quot;--color-secondary&quot;, theme.colors.secondary);
        root.style.SetCustomProperty(&quot;--color-background&quot;, theme.colors.background);
        root.style.SetCustomProperty(&quot;--color-surface&quot;, theme.colors.surface);
        root.style.SetCustomProperty(&quot;--color-error&quot;, theme.colors.error);
        root.style.SetCustomProperty(&quot;--color-warning&quot;, theme.colors.warning);
        root.style.SetCustomProperty(&quot;--color-success&quot;, theme.colors.success);
        root.style.SetCustomProperty(&quot;--color-text-primary&quot;, theme.colors.textPrimary);
        root.style.SetCustomProperty(&quot;--color-text-secondary&quot;, theme.colors.textSecondary);

        // Typography variables
        root.style.SetCustomProperty(&quot;--font-size-sm&quot;, new Length(theme.typography.fontSizeSmall, LengthUnit.Pixel));
        root.style.SetCustomProperty(&quot;--font-size-md&quot;, new Length(theme.typography.fontSizeMedium, LengthUnit.Pixel));
        root.style.SetCustomProperty(&quot;--font-size-lg&quot;, new Length(theme.typography.fontSizeLarge, LengthUnit.Pixel));
        root.style.SetCustomProperty(&quot;--font-size-xl&quot;, new Length(theme.typography.fontSizeXLarge, LengthUnit.Pixel));

        // Spacing variables
        root.style.SetCustomProperty(&quot;--spacing-sm&quot;, new Length(theme.spacing.small, LengthUnit.Pixel));
        root.style.SetCustomProperty(&quot;--spacing-md&quot;, new Length(theme.spacing.medium, LengthUnit.Pixel));
        root.style.SetCustomProperty(&quot;--spacing-lg&quot;, new Length(theme.spacing.large, LengthUnit.Pixel));
        root.style.SetCustomProperty(&quot;--spacing-xl&quot;, new Length(theme.spacing.xLarge, LengthUnit.Pixel));
    }
}

// Extension method for setting custom properties
public static class StyleExtensions
{
    public static void SetCustomProperty(this IStyle style, string propertyName, Color value)
    {
        // Note: In Unity 6, you can use actual CSS custom properties
        // For now, we apply colors directly
        // This is a placeholder for the actual implementation
    }

    public static void SetCustomProperty(this IStyle style, string propertyName, Length value)
    {
        // Similar placeholder
    }
}
</code></pre>
<h3 id="72-runtime-style-modification">7.2 Runtime Style Modification</h3>
<p><strong>Dynamic Style Controller:</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using UnityEngine.UIElements;

public class DynamicStyleController : MonoBehaviour
{
    [SerializeField] private UIDocument _uiDocument;

    // Runtime style modification examples
    public void SetButtonStyle(Button button, Color backgroundColor, Color textColor)
    {
        button.style.backgroundColor = backgroundColor;
        button.style.color = textColor;
    }

    public void AnimateElementScale(VisualElement element, float targetScale, float duration)
    {
        StartCoroutine(AnimateScaleCoroutine(element, targetScale, duration));
    }

    private System.Collections.IEnumerator AnimateScaleCoroutine(VisualElement element, float targetScale, float duration)
    {
        float startScale = element.resolvedStyle.scale.value.x;
        float elapsedTime = 0f;

        while (elapsedTime &lt; duration)
        {
            elapsedTime += Time.deltaTime;
            float t = elapsedTime / duration;
            float currentScale = Mathf.Lerp(startScale, targetScale, t);

            element.style.scale = new Scale(new Vector3(currentScale, currentScale, 1f));

            yield return null;
        }

        element.style.scale = new Scale(new Vector3(targetScale, targetScale, 1f));
    }

    public void AnimateElementOpacity(VisualElement element, float targetOpacity, float duration)
    {
        StartCoroutine(AnimateOpacityCoroutine(element, targetOpacity, duration));
    }

    private System.Collections.IEnumerator AnimateOpacityCoroutine(VisualElement element, float targetOpacity, float duration)
    {
        float startOpacity = element.resolvedStyle.opacity;
        float elapsedTime = 0f;

        while (elapsedTime &lt; duration)
        {
            elapsedTime += Time.deltaTime;
            float t = elapsedTime / duration;
            float currentOpacity = Mathf.Lerp(startOpacity, targetOpacity, t);

            element.style.opacity = currentOpacity;

            yield return null;
        }

        element.style.opacity = targetOpacity;
    }

    // Color transition
    public void AnimateBackgroundColor(VisualElement element, Color targetColor, float duration)
    {
        StartCoroutine(AnimateColorCoroutine(element, targetColor, duration));
    }

    private System.Collections.IEnumerator AnimateColorCoroutine(VisualElement element, Color targetColor, float duration)
    {
        Color startColor = element.resolvedStyle.backgroundColor;
        float elapsedTime = 0f;

        while (elapsedTime &lt; duration)
        {
            elapsedTime += Time.deltaTime;
            float t = elapsedTime / duration;
            Color currentColor = Color.Lerp(startColor, targetColor, t);

            element.style.backgroundColor = currentColor;

            yield return null;
        }

        element.style.backgroundColor = targetColor;
    }
}
</code></pre>
<h3 id="73-user-customization-system">7.3 User Customization System</h3>
<p><strong>User Preferences:</strong></p>
<pre><code class="language-csharp">using UnityEngine;

[System.Serializable]
public class UserUIPreferences
{
    public string selectedTheme = &quot;Dark&quot;;
    public float uiScale = 1.0f;
    public bool highContrastMode = false;
    public bool reducedMotion = false;
    public string language = &quot;en&quot;;

    public void Save()
    {
        string json = JsonUtility.ToJson(this);
        PlayerPrefs.SetString(&quot;UserUIPreferences&quot;, json);
        PlayerPrefs.Save();
    }

    public static UserUIPreferences Load()
    {
        if (PlayerPrefs.HasKey(&quot;UserUIPreferences&quot;))
        {
            string json = PlayerPrefs.GetString(&quot;UserUIPreferences&quot;);
            return JsonUtility.FromJson&lt;UserUIPreferences&gt;(json);
        }

        return new UserUIPreferences();
    }
}
</code></pre>
<p><strong>Preference Controller:</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using UnityEngine.UIElements;

public class UIPreferenceController : MonoBehaviour
{
    [SerializeField] private UIDocument _uiDocument;

    private UserUIPreferences _preferences;
    private Slider _scaleSlider;
    private Toggle _highContrastToggle;
    private Toggle _reducedMotionToggle;
    private DropdownField _themeDropdown;

    private void OnEnable()
    {
        _preferences = UserUIPreferences.Load();

        var root = _uiDocument.rootVisualElement;

        _scaleSlider = root.Q&lt;Slider&gt;(&quot;UIScaleSlider&quot;);
        _highContrastToggle = root.Q&lt;Toggle&gt;(&quot;HighContrastToggle&quot;);
        _reducedMotionToggle = root.Q&lt;Toggle&gt;(&quot;ReducedMotionToggle&quot;);
        _themeDropdown = root.Q&lt;DropdownField&gt;(&quot;ThemeDropdown&quot;);

        // Initialize with saved preferences
        _scaleSlider.value = _preferences.uiScale;
        _highContrastToggle.value = _preferences.highContrastMode;
        _reducedMotionToggle.value = _preferences.reducedMotion;

        // Register callbacks
        _scaleSlider.RegisterValueChangedCallback(OnScaleChanged);
        _highContrastToggle.RegisterValueChangedCallback(OnHighContrastChanged);
        _reducedMotionToggle.RegisterValueChangedCallback(OnReducedMotionChanged);
        _themeDropdown.RegisterValueChangedCallback(OnThemeChanged);

        // Apply preferences
        ApplyPreferences();
    }

    private void ApplyPreferences()
    {
        // Apply scale
        _uiDocument.rootVisualElement.style.scale = new Scale(new Vector3(
            _preferences.uiScale,
            _preferences.uiScale,
            1f
        ));

        // Apply theme
        ThemeManager.Instance.ApplyThemeByName(_preferences.selectedTheme);

        // Apply high contrast
        if (_preferences.highContrastMode)
        {
            _uiDocument.rootVisualElement.AddToClassList(&quot;high-contrast&quot;);
        }

        // Apply reduced motion
        if (_preferences.reducedMotion)
        {
            _uiDocument.rootVisualElement.AddToClassList(&quot;reduced-motion&quot;);
        }
    }

    private void OnScaleChanged(ChangeEvent&lt;float&gt; evt)
    {
        _preferences.uiScale = evt.newValue;
        _uiDocument.rootVisualElement.style.scale = new Scale(new Vector3(
            evt.newValue,
            evt.newValue,
            1f
        ));
        _preferences.Save();
    }

    private void OnHighContrastChanged(ChangeEvent&lt;bool&gt; evt)
    {
        _preferences.highContrastMode = evt.newValue;

        if (evt.newValue)
        {
            _uiDocument.rootVisualElement.AddToClassList(&quot;high-contrast&quot;);
        }
        else
        {
            _uiDocument.rootVisualElement.RemoveFromClassList(&quot;high-contrast&quot;);
        }

        _preferences.Save();
    }

    private void OnReducedMotionChanged(ChangeEvent&lt;bool&gt; evt)
    {
        _preferences.reducedMotion = evt.newValue;

        if (evt.newValue)
        {
            _uiDocument.rootVisualElement.AddToClassList(&quot;reduced-motion&quot;);
        }
        else
        {
            _uiDocument.rootVisualElement.RemoveFromClassList(&quot;reduced-motion&quot;);
        }

        _preferences.Save();
    }

    private void OnThemeChanged(ChangeEvent&lt;string&gt; evt)
    {
        _preferences.selectedTheme = evt.newValue;
        ThemeManager.Instance.ApplyThemeByName(evt.newValue);
        _preferences.Save();
    }
}
</code></pre>
<p><strong>USS for Accessibility:</strong></p>
<pre><code class="language-css">/* Reduced motion support */
.reduced-motion * {
    transition-duration: 0s !important;
    animation-duration: 0s !important;
}

/* High contrast mode */
.high-contrast .button {
    border-width: 3px;
    border-color: #FFFFFF;
}

.high-contrast .text {
    color: #FFFFFF;
    text-shadow: 1px 1px 2px #000000;
}
</code></pre>
<hr />
<h2 id="8-team-collaboration-patterns">8. Team Collaboration Patterns</h2>
<h3 id="81-component-library-structure">8.1 Component Library Structure</h3>
<p><strong>Shared Component Library:</strong></p>
<pre><code>Assets/UI/Components/
├── Buttons/
│   ├── PrimaryButton.cs
│   ├── SecondaryButton.cs
│   └── IconButton.cs
├── Forms/
│   ├── TextInputField.cs
│   ├── NumberInputField.cs
│   └── DropdownSelector.cs
├── Panels/
│   ├── DialogPanel.cs
│   ├── ModalPanel.cs
│   └── TooltipPanel.cs
└── Lists/
    ├── ScrollableList.cs
    ├── GridList.cs
    └── VirtualizedList.cs
</code></pre>
<p><strong>Base Component Class:</strong></p>
<pre><code class="language-csharp">using UnityEngine.UIElements;

public abstract class UIComponent
{
    protected VisualElement Root { get; private set; }

    public VisualElement Element =&gt; Root;

    protected UIComponent()
    {
        Root = CreateElement();
        InitializeComponent();
    }

    protected abstract VisualElement CreateElement();

    protected virtual void InitializeComponent()
    {
        // Override in derived classes
    }

    public virtual void Dispose()
    {
        // Cleanup
        Root?.RemoveFromHierarchy();
        Root = null;
    }
}
</code></pre>
<p><strong>Example Component:</strong></p>
<pre><code class="language-csharp">using UnityEngine.UIElements;

public class PrimaryButton : UIComponent
{
    private Button _button;

    public event System.Action Clicked;

    public string Text
    {
        get =&gt; _button.text;
        set =&gt; _button.text = value;
    }

    protected override VisualElement CreateElement()
    {
        _button = new Button();
        _button.AddToClassList(&quot;btn&quot;);
        _button.AddToClassList(&quot;btn-primary&quot;);

        return _button;
    }

    protected override void InitializeComponent()
    {
        _button.clicked += OnButtonClicked;
    }

    private void OnButtonClicked()
    {
        Clicked?.Invoke();
    }

    public override void Dispose()
    {
        _button.clicked -= OnButtonClicked;
        base.Dispose();
    }
}

// Usage:
var playButton = new PrimaryButton();
playButton.Text = &quot;Play Game&quot;;
playButton.Clicked += OnPlayClicked;
root.Add(playButton.Element);
</code></pre>
<h3 id="82-style-guide-documentation">8.2 Style Guide &amp; Documentation</h3>
<p><strong>Component Documentation Template:</strong></p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// A reusable dialog panel component.
/// &lt;/summary&gt;
/// &lt;example&gt;
/// var dialog = new DialogPanel(&quot;Confirm Action&quot;, &quot;Are you sure?&quot;);
/// dialog.AddButton(&quot;Yes&quot;, OnConfirm);
/// dialog.AddButton(&quot;No&quot;, OnCancel);
/// dialog.Show();
/// &lt;/example&gt;
public class DialogPanel : UIComponent
{
    // Implementation...
}
</code></pre>
<p><strong>README for Component Library:</strong></p>
<pre><code class="language-markdown"># UI Component Library

## Installation
1. Import package via Package Manager
2. Add stylesheet to your UIDocument: `Assets/UI/Styles/ComponentLibrary.uss`

## Usage

### Buttons

#### Primary Button
```csharp
var button = new PrimaryButton();
button.Text = &quot;Click Me&quot;;
button.Clicked += () =&gt; Debug.Log(&quot;Clicked!&quot;);
</code></pre>
<h4 id="icon-button">Icon Button</h4>
<pre><code class="language-csharp">var iconButton = new IconButton(myIconSprite);
iconButton.Clicked += OnIconClicked;
</code></pre>
<h3 id="forms">Forms</h3>
<h4 id="text-input">Text Input</h4>
<pre><code class="language-csharp">var textInput = new TextInputField(&quot;Username&quot;);
textInput.ValueChanged += OnUsernameChanged;
</code></pre>
<h2 id="styling">Styling</h2>
<p>All components use BEM naming convention:
- <code>.component-name</code> - Block
- <code>.component-name__element</code> - Element
- <code>.component-name--modifier</code> - Modifier</p>
<h2 id="theme-support">Theme Support</h2>
<p>Components automatically adapt to the active theme. Use ThemeManager to switch themes:</p>
<pre><code class="language-csharp">ThemeManager.Instance.ApplyTheme(&quot;Dark&quot;);
</code></pre>
<pre><code>
### 8.3 Version Control Best Practices

**Directory Structure for Teams:**
</code></pre>
<p>Assets/
├── UI/
│   ├── Common/              # Shared by all devs (review required)
│   │   ├── Components/
│   │   ├── Styles/
│   │   └── Templates/
│   │
│   ├── Features/            # Feature-specific UI
│   │   ├── MainMenu/        # Developer A
│   │   ├── Gameplay/        # Developer B
│   │   └── Settings/        # Developer C
│   │
│   └── Prototypes/          # Experimental (excluded from builds)
│       └── NewFeature/</p>
<pre><code>
**.gitignore for UI Toolkit:**
</code></pre>
<h1 id="temporary-ui-files">Temporary UI files</h1>
<p><em>.meta~
</em>.uxml~
*.uss~</p>
<h1 id="build-artifacts">Build artifacts</h1>
<p>/Assets/UI/Generated/</p>
<h1 id="personal-prototypes">Personal prototypes</h1>
<p>/Assets/UI/Prototypes/</p>
<pre><code>
**USS Merge Strategy:**
```css
/* ===== CORE STYLES - DO NOT MODIFY WITHOUT TEAM REVIEW ===== */
/* Owner: Tech Lead */
/* Last Updated: 2024-01-15 */

:root {
    --primary-color: #8A2BE2;
    /* ... */
}

/* ===== FEATURE: MAIN MENU ===== */
/* Owner: Developer A */
/* Last Updated: 2024-01-20 */

.main-menu-container {
    /* ... */
}

/* ===== FEATURE: GAMEPLAY HUD ===== */
/* Owner: Developer B */
/* Last Updated: 2024-01-18 */

.hud-container {
    /* ... */
}
</code></pre>
<h3 id="84-code-review-checklist">8.4 Code Review Checklist</h3>
<p><strong>UI Code Review Checklist:</strong></p>
<pre><code class="language-markdown"># UI Code Review Checklist

## Architecture
- [ ] Proper separation of concerns (View/ViewModel/Model)
- [ ] No business logic in views
- [ ] Interfaces used for dependencies
- [ ] Component is reusable

## Code Quality
- [ ] Follows team naming conventions
- [ ] Properly documented with XML comments
- [ ] No magic numbers (use constants)
- [ ] Memory leaks prevented (event unsubscription)

## Performance
- [ ] No expensive operations in Update/OnGUI
- [ ] UI elements pooled if created dynamically
- [ ] Bindings use efficient change detection
- [ ] No unnecessary rebuilds

## Styling
- [ ] Uses theme variables (not hardcoded colors)
- [ ] Follows BEM naming convention
- [ ] Responsive to different screen sizes
- [ ] Accessibility considered

## Testing
- [ ] Unit tests for ViewModel logic
- [ ] Manual testing on target platforms
- [ ] Works with all supported themes
</code></pre>
<hr />
<h2 id="9-testing-strategies">9. Testing Strategies</h2>
<h3 id="91-unit-testing-viewmodels">9.1 Unit Testing ViewModels</h3>
<p><strong>ViewModel Test:</strong></p>
<pre><code class="language-csharp">using NUnit.Framework;

public class PlayerViewModelTests
{
    private PlayerViewModel _viewModel;
    private PlayerModel _model;

    [SetUp]
    public void SetUp()
    {
        _model = new PlayerModel
        {
            Name = &quot;TestPlayer&quot;,
            Health = 100,
            MaxHealth = 100
        };

        _viewModel = new PlayerViewModel(_model);
    }

    [Test]
    public void TakeDamage_ReducesHealth()
    {
        // Arrange
        int damage = 25;

        // Act
        _viewModel.TakeDamage(damage);

        // Assert
        Assert.AreEqual(75, _viewModel.Health.Value);
    }

    [Test]
    public void TakeDamage_DoesNotGoBelowZero()
    {
        // Arrange
        int damage = 150;

        // Act
        _viewModel.TakeDamage(damage);

        // Assert
        Assert.AreEqual(0, _viewModel.Health.Value);
    }

    [Test]
    public void HealthPercentage_UpdatesWhenHealthChanges()
    {
        // Arrange
        float? capturedPercentage = null;
        _viewModel.HealthPercentage.ValueChanged += p =&gt; capturedPercentage = p;

        // Act
        _viewModel.TakeDamage(50);

        // Assert
        Assert.AreEqual(0.5f, capturedPercentage);
    }

    [Test]
    public void Heal_IncreasesHealth()
    {
        // Arrange
        _viewModel.TakeDamage(50);

        // Act
        _viewModel.Heal(25);

        // Assert
        Assert.AreEqual(75, _viewModel.Health.Value);
    }

    [Test]
    public void Heal_DoesNotExceedMaxHealth()
    {
        // Arrange
        _viewModel.TakeDamage(10);

        // Act
        _viewModel.Heal(50);

        // Assert
        Assert.AreEqual(100, _viewModel.Health.Value);
    }
}
</code></pre>
<h3 id="92-integration-testing">9.2 Integration Testing</h3>
<p><strong>View Integration Test:</strong></p>
<pre><code class="language-csharp">using NUnit.Framework;
using UnityEngine;
using UnityEngine.UIElements;
using UnityEngine.TestTools;
using System.Collections;

public class PlayerHUDViewIntegrationTests
{
    private GameObject _testObject;
    private PlayerHUDView _view;
    private PlayerViewModel _viewModel;

    [UnitySetUp]
    public IEnumerator SetUp()
    {
        // Create test GameObject
        _testObject = new GameObject(&quot;TestHUD&quot;);

        // Add UIDocument component
        var uiDocument = _testObject.AddComponent&lt;UIDocument&gt;();

        // Load test UXML
        var visualTree = Resources.Load&lt;VisualTreeAsset&gt;(&quot;UI/Tests/PlayerHUDTest&quot;);
        uiDocument.visualTreeAsset = visualTree;

        // Add view component
        _view = _testObject.AddComponent&lt;PlayerHUDView&gt;();

        // Create ViewModel
        var model = new PlayerModel { Health = 100, MaxHealth = 100 };
        _viewModel = new PlayerViewModel(model);

        // Initialize
        _view.Initialize(_viewModel);

        yield return null; // Wait for UI to build
    }

    [UnityTearDown]
    public IEnumerator TearDown()
    {
        Object.Destroy(_testObject);
        yield return null;
    }

    [UnityTest]
    public IEnumerator HealthLabel_UpdatesWhenHealthChanges()
    {
        // Act
        _viewModel.TakeDamage(25);

        yield return null; // Wait for UI update

        // Assert
        var healthLabel = _view.GetComponent&lt;UIDocument&gt;()
            .rootVisualElement.Q&lt;Label&gt;(&quot;HealthValue&quot;);

        Assert.AreEqual(&quot;75/100&quot;, healthLabel.text);
    }

    [UnityTest]
    public IEnumerator HealthBar_UpdatesWhenHealthChanges()
    {
        // Act
        _viewModel.TakeDamage(50);

        yield return null;

        // Assert
        var healthBar = _view.GetComponent&lt;UIDocument&gt;()
            .rootVisualElement.Q&lt;ProgressBar&gt;(&quot;HealthBar&quot;);

        Assert.AreEqual(50f, healthBar.value);
    }
}
</code></pre>
<h3 id="93-ui-automation-testing">9.3 UI Automation Testing</h3>
<p><strong>Automated UI Test Helper:</strong></p>
<pre><code class="language-csharp">using UnityEngine.UIElements;

public static class UITestHelper
{
    public static void ClickButton(VisualElement root, string buttonName)
    {
        var button = root.Q&lt;Button&gt;(buttonName);
        if (button == null)
        {
            throw new System.Exception($&quot;Button '{buttonName}' not found!&quot;);
        }

        // Simulate click
        using (var evt = ClickEvent.GetPooled())
        {
            evt.target = button;
            button.SendEvent(evt);
        }
    }

    public static void SetTextFieldValue(VisualElement root, string fieldName, string value)
    {
        var field = root.Q&lt;TextField&gt;(fieldName);
        if (field == null)
        {
            throw new System.Exception($&quot;TextField '{fieldName}' not found!&quot;);
        }

        field.value = value;
    }

    public static string GetLabelText(VisualElement root, string labelName)
    {
        var label = root.Q&lt;Label&gt;(labelName);
        if (label == null)
        {
            throw new System.Exception($&quot;Label '{labelName}' not found!&quot;);
        }

        return label.text;
    }

    public static bool IsElementVisible(VisualElement root, string elementName)
    {
        var element = root.Q(elementName);
        if (element == null)
        {
            return false;
        }

        return element.resolvedStyle.display != DisplayStyle.None 
            &amp;&amp; element.resolvedStyle.opacity &gt; 0;
    }
}
</code></pre>
<hr />
<h2 id="10-performance-scalability">10. Performance &amp; Scalability</h2>
<h3 id="101-virtual-scrolling-list-virtualization">10.1 Virtual Scrolling / List Virtualization</h3>
<p><strong>Virtualized List Implementation:</strong></p>
<pre><code class="language-csharp">using UnityEngine.UIElements;
using System.Collections.Generic;

public class VirtualizedListView&lt;TData&gt; where TData : class
{
    private ListView _listView;
    private List&lt;TData&gt; _items;
    private System.Func&lt;TData, VisualElement&gt; _makeItem;
    private System.Action&lt;VisualElement, TData&gt; _bindItem;

    public VirtualizedListView(
        ListView listView,
        System.Func&lt;TData, VisualElement&gt; makeItem,
        System.Action&lt;VisualElement, TData&gt; bindItem)
    {
        _listView = listView;
        _makeItem = makeItem;
        _bindItem = bindItem;
        _items = new List&lt;TData&gt;();

        SetupListView();
    }

    private void SetupListView()
    {
        _listView.makeItem = () =&gt; _makeItem(default);
        _listView.bindItem = (element, index) =&gt;
        {
            if (index &lt; _items.Count)
            {
                _bindItem(element, _items[index]);
            }
        };

        _listView.fixedItemHeight = 50; // Set appropriate height
        _listView.virtualizationMethod = CollectionVirtualizationMethod.FixedHeight;
    }

    public void SetItems(List&lt;TData&gt; items)
    {
        _items = items;
        _listView.itemsSource = _items;
        _listView.Rebuild();
    }

    public void AddItem(TData item)
    {
        _items.Add(item);
        _listView.RefreshItems();
    }

    public void RemoveItem(TData item)
    {
        _items.Remove(item);
        _listView.RefreshItems();
    }

    public void Clear()
    {
        _items.Clear();
        _listView.RefreshItems();
    }
}

// Usage:
var listView = root.Q&lt;ListView&gt;(&quot;ItemList&quot;);

var virtualizedList = new VirtualizedListView&lt;InventoryItemData&gt;(
    listView,
    makeItem: (data) =&gt;
    {
        var container = new VisualElement();
        container.AddToClassList(&quot;list-item&quot;);

        var icon = new VisualElement();
        icon.AddToClassList(&quot;item-icon&quot;);

        var label = new Label();
        label.AddToClassList(&quot;item-label&quot;);

        container.Add(icon);
        container.Add(label);

        return container;
    },
    bindItem: (element, data) =&gt;
    {
        var icon = element.Q&lt;VisualElement&gt;(&quot;item-icon&quot;);
        var label = element.Q&lt;Label&gt;(&quot;item-label&quot;);

        icon.style.backgroundImage = new StyleBackground(data.Icon);
        label.text = data.Name;
    }
);

virtualizedList.SetItems(inventoryItems);
</code></pre>
<h3 id="102-lazy-loading">10.2 Lazy Loading</h3>
<p><strong>Lazy Loading Pattern:</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using UnityEngine.UIElements;
using System.Collections;
using System.Collections.Generic;

public class LazyLoadController : MonoBehaviour
{
    [SerializeField] private UIDocument _uiDocument;
    [SerializeField] private int _itemsPerPage = 20;

    private ScrollView _scrollView;
    private VisualElement _contentContainer;
    private List&lt;ItemData&gt; _allItems;
    private int _currentPage = 0;
    private bool _isLoading = false;

    private void OnEnable()
    {
        var root = _uiDocument.rootVisualElement;
        _scrollView = root.Q&lt;ScrollView&gt;(&quot;ItemScrollView&quot;);
        _contentContainer = root.Q&lt;VisualElement&gt;(&quot;ItemContainer&quot;);

        // Register scroll event
        _scrollView.verticalScroller.valueChanged += OnScrollChanged;

        // Load initial data
        LoadPage(0);
    }

    private void OnScrollChanged(float scrollPosition)
    {
        // Check if scrolled near bottom
        float scrollableHeight = _scrollView.contentContainer.layout.height - _scrollView.layout.height;
        float scrollPercentage = scrollPosition / scrollableHeight;

        if (scrollPercentage &gt; 0.8f &amp;&amp; !_isLoading)
        {
            LoadNextPage();
        }
    }

    private void LoadNextPage()
    {
        _currentPage++;
        LoadPage(_currentPage);
    }

    private void LoadPage(int pageIndex)
    {
        if (_isLoading) return;

        _isLoading = true;
        StartCoroutine(LoadPageCoroutine(pageIndex));
    }

    private IEnumerator LoadPageCoroutine(int pageIndex)
    {
        // Simulate network delay
        yield return new WaitForSeconds(0.5f);

        int startIndex = pageIndex * _itemsPerPage;
        int endIndex = Mathf.Min(startIndex + _itemsPerPage, _allItems.Count);

        for (int i = startIndex; i &lt; endIndex; i++)
        {
            var itemElement = CreateItemElement(_allItems[i]);
            _contentContainer.Add(itemElement);

            // Yield periodically to prevent frame drops
            if (i % 5 == 0)
            {
                yield return null;
            }
        }

        _isLoading = false;
    }

    private VisualElement CreateItemElement(ItemData data)
    {
        // Create and return item element
        return new VisualElement();
    }
}
</code></pre>
<h3 id="103-memory-management">10.3 Memory Management</h3>
<p><strong>UI Element Pool:</strong></p>
<pre><code class="language-csharp">using UnityEngine.UIElements;
using System.Collections.Generic;

public class UIElementPool&lt;T&gt; where T : VisualElement, new()
{
    private Stack&lt;T&gt; _pool = new Stack&lt;T&gt;();
    private HashSet&lt;T&gt; _activeElements = new HashSet&lt;T&gt;();
    private VisualElement _container;
    private int _maxPoolSize;

    public UIElementPool(VisualElement container, int initialSize = 10, int maxSize = 100)
    {
        _container = container;
        _maxPoolSize = maxSize;

        // Pre-populate pool
        for (int i = 0; i &lt; initialSize; i++)
        {
            var element = CreateNewElement();
            element.style.display = DisplayStyle.None;
            _pool.Push(element);
        }
    }

    private T CreateNewElement()
    {
        var element = new T();
        _container.Add(element);
        return element;
    }

    public T Get()
    {
        T element;

        if (_pool.Count &gt; 0)
        {
            element = _pool.Pop();
        }
        else
        {
            element = CreateNewElement();
        }

        element.style.display = DisplayStyle.Flex;
        _activeElements.Add(element);

        return element;
    }

    public void Return(T element)
    {
        if (!_activeElements.Contains(element))
        {
            return; // Element not from this pool
        }

        element.style.display = DisplayStyle.None;
        _activeElements.Remove(element);

        // Only return to pool if under max size
        if (_pool.Count &lt; _maxPoolSize)
        {
            _pool.Push(element);
        }
        else
        {
            // Remove from hierarchy to free memory
            element.RemoveFromHierarchy();
        }
    }

    public void ReturnAll()
    {
        foreach (var element in _activeElements)
        {
            element.style.display = DisplayStyle.None;

            if (_pool.Count &lt; _maxPoolSize)
            {
                _pool.Push(element);
            }
            else
            {
                element.RemoveFromHierarchy();
            }
        }

        _activeElements.Clear();
    }

    public void Clear()
    {
        ReturnAll();

        while (_pool.Count &gt; 0)
        {
            var element = _pool.Pop();
            element.RemoveFromHierarchy();
        }
    }
}
</code></pre>
<hr />
<h2 id="11-production-patterns">11. Production Patterns</h2>
<h3 id="111-dependency-injection">11.1 Dependency Injection</h3>
<p><strong>Simple Service Locator:</strong></p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;

public class ServiceLocator
{
    private static ServiceLocator _instance;
    public static ServiceLocator Instance =&gt; _instance ?? (_instance = new ServiceLocator());

    private Dictionary&lt;Type, object&gt; _services = new Dictionary&lt;Type, object&gt;();

    public void Register&lt;T&gt;(T service)
    {
        var type = typeof(T);

        if (_services.ContainsKey(type))
        {
            _services[type] = service;
        }
        else
        {
            _services.Add(type, service);
        }
    }

    public T Get&lt;T&gt;()
    {
        var type = typeof(T);

        if (_services.TryGetValue(type, out var service))
        {
            return (T)service;
        }

        throw new Exception($&quot;Service of type {type} not registered!&quot;);
    }

    public bool TryGet&lt;T&gt;(out T service)
    {
        var type = typeof(T);

        if (_services.TryGetValue(type, out var obj))
        {
            service = (T)obj;
            return true;
        }

        service = default;
        return false;
    }

    public void Clear()
    {
        _services.Clear();
    }
}

// Usage:
public class GameBootstrap : MonoBehaviour
{
    private void Awake()
    {
        // Register services
        ServiceLocator.Instance.Register&lt;IAudioService&gt;(new AudioService());
        ServiceLocator.Instance.Register&lt;ISceneLoader&gt;(new SceneLoader());
        ServiceLocator.Instance.Register&lt;IPlayerData&gt;(new PlayerData());
    }
}

public class MainMenuController : MonoBehaviour
{
    private IAudioService _audioService;
    private ISceneLoader _sceneLoader;

    private void Awake()
    {
        // Resolve dependencies
        _audioService = ServiceLocator.Instance.Get&lt;IAudioService&gt;();
        _sceneLoader = ServiceLocator.Instance.Get&lt;ISceneLoader&gt;();
    }
}
</code></pre>
<h3 id="112-event-bus-pattern">11.2 Event Bus Pattern</h3>
<p><strong>Global Event Bus:</strong></p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;

public class EventBus
{
    private static EventBus _instance;
    public static EventBus Instance =&gt; _instance ?? (_instance = new EventBus());

    private Dictionary&lt;Type, Delegate&gt; _eventHandlers = new Dictionary&lt;Type, Delegate&gt;();

    public void Subscribe&lt;T&gt;(Action&lt;T&gt; handler)
    {
        var eventType = typeof(T);

        if (_eventHandlers.TryGetValue(eventType, out var existingHandler))
        {
            _eventHandlers[eventType] = Delegate.Combine(existingHandler, handler);
        }
        else
        {
            _eventHandlers[eventType] = handler;
        }
    }

    public void Unsubscribe&lt;T&gt;(Action&lt;T&gt; handler)
    {
        var eventType = typeof(T);

        if (_eventHandlers.TryGetValue(eventType, out var existingHandler))
        {
            var newHandler = Delegate.Remove(existingHandler, handler);

            if (newHandler == null)
            {
                _eventHandlers.Remove(eventType);
            }
            else
            {
                _eventHandlers[eventType] = newHandler;
            }
        }
    }

    public void Publish&lt;T&gt;(T eventData)
    {
        var eventType = typeof(T);

        if (_eventHandlers.TryGetValue(eventType, out var handler))
        {
            (handler as Action&lt;T&gt;)?.Invoke(eventData);
        }
    }

    public void Clear()
    {
        _eventHandlers.Clear();
    }
}

// Event definitions
public class PlayerHealthChangedEvent
{
    public int NewHealth { get; set; }
    public int MaxHealth { get; set; }
}

public class ScoreUpdatedEvent
{
    public int NewScore { get; set; }
}

// Usage:
public class PlayerController : MonoBehaviour
{
    private void TakeDamage(int damage)
    {
        health -= damage;

        // Publish event
        EventBus.Instance.Publish(new PlayerHealthChangedEvent
        {
            NewHealth = health,
            MaxHealth = maxHealth
        });
    }
}

public class HUDController : MonoBehaviour
{
    private void OnEnable()
    {
        // Subscribe to events
        EventBus.Instance.Subscribe&lt;PlayerHealthChangedEvent&gt;(OnHealthChanged);
        EventBus.Instance.Subscribe&lt;ScoreUpdatedEvent&gt;(OnScoreUpdated);
    }

    private void OnDisable()
    {
        // Unsubscribe
        EventBus.Instance.Unsubscribe&lt;PlayerHealthChangedEvent&gt;(OnHealthChanged);
        EventBus.Instance.Unsubscribe&lt;ScoreUpdatedEvent&gt;(OnScoreUpdated);
    }

    private void OnHealthChanged(PlayerHealthChangedEvent evt)
    {
        UpdateHealthDisplay(evt.NewHealth, evt.MaxHealth);
    }

    private void OnScoreUpdated(ScoreUpdatedEvent evt)
    {
        UpdateScoreDisplay(evt.NewScore);
    }
}
</code></pre>
<h3 id="113-localization-system">11.3 Localization System</h3>
<p><strong>Localization Manager:</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using System.Collections.Generic;

public class LocalizationManager : MonoBehaviour
{
    private static LocalizationManager _instance;
    public static LocalizationManager Instance =&gt; _instance;

    [SerializeField] private SystemLanguage _currentLanguage = SystemLanguage.English;

    private Dictionary&lt;string, Dictionary&lt;SystemLanguage, string&gt;&gt; _localizedStrings 
        = new Dictionary&lt;string, Dictionary&lt;SystemLanguage, string&gt;&gt;();

    public event System.Action&lt;SystemLanguage&gt; LanguageChanged;

    public SystemLanguage CurrentLanguage =&gt; _currentLanguage;

    private void Awake()
    {
        if (_instance != null &amp;&amp; _instance != this)
        {
            Destroy(gameObject);
            return;
        }

        _instance = this;
        DontDestroyOnLoad(gameObject);

        LoadLocalizations();
    }

    private void LoadLocalizations()
    {
        // Load from JSON, CSV, or ScriptableObjects
        // Example structure:
        var locData = new Dictionary&lt;string, Dictionary&lt;SystemLanguage, string&gt;&gt;
        {
            [&quot;menu.play&quot;] = new Dictionary&lt;SystemLanguage, string&gt;
            {
                [SystemLanguage.English] = &quot;Play&quot;,
                [SystemLanguage.Spanish] = &quot;Jugar&quot;,
                [SystemLanguage.French] = &quot;Jouer&quot;
            },
            [&quot;menu.settings&quot;] = new Dictionary&lt;SystemLanguage, string&gt;
            {
                [SystemLanguage.English] = &quot;Settings&quot;,
                [SystemLanguage.Spanish] = &quot;Ajustes&quot;,
                [SystemLanguage.French] = &quot;Paramètres&quot;
            }
        };

        _localizedStrings = locData;
    }

    public string GetString(string key)
    {
        if (_localizedStrings.TryGetValue(key, out var translations))
        {
            if (translations.TryGetValue(_currentLanguage, out var translation))
            {
                return translation;
            }

            // Fallback to English
            if (translations.TryGetValue(SystemLanguage.English, out var fallback))
            {
                return fallback;
            }
        }

        return $&quot;[{key}]&quot;; // Return key if not found
    }

    public void SetLanguage(SystemLanguage language)
    {
        if (_currentLanguage != language)
        {
            _currentLanguage = language;
            LanguageChanged?.Invoke(_currentLanguage);
        }
    }
}
</code></pre>
<p><strong>Localized Label Component:</strong></p>
<pre><code class="language-csharp">using UnityEngine;
using UnityEngine.UIElements;

public class LocalizedLabel : MonoBehaviour
{
    [SerializeField] private UIDocument _uiDocument;
    [SerializeField] private string _labelName;
    [SerializeField] private string _localizationKey;

    private Label _label;

    private void OnEnable()
    {
        _label = _uiDocument.rootVisualElement.Q&lt;Label&gt;(_labelName);

        // Subscribe to language changes
        LocalizationManager.Instance.LanguageChanged += OnLanguageChanged;

        // Set initial text
        UpdateText();
    }

    private void OnDisable()
    {
        LocalizationManager.Instance.LanguageChanged -= OnLanguageChanged;
    }

    private void OnLanguageChanged(SystemLanguage newLanguage)
    {
        UpdateText();
    }

    private void UpdateText()
    {
        if (_label != null)
        {
            _label.text = LocalizationManager.Instance.GetString(_localizationKey);
        }
    }
}
</code></pre>
<hr />
<h2 id="summary-industry-best-practices">Summary: Industry Best Practices</h2>
<h3 id="key-takeaways">Key Takeaways</h3>
<ol>
<li><strong>Architecture</strong>: Use MVVM for UI Toolkit projects</li>
<li><strong>Code-First</strong>: Generate UI programmatically with factory patterns</li>
<li><strong>Separation</strong>: Keep logic in ViewModels, visuals in UXML/USS</li>
<li><strong>Data Binding</strong>: Use Unity 6 native binding or observable patterns</li>
<li><strong>Team Workflow</strong>: Component libraries + style guides</li>
<li><strong>Performance</strong>: Virtualization, pooling, lazy loading</li>
<li><strong>Testing</strong>: Unit test ViewModels, integration test views</li>
<li><strong>Production</strong>: DI, event bus, localization</li>
</ol>
<h3 id="comparison-your-past-approach-vs-industry-standard">Comparison: Your Past Approach vs. Industry Standard</h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Factory-View-Host-Controller</th>
<th>Industry MVVM Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Scalability</strong></td>
<td>Good for small teams</td>
<td>Excellent for large teams</td>
</tr>
<tr>
<td><strong>Testability</strong></td>
<td>Moderate</td>
<td>High (ViewModels easily tested)</td>
</tr>
<tr>
<td><strong>Designer Collaboration</strong></td>
<td>Limited</td>
<td>Excellent (UXML/USS separation)</td>
</tr>
<tr>
<td><strong>Code Reusability</strong></td>
<td>Component-based</td>
<td>Component + data binding</td>
</tr>
<tr>
<td><strong>Learning Curve</strong></td>
<td>Low</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>Unity 6 Features</strong></td>
<td>Limited use</td>
<td>Full data binding support</td>
</tr>
</tbody>
</table>
<h3 id="recommended-transition-path">Recommended Transition Path</h3>
<p><strong>Phase 1</strong>: Introduce ViewModels
- Keep your factory pattern
- Add ViewModel layer between controllers and views
- Start using observable properties</p>
<p><strong>Phase 2</strong>: Adopt Data Binding
- Convert to UXML templates for structure
- Use USS for all styling
- Implement Unity 6 native binding</p>
<p><strong>Phase 3</strong>: Full MVVM
- Refactor controllers to presenters
- Component library for team
- Automated testing</p>
<hr />
<p><em>This document provides production-ready patterns for scaling UI Toolkit projects across teams while maintaining code quality and performance.</em></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.top", "navigation.tracking", "navigation.sections", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>