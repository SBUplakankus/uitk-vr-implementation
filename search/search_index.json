{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"ai/bg_analysis/","title":"Unity Bagel Game - Complete UI Toolkit Analysis","text":"<p>Project: Unity BagelGame Sample (Unity 6.3 LTS) Repository: Unity-Technologies/BagelGame Purpose: Full vertical game demonstrating UI Toolkit for 3D games</p>"},{"location":"ai/bg_analysis/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Project Overview</li> <li>UI Toolkit Architecture</li> <li>Data Binding System</li> <li>Shader Graph Integration</li> <li>World Space UI</li> <li>Theme System</li> <li>Input System Integration</li> <li>Performance Patterns</li> <li>Code Examples</li> <li>Quest 2 VR Adaptation</li> </ol>"},{"location":"ai/bg_analysis/#1-project-overview","title":"1. Project Overview","text":""},{"location":"ai/bg_analysis/#what-bagel-game-demonstrates","title":"What Bagel Game Demonstrates","text":"<p>Core Features: - World Space UI: UI canvases positioned in 3D game space - Custom Shaders: Shader Graph integration with UI Toolkit - Data Bindings: Runtime data synchronization (Unity 6 feature) - StyleSheets (USS): Dynamic theming and styling - Input System: New Input System integration - UXML Templates: Reusable UI component templates</p> <p>Game Concept: Physics-based bagel navigation game where UI is integrated into the 3D world rather than overlaid on screen.</p>"},{"location":"ai/bg_analysis/#technology-stack","title":"Technology Stack","text":"<pre><code>UI Rendering:\n\u251c\u2500\u2500 UI Toolkit (Runtime)\n\u2502   \u251c\u2500\u2500 UXML (Structure)\n\u2502   \u251c\u2500\u2500 USS (Styling)\n\u2502   \u2514\u2500\u2500 C# (Logic)\n\u251c\u2500\u2500 Shader Graph (Visual Effects)\n\u2514\u2500\u2500 Unity Input System (Control)\n</code></pre>"},{"location":"ai/bg_analysis/#2-ui-toolkit-architecture","title":"2. UI Toolkit Architecture","text":""},{"location":"ai/bg_analysis/#21-document-structure-uxml","title":"2.1 Document Structure (UXML)","text":"<p>UI Toolkit uses UXML (Unity XML) for declarative UI structure, similar to HTML.</p> <p>Example: Main Menu Structure</p> <pre><code>&lt;ui:UXML xmlns:ui=\"UnityEngine.UIElements\" \n         xmlns:uie=\"UnityEditor.UIElements\"&gt;\n\n    &lt;!-- Root container --&gt;\n    &lt;ui:VisualElement name=\"MainMenu\" class=\"menu-root\"&gt;\n\n        &lt;!-- Header section --&gt;\n        &lt;ui:VisualElement name=\"Header\" class=\"menu-header\"&gt;\n            &lt;ui:Label text=\"BAGEL GAME\" class=\"title-text\" /&gt;\n        &lt;/ui:VisualElement&gt;\n\n        &lt;!-- Button container --&gt;\n        &lt;ui:VisualElement name=\"ButtonContainer\" class=\"button-group\"&gt;\n            &lt;ui:Button name=\"PlayButton\" text=\"Play\" class=\"menu-button\" /&gt;\n            &lt;ui:Button name=\"SettingsButton\" text=\"Settings\" class=\"menu-button\" /&gt;\n            &lt;ui:Button name=\"QuitButton\" text=\"Quit\" class=\"menu-button\" /&gt;\n        &lt;/ui:VisualElement&gt;\n\n        &lt;!-- Game stats display --&gt;\n        &lt;ui:VisualElement name=\"StatsPanel\" class=\"stats-panel\"&gt;\n            &lt;ui:Label name=\"ScoreLabel\" binding-path=\"CurrentScore\" class=\"stat-value\" /&gt;\n            &lt;ui:Label name=\"ToppingsLabel\" binding-path=\"ToppingsRemaining\" class=\"stat-value\" /&gt;\n        &lt;/ui:VisualElement&gt;\n\n    &lt;/ui:VisualElement&gt;\n&lt;/ui:UXML&gt;\n</code></pre> <p>Key UXML Concepts: - <code>class</code> attribute links to USS styles - <code>binding-path</code> enables data binding - <code>name</code> provides C# script access - Nested hierarchy creates parent-child relationships</p>"},{"location":"ai/bg_analysis/#22-stylesheet-system-uss","title":"2.2 Stylesheet System (USS)","text":"<p>USS is Unity's CSS-like styling language for UI Toolkit.</p> <p>Example: Premium Modern Styling</p> <pre><code>/* ===== ROOT VARIABLES (THEMING) ===== */\n:root {\n    /* Color palette */\n    --primary-color: rgb(138, 43, 226);\n    --secondary-color: rgb(0, 217, 255);\n    --bg-dark: rgb(10, 10, 15);\n    --bg-mid: rgb(20, 20, 30);\n\n    /* Gradient colors */\n    --glow-purple: rgba(138, 43, 226, 0.4);\n    --glow-cyan: rgba(0, 217, 255, 0.3);\n    --glow-pink: rgba(255, 71, 133, 0.25);\n\n    /* Spacing */\n    --spacing-small: 8px;\n    --spacing-medium: 16px;\n    --spacing-large: 32px;\n\n    /* Animation */\n    --transition-speed: 0.3s;\n}\n\n/* ===== LAYOUT CONTAINERS ===== */\n.menu-root {\n    flex-grow: 1;\n    background-image: \n        radial-gradient(circle at 20% 30%, var(--glow-purple) 0%, transparent 50%),\n        radial-gradient(circle at 80% 70%, var(--glow-cyan) 0%, transparent 50%),\n        radial-gradient(ellipse at 50% 100%, var(--bg-mid) 0%, var(--bg-dark) 100%);\n    padding: var(--spacing-large);\n}\n\n.menu-header {\n    align-items: center;\n    justify-content: center;\n    margin-bottom: var(--spacing-large);\n}\n\n/* ===== TEXT STYLES ===== */\n.title-text {\n    font-size: 72px;\n    color: rgb(255, 255, 255);\n    -unity-font-style: bold;\n    text-shadow: 0px 4px 20px var(--glow-cyan);\n    -unity-text-align: middle-center;\n}\n\n.stat-value {\n    font-size: 24px;\n    color: var(--secondary-color);\n    -unity-font-style: bold;\n}\n\n/* ===== BUTTON STYLES ===== */\n.menu-button {\n    min-width: 200px;\n    min-height: 60px;\n    margin: var(--spacing-small);\n\n    /* Modern glass morphism effect */\n    background-color: rgba(255, 255, 255, 0.05);\n    border-width: 2px;\n    border-color: rgba(255, 255, 255, 0.1);\n    border-radius: 12px;\n\n    /* Text styling */\n    font-size: 20px;\n    color: rgb(255, 255, 255);\n    -unity-font-style: bold;\n\n    /* Transition */\n    transition-property: background-color, border-color, scale;\n    transition-duration: var(--transition-speed);\n}\n\n/* Button hover state */\n.menu-button:hover {\n    background-color: rgba(255, 255, 255, 0.12);\n    border-color: var(--secondary-color);\n    scale: 1.05;\n}\n\n/* Button active/pressed state */\n.menu-button:active {\n    background-color: rgba(0, 217, 255, 0.2);\n    scale: 0.98;\n}\n\n/* ===== STATS PANEL ===== */\n.stats-panel {\n    flex-direction: row;\n    justify-content: space-between;\n    padding: var(--spacing-medium);\n\n    background-image: radial-gradient(\n        circle at 50% 50%, \n        rgba(255, 255, 255, 0.08), \n        transparent\n    );\n    border-radius: 16px;\n    border-width: 1px;\n    border-color: rgba(255, 255, 255, 0.1);\n}\n</code></pre> <p>USS Features Used: - CSS variables (<code>:root</code>) - Radial gradients for modern web aesthetic - Flexbox layout (<code>flex-direction</code>, <code>justify-content</code>) - Pseudo-classes (<code>:hover</code>, <code>:active</code>) - Transitions for smooth animations - Border radius for rounded corners</p>"},{"location":"ai/bg_analysis/#23-c-document-controller","title":"2.3 C# Document Controller","text":"<p>Example: MenuController.cs</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class MenuController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n\n    // Root visual element\n    private VisualElement _root;\n\n    // UI element references\n    private Button _playButton;\n    private Button _settingsButton;\n    private Button _quitButton;\n\n    private Label _scoreLabel;\n    private Label _toppingsLabel;\n\n    // Game data reference\n    [SerializeField] private GameData _gameData;\n\n    private void OnEnable()\n    {\n        // Get root from UI Document\n        _root = _uiDocument.rootVisualElement;\n\n        // Query elements by name\n        _playButton = _root.Q&lt;Button&gt;(\"PlayButton\");\n        _settingsButton = _root.Q&lt;Button&gt;(\"SettingsButton\");\n        _quitButton = _root.Q&lt;Button&gt;(\"QuitButton\");\n\n        _scoreLabel = _root.Q&lt;Label&gt;(\"ScoreLabel\");\n        _toppingsLabel = _root.Q&lt;Label&gt;(\"ToppingsLabel\");\n\n        // Register button callbacks\n        _playButton.clicked += OnPlayClicked;\n        _settingsButton.clicked += OnSettingsClicked;\n        _quitButton.clicked += OnQuitClicked;\n\n        // Setup data binding\n        SetupDataBinding();\n    }\n\n    private void OnDisable()\n    {\n        // Unregister callbacks to prevent memory leaks\n        _playButton.clicked -= OnPlayClicked;\n        _settingsButton.clicked -= OnSettingsClicked;\n        _quitButton.clicked -= OnQuitClicked;\n    }\n\n    private void SetupDataBinding()\n    {\n        // Bind to serialized object (Unity 6 feature)\n        var so = new SerializedObject(_gameData);\n        _root.Bind(so);\n    }\n\n    private void OnPlayClicked()\n    {\n        Debug.Log(\"Play button clicked!\");\n        // Load game scene\n    }\n\n    private void OnSettingsClicked()\n    {\n        Debug.Log(\"Settings button clicked!\");\n        // Show settings panel\n    }\n\n    private void OnQuitClicked()\n    {\n        Application.Quit();\n    }\n}\n</code></pre> <p>Key C# Patterns: - <code>UIDocument</code> component provides access to UXML - <code>Q&lt;T&gt;()</code> queries elements by name and type - Event registration with <code>clicked +=</code> - Proper cleanup in <code>OnDisable()</code></p>"},{"location":"ai/bg_analysis/#3-data-binding-system","title":"3. Data Binding System","text":""},{"location":"ai/bg_analysis/#31-unity-6-runtime-data-binding","title":"3.1 Unity 6 Runtime Data Binding","text":"<p>Unity 6 introduces runtime data binding for UI Toolkit, allowing automatic synchronization between data and UI.</p> <p>Example: Game Data ScriptableObject</p> <pre><code>using UnityEngine;\n\n[CreateAssetMenu(fileName = \"GameData\", menuName = \"Game/GameData\")]\npublic class GameData : ScriptableObject\n{\n    [SerializeField] private int _currentScore;\n    [SerializeField] private int _toppingsRemaining;\n    [SerializeField] private float _timeRemaining;\n    [SerializeField] private bool _isPaused;\n\n    // Properties with change notifications\n    public int CurrentScore\n    {\n        get =&gt; _currentScore;\n        set\n        {\n            if (_currentScore != value)\n            {\n                _currentScore = value;\n                // Serialization system will notify bound UI\n            }\n        }\n    }\n\n    public int ToppingsRemaining\n    {\n        get =&gt; _toppingsRemaining;\n        set\n        {\n            if (_toppingsRemaining != value)\n            {\n                _toppingsRemaining = value;\n            }\n        }\n    }\n\n    public float TimeRemaining\n    {\n        get =&gt; _timeRemaining;\n        set\n        {\n            if (!Mathf.Approximately(_timeRemaining, value))\n            {\n                _timeRemaining = value;\n            }\n        }\n    }\n\n    public bool IsPaused\n    {\n        get =&gt; _isPaused;\n        set\n        {\n            if (_isPaused != value)\n            {\n                _isPaused = value;\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#32-binding-in-uxml","title":"3.2 Binding in UXML","text":"<pre><code>&lt;ui:UXML xmlns:ui=\"UnityEngine.UIElements\"&gt;\n    &lt;ui:VisualElement name=\"HUD\"&gt;\n\n        &lt;!-- Direct binding to serialized property --&gt;\n        &lt;ui:Label name=\"ScoreLabel\" \n                  binding-path=\"CurrentScore\" \n                  class=\"hud-value\" /&gt;\n\n        &lt;!-- Binding with format string --&gt;\n        &lt;ui:Label name=\"ToppingsLabel\" \n                  binding-path=\"ToppingsRemaining\"\n                  class=\"hud-value\" /&gt;\n\n        &lt;!-- Progress bar binding --&gt;\n        &lt;ui:ProgressBar name=\"TimeBar\" \n                        binding-path=\"TimeRemaining\"\n                        low-value=\"0\"\n                        high-value=\"100\"\n                        class=\"time-progress\" /&gt;\n\n        &lt;!-- Toggle binding --&gt;\n        &lt;ui:Toggle name=\"PauseToggle\" \n                   binding-path=\"IsPaused\"\n                   label=\"Paused\" /&gt;\n\n    &lt;/ui:VisualElement&gt;\n&lt;/ui:UXML&gt;\n</code></pre>"},{"location":"ai/bg_analysis/#33-advanced-binding-with-value-converters","title":"3.3 Advanced Binding with Value Converters","text":"<p>Example: Custom Value Converter</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\n// Convert score int to formatted string\npublic class ScoreToStringConverter : UxmlAttributeConverter&lt;int, string&gt;\n{\n    public override string FromAttribute(int value)\n    {\n        return $\"Score: {value:N0}\";\n    }\n}\n\n// Convert time to MM:SS format\npublic class TimeToStringConverter : UxmlAttributeConverter&lt;float, string&gt;\n{\n    public override string FromAttribute(float value)\n    {\n        int minutes = Mathf.FloorToInt(value / 60f);\n        int seconds = Mathf.FloorToInt(value % 60f);\n        return $\"{minutes:00}:{seconds:00}\";\n    }\n}\n</code></pre> <p>Using Converters in C#</p> <pre><code>public class HUDController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private GameData _gameData;\n\n    private Label _scoreLabel;\n    private Label _timeLabel;\n\n    private void OnEnable()\n    {\n        var root = _uiDocument.rootVisualElement;\n\n        // Get labels\n        _scoreLabel = root.Q&lt;Label&gt;(\"ScoreLabel\");\n        _timeLabel = root.Q&lt;Label&gt;(\"TimeLabel\");\n\n        // Setup binding with SerializedObject\n        var so = new SerializedObject(_gameData);\n\n        // Bind with property tracking\n        root.TrackPropertyValue(so.FindProperty(\"_currentScore\"), property =&gt;\n        {\n            _scoreLabel.text = $\"Score: {_gameData.CurrentScore:N0}\";\n        });\n\n        root.TrackPropertyValue(so.FindProperty(\"_timeRemaining\"), property =&gt;\n        {\n            int minutes = Mathf.FloorToInt(_gameData.TimeRemaining / 60f);\n            int seconds = Mathf.FloorToInt(_gameData.TimeRemaining % 60f);\n            _timeLabel.text = $\"{minutes:00}:{seconds:00}\";\n        });\n\n        // Bind entire object\n        root.Bind(so);\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#34-two-way-binding-pattern","title":"3.4 Two-Way Binding Pattern","text":"<p>Example: Settings Panel with Two-Way Binding</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class SettingsController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private GameSettings _settings;\n\n    private Slider _volumeSlider;\n    private Slider _sensitivitySlider;\n    private Toggle _invertYToggle;\n\n    private void OnEnable()\n    {\n        var root = _uiDocument.rootVisualElement;\n\n        // Get elements\n        _volumeSlider = root.Q&lt;Slider&gt;(\"VolumeSlider\");\n        _sensitivitySlider = root.Q&lt;Slider&gt;(\"SensitivitySlider\");\n        _invertYToggle = root.Q&lt;Toggle&gt;(\"InvertYToggle\");\n\n        // Bind to SerializedObject for automatic two-way binding\n        var so = new SerializedObject(_settings);\n        root.Bind(so);\n\n        // Optional: Manual event handling for immediate feedback\n        _volumeSlider.RegisterValueChangedCallback(evt =&gt;\n        {\n            AudioListener.volume = evt.newValue;\n        });\n    }\n}\n</code></pre> <p>UXML for Settings</p> <pre><code>&lt;ui:UXML xmlns:ui=\"UnityEngine.UIElements\"&gt;\n    &lt;ui:VisualElement name=\"SettingsPanel\" class=\"settings-container\"&gt;\n\n        &lt;ui:Slider name=\"VolumeSlider\" \n                   binding-path=\"_volume\"\n                   low-value=\"0\" \n                   high-value=\"1\"\n                   label=\"Volume\"\n                   class=\"setting-slider\" /&gt;\n\n        &lt;ui:Slider name=\"SensitivitySlider\" \n                   binding-path=\"_sensitivity\"\n                   low-value=\"0.1\" \n                   high-value=\"2.0\"\n                   label=\"Sensitivity\"\n                   class=\"setting-slider\" /&gt;\n\n        &lt;ui:Toggle name=\"InvertYToggle\" \n                   binding-path=\"_invertY\"\n                   label=\"Invert Y-Axis\"\n                   class=\"setting-toggle\" /&gt;\n\n    &lt;/ui:VisualElement&gt;\n&lt;/ui:UXML&gt;\n</code></pre>"},{"location":"ai/bg_analysis/#4-shader-graph-integration","title":"4. Shader Graph Integration","text":""},{"location":"ai/bg_analysis/#41-custom-shader-graph-for-ui","title":"4.1 Custom Shader Graph for UI","text":"<p>UI Toolkit can use Shader Graph shaders applied via custom materials.</p> <p>Example: Glass Morphism Shader Setup</p> <p>Shader Graph Node Structure:</p> <pre><code>Inputs:\n\u251c\u2500\u2500 Vertex Color (from UI element)\n\u251c\u2500\u2500 UV0 (texture coordinates)\n\u251c\u2500\u2500 Scene Color (for blur effect)\n\u2514\u2500\u2500 Custom Properties (blur intensity, tint color)\n\nProcessing:\n\u251c\u2500\u2500 Scene Color Blur (spiral sampling)\n\u251c\u2500\u2500 Gradient Overlay\n\u251c\u2500\u2500 Border Detection\n\u2514\u2500\u2500 Alpha Blending\n\nOutput:\n\u2514\u2500\u2500 Fragment (Base Color + Alpha)\n</code></pre> <p>C# Material Controller</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class GlassPanelController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private Material _glassMaterial;\n\n    private VisualElement _glassPanel;\n\n    // Shader property IDs (cached for performance)\n    private static readonly int BlurIntensity = Shader.PropertyToID(\"_BlurIntensity\");\n    private static readonly int TintColor = Shader.PropertyToID(\"_TintColor\");\n    private static readonly int BorderWidth = Shader.PropertyToID(\"_BorderWidth\");\n\n    private void OnEnable()\n    {\n        var root = _uiDocument.rootVisualElement;\n        _glassPanel = root.Q&lt;VisualElement&gt;(\"GlassPanel\");\n\n        // Apply custom material to element\n        ApplyGlassMaterial();\n    }\n\n    private void ApplyGlassMaterial()\n    {\n        // Create material instance (important for runtime modification)\n        var materialInstance = new Material(_glassMaterial);\n\n        // Set initial properties\n        materialInstance.SetFloat(BlurIntensity, 0.5f);\n        materialInstance.SetColor(TintColor, new Color(1f, 1f, 1f, 0.1f));\n        materialInstance.SetFloat(BorderWidth, 2f);\n\n        // Apply to visual element via inline style\n        _glassPanel.style.unityBackgroundImageTintColor = Color.white;\n\n        // For custom shader, use experimental API\n        _glassPanel.experimental.SetMaterial(materialInstance);\n    }\n\n    // Runtime shader parameter update\n    public void SetBlurIntensity(float intensity)\n    {\n        var material = _glassPanel.experimental.GetMaterial();\n        if (material != null)\n        {\n            material.SetFloat(BlurIntensity, intensity);\n        }\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#42-procedural-ui-shapes-with-shader-graph","title":"4.2 Procedural UI Shapes with Shader Graph","text":"<p>Example: Rounded Rectangle Button Shader</p> <p>Shader Properties:</p> <pre><code>// Properties exposed in Shader Graph\nProperties\n{\n    _MainColor (\"Main Color\", Color) = (1, 1, 1, 1)\n    _BorderColor (\"Border Color\", Color) = (0.8, 0.8, 0.8, 1)\n    _BorderWidth (\"Border Width\", Float) = 2.0\n    _CornerRadius (\"Corner Radius\", Float) = 12.0\n    _GlowIntensity (\"Glow Intensity\", Float) = 0.0\n}\n</code></pre> <p>USS Integration</p> <pre><code>.glass-panel {\n    width: 400px;\n    height: 300px;\n\n    /* Material application happens in C# */\n    /* USS handles layout and base properties */\n    border-radius: 16px;\n    padding: 20px;\n}\n\n/* Hover effect triggers shader parameter change */\n.glass-panel:hover {\n    /* Handled via C# callback */\n}\n</code></pre>"},{"location":"ai/bg_analysis/#43-animated-shader-effects","title":"4.3 Animated Shader Effects","text":"<p>Example: Pulsing Glow Effect</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class AnimatedGlowController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private Material _glowMaterial;\n\n    private VisualElement _glowElement;\n    private Material _materialInstance;\n\n    private static readonly int GlowIntensity = Shader.PropertyToID(\"_GlowIntensity\");\n\n    [SerializeField] private float _pulseSpeed = 2f;\n    [SerializeField] private float _minIntensity = 0.2f;\n    [SerializeField] private float _maxIntensity = 1.0f;\n\n    private void OnEnable()\n    {\n        var root = _uiDocument.rootVisualElement;\n        _glowElement = root.Q&lt;VisualElement&gt;(\"GlowButton\");\n\n        _materialInstance = new Material(_glowMaterial);\n        _glowElement.experimental.SetMaterial(_materialInstance);\n    }\n\n    private void Update()\n    {\n        if (_materialInstance != null)\n        {\n            // Pulsing animation using sine wave\n            float intensity = Mathf.Lerp(\n                _minIntensity,\n                _maxIntensity,\n                (Mathf.Sin(Time.time * _pulseSpeed) + 1f) * 0.5f\n            );\n\n            _materialInstance.SetFloat(GlowIntensity, intensity);\n        }\n    }\n\n    private void OnDisable()\n    {\n        // Clean up material instance\n        if (_materialInstance != null)\n        {\n            Destroy(_materialInstance);\n        }\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#5-world-space-ui","title":"5. World Space UI","text":""},{"location":"ai/bg_analysis/#51-panel-settings-for-world-space","title":"5.1 Panel Settings for World Space","text":"<p>Example: WorldSpaceUISetup.cs</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\n[RequireComponent(typeof(UIDocument))]\npublic class WorldSpaceUISetup : MonoBehaviour\n{\n    [SerializeField] private Camera _targetCamera;\n    [SerializeField] private float _distanceFromCamera = 5f;\n    [SerializeField] private Vector2 _panelSize = new Vector2(1920, 1080);\n\n    private UIDocument _uiDocument;\n    private PanelSettings _panelSettings;\n\n    private void Awake()\n    {\n        _uiDocument = GetComponent&lt;UIDocument&gt;();\n\n        // Create PanelSettings asset at runtime\n        SetupWorldSpacePanel();\n    }\n\n    private void SetupWorldSpacePanel()\n    {\n        // Create new PanelSettings\n        _panelSettings = ScriptableObject.CreateInstance&lt;PanelSettings&gt;();\n\n        // Configure for world space\n        _panelSettings.targetDisplay = 0;\n        _panelSettings.clearDepthStencil = false;\n        _panelSettings.sortingOrder = 0;\n\n        // Set render mode to World Space\n        _panelSettings.SetScreenToPanelSpaceFunction((screenPosition) =&gt;\n        {\n            // Convert screen position to world space panel position\n            Ray ray = _targetCamera.ScreenPointToRay(screenPosition);\n            Plane panelPlane = new Plane(-transform.forward, transform.position);\n\n            if (panelPlane.Raycast(ray, out float distance))\n            {\n                Vector3 worldPoint = ray.GetPoint(distance);\n                Vector3 localPoint = transform.InverseTransformPoint(worldPoint);\n\n                // Convert to panel coordinates\n                float u = (localPoint.x / transform.localScale.x + 0.5f) * _panelSize.x;\n                float v = (-localPoint.y / transform.localScale.y + 0.5f) * _panelSize.y;\n\n                return new Vector2(u, v);\n            }\n\n            return screenPosition;\n        });\n\n        // Apply to UI Document\n        _uiDocument.panelSettings = _panelSettings;\n    }\n\n    private void Update()\n    {\n        // Optional: Make panel face camera\n        transform.LookAt(_targetCamera.transform);\n        transform.Rotate(0, 180, 0); // Flip to face camera\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#52-quest-2-vr-world-space-ui","title":"5.2 Quest 2 VR World Space UI","text":"<p>Example: VR UI Panel for Meta Quest</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class VRWorldSpaceUI : MonoBehaviour\n{\n    [Header(\"VR Settings\")]\n    [SerializeField] private Camera _vrCamera; // Center eye camera\n    [SerializeField] private float _uiDistance = 2.5f;\n    [SerializeField] private float _uiScale = 0.001f; // Scaling for comfortable viewing\n\n    [Header(\"UI Settings\")]\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private Vector2 _panelResolution = new Vector2(1920, 1080);\n\n    private PanelSettings _panelSettings;\n    private RenderTexture _renderTexture;\n\n    private void Awake()\n    {\n        SetupVRPanel();\n    }\n\n    private void SetupVRPanel()\n    {\n        // Create render texture for UI\n        _renderTexture = new RenderTexture(\n            (int)_panelResolution.x,\n            (int)_panelResolution.y,\n            0,\n            RenderTextureFormat.ARGB32\n        );\n        _renderTexture.Create();\n\n        // Create panel settings\n        _panelSettings = ScriptableObject.CreateInstance&lt;PanelSettings&gt;();\n        _panelSettings.targetTexture = _renderTexture;\n        _panelSettings.clearColor = Color.clear;\n\n        // Apply to UI Document\n        _uiDocument.panelSettings = _panelSettings;\n\n        // Create quad mesh for displaying UI in world\n        CreateUIQuad();\n    }\n\n    private void CreateUIQuad()\n    {\n        // Create quad mesh\n        GameObject quadObject = new GameObject(\"UI_Quad\");\n        quadObject.transform.SetParent(transform);\n        quadObject.transform.localPosition = Vector3.zero;\n        quadObject.transform.localRotation = Quaternion.identity;\n\n        // Add mesh components\n        MeshFilter meshFilter = quadObject.AddComponent&lt;MeshFilter&gt;();\n        MeshRenderer meshRenderer = quadObject.AddComponent&lt;MeshRenderer&gt;();\n\n        // Create quad mesh\n        float aspectRatio = _panelResolution.x / _panelResolution.y;\n        float width = aspectRatio * _uiScale;\n        float height = _uiScale;\n\n        Mesh quadMesh = new Mesh\n        {\n            vertices = new[]\n            {\n                new Vector3(-width * 0.5f, -height * 0.5f, 0),\n                new Vector3(width * 0.5f, -height * 0.5f, 0),\n                new Vector3(width * 0.5f, height * 0.5f, 0),\n                new Vector3(-width * 0.5f, height * 0.5f, 0)\n            },\n            uv = new[]\n            {\n                new Vector2(0, 0),\n                new Vector2(1, 0),\n                new Vector2(1, 1),\n                new Vector2(0, 1)\n            },\n            triangles = new[] { 0, 2, 1, 0, 3, 2 }\n        };\n\n        quadMesh.RecalculateNormals();\n        meshFilter.mesh = quadMesh;\n\n        // Create material with UI texture\n        Material uiMaterial = new Material(Shader.Find(\"UI/Default\"));\n        uiMaterial.mainTexture = _renderTexture;\n        meshRenderer.material = uiMaterial;\n    }\n\n    private void Update()\n    {\n        // Position UI in front of camera\n        Vector3 targetPosition = _vrCamera.transform.position + \n                                 _vrCamera.transform.forward * _uiDistance;\n        transform.position = Vector3.Lerp(transform.position, targetPosition, Time.deltaTime * 5f);\n\n        // Face camera\n        transform.LookAt(_vrCamera.transform);\n        transform.Rotate(0, 180, 0);\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#53-vr-interaction-with-ui-toolkit","title":"5.3 VR Interaction with UI Toolkit","text":"<p>Example: Ray Interactor for UI</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\nusing UnityEngine.InputSystem;\n\npublic class VRUIRayInteractor : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private Transform _rayOrigin; // Controller transform\n    [SerializeField] private LineRenderer _lineRenderer;\n    [SerializeField] private float _maxRayDistance = 10f;\n\n    [Header(\"Input Actions\")]\n    [SerializeField] private InputActionReference _selectAction;\n\n    private VisualElement _currentHoveredElement;\n    private Vector2 _currentPanelPosition;\n\n    private void OnEnable()\n    {\n        _selectAction.action.performed += OnSelectPerformed;\n    }\n\n    private void OnDisable()\n    {\n        _selectAction.action.performed -= OnSelectPerformed;\n    }\n\n    private void Update()\n    {\n        UpdateRaycast();\n    }\n\n    private void UpdateRaycast()\n    {\n        Ray ray = new Ray(_rayOrigin.position, _rayOrigin.forward);\n\n        // Raycast against UI plane\n        Plane uiPlane = new Plane(-transform.forward, transform.position);\n\n        if (uiPlane.Raycast(ray, out float distance) &amp;&amp; distance &lt;= _maxRayDistance)\n        {\n            Vector3 hitPoint = ray.GetPoint(distance);\n\n            // Update line renderer\n            _lineRenderer.SetPosition(0, _rayOrigin.position);\n            _lineRenderer.SetPosition(1, hitPoint);\n\n            // Convert world hit to panel coordinates\n            Vector3 localHit = transform.InverseTransformPoint(hitPoint);\n            _currentPanelPosition = WorldToPanel(localHit);\n\n            // Send pointer event to UI\n            SimulatePointerMove(_currentPanelPosition);\n        }\n        else\n        {\n            // No hit - reset\n            _lineRenderer.SetPosition(1, ray.GetPoint(_maxRayDistance));\n            SimulatePointerExit();\n        }\n    }\n\n    private Vector2 WorldToPanel(Vector3 localPosition)\n    {\n        var panelSettings = _uiDocument.panelSettings;\n\n        // Convert local position to panel coordinates\n        float u = (localPosition.x + 0.5f) * panelSettings.targetTexture.width;\n        float v = (-localPosition.y + 0.5f) * panelSettings.targetTexture.height;\n\n        return new Vector2(u, v);\n    }\n\n    private void SimulatePointerMove(Vector2 panelPosition)\n    {\n        var root = _uiDocument.rootVisualElement;\n        var element = root.panel.Pick(panelPosition);\n\n        // Handle hover state changes\n        if (element != _currentHoveredElement)\n        {\n            // Exit previous element\n            if (_currentHoveredElement != null)\n            {\n                using (var evt = PointerLeaveEvent.GetPooled())\n                {\n                    evt.target = _currentHoveredElement;\n                    _currentHoveredElement.SendEvent(evt);\n                }\n            }\n\n            // Enter new element\n            if (element != null)\n            {\n                using (var evt = PointerEnterEvent.GetPooled())\n                {\n                    evt.target = element;\n                    element.SendEvent(evt);\n                }\n            }\n\n            _currentHoveredElement = element;\n        }\n    }\n\n    private void SimulatePointerExit()\n    {\n        if (_currentHoveredElement != null)\n        {\n            using (var evt = PointerLeaveEvent.GetPooled())\n            {\n                evt.target = _currentHoveredElement;\n                _currentHoveredElement.SendEvent(evt);\n            }\n            _currentHoveredElement = null;\n        }\n    }\n\n    private void OnSelectPerformed(InputAction.CallbackContext context)\n    {\n        if (_currentHoveredElement != null)\n        {\n            // Send click event\n            using (var evt = ClickEvent.GetPooled())\n            {\n                evt.target = _currentHoveredElement;\n                _currentHoveredElement.SendEvent(evt);\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#6-theme-system","title":"6. Theme System","text":""},{"location":"ai/bg_analysis/#61-dynamic-theme-switching","title":"6.1 Dynamic Theme Switching","text":"<p>Example: ThemeManager.cs</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\nusing System.Collections.Generic;\n\n[System.Serializable]\npublic class ThemeColors\n{\n    public string themeName;\n    public Color primaryColor;\n    public Color secondaryColor;\n    public Color backgroundColor;\n    public Color glowColor1;\n    public Color glowColor2;\n}\n\npublic class ThemeManager : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private List&lt;ThemeColors&gt; _themes;\n    [SerializeField] private int _currentThemeIndex = 0;\n\n    private VisualElement _root;\n\n    private void OnEnable()\n    {\n        _root = _uiDocument.rootVisualElement;\n        ApplyTheme(_currentThemeIndex);\n    }\n\n    public void ApplyTheme(int themeIndex)\n    {\n        if (themeIndex &lt; 0 || themeIndex &gt;= _themes.Count)\n            return;\n\n        _currentThemeIndex = themeIndex;\n        var theme = _themes[themeIndex];\n\n        // Update CSS variables dynamically\n        _root.style.SetCustomProperty(\"--primary-color\", theme.primaryColor);\n        _root.style.SetCustomProperty(\"--secondary-color\", theme.secondaryColor);\n        _root.style.SetCustomProperty(\"--bg-dark\", theme.backgroundColor);\n        _root.style.SetCustomProperty(\"--glow-color-1\", theme.glowColor1);\n        _root.style.SetCustomProperty(\"--glow-color-2\", theme.glowColor2);\n    }\n\n    public void NextTheme()\n    {\n        int nextIndex = (_currentThemeIndex + 1) % _themes.Count;\n        ApplyTheme(nextIndex);\n    }\n\n    public void SetThemeByName(string themeName)\n    {\n        int index = _themes.FindIndex(t =&gt; t.themeName == themeName);\n        if (index &gt;= 0)\n        {\n            ApplyTheme(index);\n        }\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#62-uss-variable-update","title":"6.2 USS Variable Update","text":"<p>USS with Variables</p> <pre><code>:root {\n    --primary-color: rgb(138, 43, 226);\n    --secondary-color: rgb(0, 217, 255);\n    --bg-dark: rgb(10, 10, 15);\n    --glow-color-1: rgba(138, 43, 226, 0.4);\n    --glow-color-2: rgba(0, 217, 255, 0.3);\n}\n\n.themed-button {\n    background-color: var(--primary-color);\n    border-color: var(--secondary-color);\n    transition-duration: 0.3s;\n}\n\n.themed-panel {\n    background-image: \n        radial-gradient(at 30% 40%, var(--glow-color-1), transparent),\n        radial-gradient(at 70% 60%, var(--glow-color-2), transparent),\n        var(--bg-dark);\n}\n</code></pre> <p>Runtime Update Extension</p> <pre><code>using UnityEngine.UIElements;\n\npublic static class StyleExtensions\n{\n    public static void SetCustomProperty(this IStyle style, string propertyName, Color value)\n    {\n        // Convert Color to CSS color string\n        string colorString = $\"rgb({value.r * 255f}, {value.g * 255f}, {value.b * 255f})\";\n\n        // Update custom property\n        // Note: This is a simplified example. Actual implementation may vary.\n        style.backgroundColor = value; // Fallback\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#7-input-system-integration","title":"7. Input System Integration","text":""},{"location":"ai/bg_analysis/#71-new-input-system-setup","title":"7.1 New Input System Setup","text":"<p>Example: UIInputHandler.cs</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\nusing UnityEngine.InputSystem;\n\npublic class UIInputHandler : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n\n    [Header(\"Input Actions\")]\n    [SerializeField] private InputActionReference _navigateAction;\n    [SerializeField] private InputActionReference _submitAction;\n    [SerializeField] private InputActionReference _cancelAction;\n\n    private VisualElement _root;\n    private Focusable _currentFocusedElement;\n\n    private void OnEnable()\n    {\n        _root = _uiDocument.rootVisualElement;\n\n        // Enable input actions\n        _navigateAction.action.Enable();\n        _submitAction.action.Enable();\n        _cancelAction.action.Enable();\n\n        // Register callbacks\n        _navigateAction.action.performed += OnNavigate;\n        _submitAction.action.performed += OnSubmit;\n        _cancelAction.action.performed += OnCancel;\n\n        // Set initial focus\n        SetInitialFocus();\n    }\n\n    private void OnDisable()\n    {\n        // Unregister callbacks\n        _navigateAction.action.performed -= OnNavigate;\n        _submitAction.action.performed -= OnSubmit;\n        _cancelAction.action.performed -= OnCancel;\n\n        // Disable input actions\n        _navigateAction.action.Disable();\n        _submitAction.action.Disable();\n        _cancelAction.action.Disable();\n    }\n\n    private void SetInitialFocus()\n    {\n        // Find first focusable element\n        var focusable = _root.Q&lt;Button&gt;();\n        if (focusable != null)\n        {\n            focusable.Focus();\n            _currentFocusedElement = focusable;\n        }\n    }\n\n    private void OnNavigate(InputAction.CallbackContext context)\n    {\n        Vector2 direction = context.ReadValue&lt;Vector2&gt;();\n\n        if (Mathf.Abs(direction.y) &gt; Mathf.Abs(direction.x))\n        {\n            // Vertical navigation\n            if (direction.y &gt; 0)\n                NavigateUp();\n            else\n                NavigateDown();\n        }\n        else\n        {\n            // Horizontal navigation\n            if (direction.x &gt; 0)\n                NavigateRight();\n            else\n                NavigateLeft();\n        }\n    }\n\n    private void OnSubmit(InputAction.CallbackContext context)\n    {\n        if (_currentFocusedElement is Button button)\n        {\n            // Simulate button click\n            using (var evt = ClickEvent.GetPooled())\n            {\n                evt.target = button;\n                button.SendEvent(evt);\n            }\n        }\n    }\n\n    private void OnCancel(InputAction.CallbackContext context)\n    {\n        // Handle back/cancel action\n        Debug.Log(\"Cancel pressed\");\n    }\n\n    private void NavigateUp()\n    {\n        // Implement focus navigation logic\n        var focusController = _root.focusController;\n        focusController.GetFocusableParentForPointerEvent(_currentFocusedElement as VisualElement, out Focusable next);\n        if (next != null)\n        {\n            next.Focus();\n            _currentFocusedElement = next;\n        }\n    }\n\n    private void NavigateDown() { /* Similar to NavigateUp */ }\n    private void NavigateLeft() { /* Similar to NavigateUp */ }\n    private void NavigateRight() { /* Similar to NavigateUp */ }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#72-gamepadcontroller-navigation","title":"7.2 Gamepad/Controller Navigation","text":"<p>USS for Focus States</p> <pre><code>/* Focus indicator */\n.menu-button:focus {\n    border-color: var(--secondary-color);\n    border-width: 3px;\n    scale: 1.05;\n}\n\n/* Selected state */\n.menu-button.selected {\n    background-color: var(--primary-color);\n}\n\n/* Transition for smooth focus changes */\n.menu-button {\n    transition-property: border-color, border-width, scale;\n    transition-duration: 0.2s;\n}\n</code></pre>"},{"location":"ai/bg_analysis/#8-performance-patterns","title":"8. Performance Patterns","text":""},{"location":"ai/bg_analysis/#81-object-pooling-for-ui-elements","title":"8.1 Object Pooling for UI Elements","text":"<p>Example: UI Element Pool</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\nusing System.Collections.Generic;\n\npublic class UIElementPool&lt;T&gt; where T : VisualElement, new()\n{\n    private Stack&lt;T&gt; _pool = new Stack&lt;T&gt;();\n    private VisualElement _container;\n\n    public UIElementPool(VisualElement container, int initialSize = 10)\n    {\n        _container = container;\n\n        // Pre-populate pool\n        for (int i = 0; i &lt; initialSize; i++)\n        {\n            var element = CreateNewElement();\n            element.style.display = DisplayStyle.None;\n            _pool.Push(element);\n        }\n    }\n\n    private T CreateNewElement()\n    {\n        var element = new T();\n        _container.Add(element);\n        return element;\n    }\n\n    public T Get()\n    {\n        T element;\n\n        if (_pool.Count &gt; 0)\n        {\n            element = _pool.Pop();\n        }\n        else\n        {\n            element = CreateNewElement();\n        }\n\n        element.style.display = DisplayStyle.Flex;\n        return element;\n    }\n\n    public void Return(T element)\n    {\n        element.style.display = DisplayStyle.None;\n        _pool.Push(element);\n    }\n}\n\n// Usage example\npublic class InventoryController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n\n    private VisualElement _itemContainer;\n    private UIElementPool&lt;VisualElement&gt; _itemPool;\n\n    private void OnEnable()\n    {\n        var root = _uiDocument.rootVisualElement;\n        _itemContainer = root.Q&lt;VisualElement&gt;(\"ItemContainer\");\n\n        // Create pool\n        _itemPool = new UIElementPool&lt;VisualElement&gt;(_itemContainer, 20);\n    }\n\n    public void DisplayItems(List&lt;string&gt; items)\n    {\n        // Return all items to pool first\n        for (int i = _itemContainer.childCount - 1; i &gt;= 0; i--)\n        {\n            var child = _itemContainer[i] as VisualElement;\n            if (child != null)\n            {\n                _itemPool.Return(child);\n            }\n        }\n\n        // Get items from pool and populate\n        foreach (var item in items)\n        {\n            var element = _itemPool.Get();\n            var label = element.Q&lt;Label&gt;();\n            if (label != null)\n            {\n                label.text = item;\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#82-uss-optimization-for-quest-2","title":"8.2 USS Optimization for Quest 2","text":"<p>Performance-Optimized USS</p> <pre><code>/* QUEST 2 OPTIMIZATION PATTERNS */\n\n/* Use transform instead of position for animations (GPU accelerated) */\n.animated-element {\n    transition-property: translate, scale, rotate;\n    transition-duration: 0.3s;\n    translate: 0 0; /* Use translate instead of position */\n}\n\n/* Avoid expensive box-shadows on low-end hardware */\n.no-shadow-mobile {\n    /* box-shadow: 0 4px 8px rgba(0,0,0,0.2); */ /* Disabled */\n}\n\n/* Use simple gradients instead of complex multi-layer ones */\n.optimized-gradient {\n    background-image: linear-gradient(\n        135deg,\n        var(--glow-primary),\n        var(--glow-secondary)\n    );\n    /* Instead of 3-4 layered radial gradients */\n}\n\n/* Reduce border-radius complexity */\n.simple-corners {\n    border-radius: 8px; /* Instead of 16px or per-corner values */\n}\n\n/* Disable transitions on low-end mode */\n.performance-mode .menu-button {\n    transition-duration: 0s;\n}\n\n/* Use opacity for show/hide instead of display */\n.hidden-optimized {\n    opacity: 0;\n    /* visibility: hidden; */\n    /* Instead of display: none which triggers layout */\n}\n</code></pre>"},{"location":"ai/bg_analysis/#83-efficient-data-binding-updates","title":"8.3 Efficient Data Binding Updates","text":"<p>Example: Batched Updates</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\nusing System.Collections;\n\npublic class OptimizedDataUpdater : MonoBehaviour\n{\n    [SerializeField] private GameData _gameData;\n    [SerializeField] private UIDocument _uiDocument;\n\n    private SerializedObject _serializedObject;\n    private Coroutine _updateCoroutine;\n\n    private void OnEnable()\n    {\n        _serializedObject = new SerializedObject(_gameData);\n        var root = _uiDocument.rootVisualElement;\n        root.Bind(_serializedObject);\n\n        // Start batched update coroutine\n        _updateCoroutine = StartCoroutine(BatchedUpdateRoutine());\n    }\n\n    private void OnDisable()\n    {\n        if (_updateCoroutine != null)\n        {\n            StopCoroutine(_updateCoroutine);\n        }\n    }\n\n    private IEnumerator BatchedUpdateRoutine()\n    {\n        // Update UI at lower frequency than game loop\n        var wait = new WaitForSeconds(0.1f); // 10 updates per second\n\n        while (true)\n        {\n            // Apply all pending changes at once\n            _serializedObject.Update();\n\n            yield return wait;\n        }\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#9-code-examples","title":"9. Code Examples","text":""},{"location":"ai/bg_analysis/#91-complete-main-menu-implementation","title":"9.1 Complete Main Menu Implementation","text":"<p>MainMenu.uxml</p> <pre><code>&lt;ui:UXML xmlns:ui=\"UnityEngine.UIElements\"&gt;\n    &lt;Style src=\"MainMenu.uss\" /&gt;\n\n    &lt;ui:VisualElement name=\"MainMenuRoot\" class=\"menu-container\"&gt;\n\n        &lt;!-- Background with gradient --&gt;\n        &lt;ui:VisualElement name=\"Background\" class=\"menu-background\" /&gt;\n\n        &lt;!-- Content container --&gt;\n        &lt;ui:VisualElement name=\"Content\" class=\"content-container\"&gt;\n\n            &lt;!-- Title --&gt;\n            &lt;ui:Label text=\"BAGEL GAME\" class=\"game-title\" /&gt;\n\n            &lt;!-- Button group --&gt;\n            &lt;ui:VisualElement name=\"ButtonGroup\" class=\"button-container\"&gt;\n                &lt;ui:Button name=\"PlayButton\" text=\"PLAY\" class=\"menu-button primary-button\" /&gt;\n                &lt;ui:Button name=\"OptionsButton\" text=\"OPTIONS\" class=\"menu-button\" /&gt;\n                &lt;ui:Button name=\"CreditsButton\" text=\"CREDITS\" class=\"menu-button\" /&gt;\n                &lt;ui:Button name=\"QuitButton\" text=\"QUIT\" class=\"menu-button\" /&gt;\n            &lt;/ui:VisualElement&gt;\n\n            &lt;!-- Version info --&gt;\n            &lt;ui:Label name=\"VersionLabel\" text=\"v1.0.0\" class=\"version-text\" /&gt;\n\n        &lt;/ui:VisualElement&gt;\n\n    &lt;/ui:VisualElement&gt;\n&lt;/ui:UXML&gt;\n</code></pre> <p>MainMenu.uss</p> <pre><code>/* ===== ROOT THEME ===== */\n:root {\n    --primary-purple: rgb(138, 43, 226);\n    --secondary-cyan: rgb(0, 217, 255);\n    --bg-dark: rgb(5, 5, 10);\n    --bg-mid: rgb(15, 15, 25);\n\n    --glow-purple: rgba(138, 43, 226, 0.5);\n    --glow-cyan: rgba(0, 217, 255, 0.4);\n\n    --transition-fast: 0.2s;\n    --transition-normal: 0.3s;\n}\n\n/* ===== CONTAINERS ===== */\n.menu-container {\n    flex-grow: 1;\n    width: 100%;\n    height: 100%;\n}\n\n.menu-background {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n\n    background-image: \n        radial-gradient(circle at 25% 35%, var(--glow-purple) 0%, transparent 55%),\n        radial-gradient(circle at 75% 65%, var(--glow-cyan) 0%, transparent 55%),\n        linear-gradient(180deg, var(--bg-mid) 0%, var(--bg-dark) 100%);\n}\n\n.content-container {\n    flex-grow: 1;\n    justify-content: center;\n    align-items: center;\n    padding: 40px;\n}\n\n/* ===== TYPOGRAPHY ===== */\n.game-title {\n    font-size: 96px;\n    color: white;\n    -unity-font-style: bold;\n    -unity-text-align: middle-center;\n    text-shadow: 0px 4px 30px var(--glow-cyan);\n    margin-bottom: 60px;\n\n    /* Letter spacing for modern look */\n    letter-spacing: 8px;\n}\n\n.version-text {\n    font-size: 14px;\n    color: rgba(255, 255, 255, 0.4);\n    -unity-text-align: middle-center;\n    margin-top: 40px;\n}\n\n/* ===== BUTTONS ===== */\n.button-container {\n    align-items: center;\n    gap: 16px;\n}\n\n.menu-button {\n    min-width: 300px;\n    min-height: 70px;\n\n    /* Glass morphism */\n    background-color: rgba(255, 255, 255, 0.03);\n    border-width: 2px;\n    border-color: rgba(255, 255, 255, 0.08);\n    border-radius: 12px;\n\n    /* Typography */\n    font-size: 24px;\n    color: white;\n    -unity-font-style: bold;\n    letter-spacing: 2px;\n\n    /* Transitions */\n    transition-property: background-color, border-color, scale, translate;\n    transition-duration: var(--transition-normal);\n}\n\n.menu-button:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n    border-color: var(--secondary-cyan);\n    scale: 1.05 1.05;\n\n    /* Subtle glow */\n    box-shadow: 0px 0px 20px rgba(0, 217, 255, 0.3);\n}\n\n.menu-button:active {\n    scale: 0.95 0.95;\n    background-color: rgba(0, 217, 255, 0.15);\n}\n\n.menu-button:focus {\n    border-color: var(--secondary-cyan);\n    border-width: 3px;\n}\n\n/* Primary button variant */\n.primary-button {\n    background-color: var(--primary-purple);\n    border-color: var(--primary-purple);\n}\n\n.primary-button:hover {\n    background-color: rgba(138, 43, 226, 0.8);\n    border-color: var(--secondary-cyan);\n    box-shadow: 0px 0px 30px var(--glow-purple);\n}\n</code></pre> <p>MainMenuController.cs</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\nusing UnityEngine.SceneManagement;\n\npublic class MainMenuController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private AudioClip _hoverSound;\n    [SerializeField] private AudioClip _clickSound;\n\n    private VisualElement _root;\n    private Button _playButton;\n    private Button _optionsButton;\n    private Button _creditsButton;\n    private Button _quitButton;\n\n    private void OnEnable()\n    {\n        _root = _uiDocument.rootVisualElement;\n\n        // Query UI elements\n        _playButton = _root.Q&lt;Button&gt;(\"PlayButton\");\n        _optionsButton = _root.Q&lt;Button&gt;(\"OptionsButton\");\n        _creditsButton = _root.Q&lt;Button&gt;(\"CreditsButton\");\n        _quitButton = _root.Q&lt;Button&gt;(\"QuitButton\");\n\n        // Register callbacks\n        RegisterButtonEvents(_playButton, OnPlayClicked);\n        RegisterButtonEvents(_optionsButton, OnOptionsClicked);\n        RegisterButtonEvents(_creditsButton, OnCreditsClicked);\n        RegisterButtonEvents(_quitButton, OnQuitClicked);\n    }\n\n    private void OnDisable()\n    {\n        // Unregister callbacks\n        UnregisterButtonEvents(_playButton, OnPlayClicked);\n        UnregisterButtonEvents(_optionsButton, OnOptionsClicked);\n        UnregisterButtonEvents(_creditsButton, OnCreditsClicked);\n        UnregisterButtonEvents(_quitButton, OnQuitClicked);\n    }\n\n    private void RegisterButtonEvents(Button button, System.Action callback)\n    {\n        if (button == null) return;\n\n        button.clicked += callback;\n\n        // Add hover sound\n        button.RegisterCallback&lt;PointerEnterEvent&gt;(evt =&gt; PlaySound(_hoverSound));\n    }\n\n    private void UnregisterButtonEvents(Button button, System.Action callback)\n    {\n        if (button == null) return;\n\n        button.clicked -= callback;\n    }\n\n    private void OnPlayClicked()\n    {\n        PlaySound(_clickSound);\n        SceneManager.LoadScene(\"GameScene\");\n    }\n\n    private void OnOptionsClicked()\n    {\n        PlaySound(_clickSound);\n        Debug.Log(\"Options clicked - open settings panel\");\n    }\n\n    private void OnCreditsClicked()\n    {\n        PlaySound(_clickSound);\n        Debug.Log(\"Credits clicked - show credits\");\n    }\n\n    private void OnQuitClicked()\n    {\n        PlaySound(_clickSound);\n\n        #if UNITY_EDITOR\n        UnityEditor.EditorApplication.isPlaying = false;\n        #else\n        Application.Quit();\n        #endif\n    }\n\n    private void PlaySound(AudioClip clip)\n    {\n        if (clip != null)\n        {\n            AudioSource.PlayClipAtPoint(clip, Camera.main.transform.position, 0.5f);\n        }\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#92-hud-with-live-data-binding","title":"9.2 HUD with Live Data Binding","text":"<p>HUD.uxml</p> <pre><code>&lt;ui:UXML xmlns:ui=\"UnityEngine.UIElements\"&gt;\n    &lt;Style src=\"HUD.uss\" /&gt;\n\n    &lt;ui:VisualElement name=\"HUDRoot\" class=\"hud-container\"&gt;\n\n        &lt;!-- Top bar --&gt;\n        &lt;ui:VisualElement name=\"TopBar\" class=\"top-bar\"&gt;\n\n            &lt;!-- Score --&gt;\n            &lt;ui:VisualElement class=\"stat-group\"&gt;\n                &lt;ui:Label text=\"SCORE\" class=\"stat-label\" /&gt;\n                &lt;ui:Label name=\"ScoreValue\" \n                         binding-path=\"CurrentScore\" \n                         class=\"stat-value\" /&gt;\n            &lt;/ui:VisualElement&gt;\n\n            &lt;!-- Toppings --&gt;\n            &lt;ui:VisualElement class=\"stat-group\"&gt;\n                &lt;ui:Label text=\"TOPPINGS\" class=\"stat-label\" /&gt;\n                &lt;ui:Label name=\"ToppingsValue\" \n                         binding-path=\"ToppingsRemaining\" \n                         class=\"stat-value\" /&gt;\n            &lt;/ui:VisualElement&gt;\n\n            &lt;!-- Timer --&gt;\n            &lt;ui:VisualElement class=\"stat-group\"&gt;\n                &lt;ui:Label text=\"TIME\" class=\"stat-label\" /&gt;\n                &lt;ui:Label name=\"TimeValue\" \n                         binding-path=\"TimeRemaining\" \n                         class=\"stat-value\" /&gt;\n            &lt;/ui:VisualElement&gt;\n\n        &lt;/ui:VisualElement&gt;\n\n        &lt;!-- Health bar --&gt;\n        &lt;ui:VisualElement name=\"HealthContainer\" class=\"health-container\"&gt;\n            &lt;ui:ProgressBar name=\"HealthBar\" \n                           binding-path=\"Health\"\n                           low-value=\"0\" \n                           high-value=\"100\"\n                           class=\"health-bar\" /&gt;\n        &lt;/ui:VisualElement&gt;\n\n    &lt;/ui:VisualElement&gt;\n&lt;/ui:UXML&gt;\n</code></pre> <p>HUD.uss</p> <pre><code>:root {\n    --health-high: rgb(76, 217, 100);\n    --health-medium: rgb(255, 204, 0);\n    --health-low: rgb(255, 59, 48);\n    --stat-text: rgb(0, 217, 255);\n}\n\n.hud-container {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    padding: 20px;\n    pointer-events: none; /* Allow clicks to pass through */\n}\n\n.top-bar {\n    flex-direction: row;\n    justify-content: space-between;\n    padding: 20px;\n\n    background-color: rgba(0, 0, 0, 0.4);\n    border-radius: 12px;\n    border-width: 1px;\n    border-color: rgba(255, 255, 255, 0.1);\n}\n\n.stat-group {\n    align-items: center;\n}\n\n.stat-label {\n    font-size: 14px;\n    color: rgba(255, 255, 255, 0.6);\n    margin-bottom: 4px;\n    letter-spacing: 1px;\n}\n\n.stat-value {\n    font-size: 32px;\n    color: var(--stat-text);\n    -unity-font-style: bold;\n}\n\n/* Health bar */\n.health-container {\n    position: absolute;\n    bottom: 40px;\n    left: 50%;\n    translate: -50% 0;\n    width: 400px;\n}\n\n.health-bar {\n    height: 30px;\n    border-radius: 15px;\n    background-color: rgba(0, 0, 0, 0.5);\n    border-width: 2px;\n    border-color: rgba(255, 255, 255, 0.2);\n}\n\n.health-bar &gt; #unity-progress-bar {\n    background-color: var(--health-high);\n    border-radius: 13px;\n    margin: 2px;\n}\n\n/* Dynamic health color (set via C#) */\n.health-bar.low &gt; #unity-progress-bar {\n    background-color: var(--health-low);\n}\n\n.health-bar.medium &gt; #unity-progress-bar {\n    background-color: var(--health-medium);\n}\n</code></pre> <p>HUDController.cs</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class HUDController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private GameData _gameData;\n\n    private VisualElement _root;\n    private Label _scoreValue;\n    private Label _toppingsValue;\n    private Label _timeValue;\n    private ProgressBar _healthBar;\n\n    private SerializedObject _serializedGameData;\n\n    private void OnEnable()\n    {\n        _root = _uiDocument.rootVisualElement;\n\n        // Query elements\n        _scoreValue = _root.Q&lt;Label&gt;(\"ScoreValue\");\n        _toppingsValue = _root.Q&lt;Label&gt;(\"ToppingsValue\");\n        _timeValue = _root.Q&lt;Label&gt;(\"TimeValue\");\n        _healthBar = _root.Q&lt;ProgressBar&gt;(\"HealthBar\");\n\n        // Setup data binding\n        SetupBinding();\n\n        // Setup custom formatters\n        SetupCustomFormatters();\n    }\n\n    private void SetupBinding()\n    {\n        _serializedGameData = new SerializedObject(_gameData);\n        _root.Bind(_serializedGameData);\n    }\n\n    private void SetupCustomFormatters()\n    {\n        // Custom score formatter\n        _root.TrackPropertyValue(\n            _serializedGameData.FindProperty(\"_currentScore\"),\n            property =&gt; {\n                _scoreValue.text = $\"{_gameData.CurrentScore:N0}\";\n            }\n        );\n\n        // Custom time formatter (MM:SS)\n        _root.TrackPropertyValue(\n            _serializedGameData.FindProperty(\"_timeRemaining\"),\n            property =&gt; {\n                int minutes = Mathf.FloorToInt(_gameData.TimeRemaining / 60f);\n                int seconds = Mathf.FloorToInt(_gameData.TimeRemaining % 60f);\n                _timeValue.text = $\"{minutes:00}:{seconds:00}\";\n            }\n        );\n\n        // Health color update\n        _root.TrackPropertyValue(\n            _serializedGameData.FindProperty(\"_health\"),\n            property =&gt; {\n                UpdateHealthColor(_gameData.Health);\n            }\n        );\n    }\n\n    private void UpdateHealthColor(float health)\n    {\n        // Remove all health classes\n        _healthBar.RemoveFromClassList(\"low\");\n        _healthBar.RemoveFromClassList(\"medium\");\n\n        // Add appropriate class\n        if (health &lt; 30f)\n            _healthBar.AddToClassList(\"low\");\n        else if (health &lt; 60f)\n            _healthBar.AddToClassList(\"medium\");\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#10-quest-2-vr-adaptation","title":"10. Quest 2 VR Adaptation","text":""},{"location":"ai/bg_analysis/#key-considerations-for-quest-2","title":"Key Considerations for Quest 2","text":"<ol> <li>Performance Budget: Target 72-90 Hz</li> <li>Resolution: 1832x1920 per eye</li> <li>GPU: Mobile GPU - avoid heavy effects</li> <li>Input: Controller rays + hand tracking</li> </ol>"},{"location":"ai/bg_analysis/#optimized-vr-ui-setup","title":"Optimized VR UI Setup","text":"<p>VRUIManager.cs</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class VRUIManager : MonoBehaviour\n{\n    [Header(\"References\")]\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private Camera _centerEyeCamera;\n\n    [Header(\"VR Settings\")]\n    [SerializeField] private float _uiDistance = 2.5f;\n    [SerializeField] private float _pixelsPerMeter = 1000f;\n    [SerializeField] private Vector2 _panelSize = new Vector2(1.5f, 1.0f); // meters\n\n    [Header(\"Performance\")]\n    [SerializeField] private int _targetFrameRate = 90;\n    [SerializeField] private bool _usePerformanceMode = true;\n\n    private PanelSettings _panelSettings;\n    private RenderTexture _uiRenderTexture;\n\n    private void Awake()\n    {\n        // Set target frame rate for Quest 2\n        Application.targetFrameRate = _targetFrameRate;\n\n        // Setup VR UI\n        SetupVRPanel();\n\n        // Apply performance optimizations\n        if (_usePerformanceMode)\n        {\n            ApplyPerformanceOptimizations();\n        }\n    }\n\n    private void SetupVRPanel()\n    {\n        // Calculate resolution based on panel size and pixels per meter\n        int width = Mathf.RoundToInt(_panelSize.x * _pixelsPerMeter);\n        int height = Mathf.RoundToInt(_panelSize.y * _pixelsPerMeter);\n\n        // Create render texture\n        _uiRenderTexture = new RenderTexture(width, height, 0, RenderTextureFormat.ARGB32);\n        _uiRenderTexture.Create();\n\n        // Create panel settings\n        _panelSettings = ScriptableObject.CreateInstance&lt;PanelSettings&gt;();\n        _panelSettings.targetTexture = _uiRenderTexture;\n        _panelSettings.clearColor = Color.clear;\n        _panelSettings.scaleMode = PanelScaleMode.ScaleWithScreenSize;\n\n        _uiDocument.panelSettings = _panelSettings;\n    }\n\n    private void ApplyPerformanceOptimizations()\n    {\n        var root = _uiDocument.rootVisualElement;\n\n        // Add performance mode class to disable expensive effects\n        root.AddToClassList(\"performance-mode\");\n\n        // Disable antialiasing for better performance\n        _uiRenderTexture.antiAliasing = 1;\n    }\n}\n</code></pre>"},{"location":"ai/bg_analysis/#performance-optimized-uss-for-quest-2","title":"Performance-Optimized USS for Quest 2","text":"<pre><code>/* Quest 2 Performance Mode */\n.performance-mode {\n    /* Disable all transitions */\n    * {\n        transition-duration: 0s !important;\n    }\n}\n\n/* Simplified gradients for mobile GPU */\n.vr-background {\n    background-image: linear-gradient(\n        135deg,\n        rgba(138, 43, 226, 0.3),\n        rgba(0, 217, 255, 0.2)\n    );\n    /* Single gradient instead of multiple layered radials */\n}\n\n/* Reduce border complexity */\n.vr-button {\n    border-radius: 8px; /* Simpler than 12-16px */\n    border-width: 2px;\n}\n\n/* No shadows in VR mode */\n.vr-panel {\n    /* box-shadow: none; */\n}\n</code></pre>"},{"location":"ai/bg_analysis/#summary-best-practices","title":"Summary &amp; Best Practices","text":""},{"location":"ai/bg_analysis/#architecture-takeaways","title":"Architecture Takeaways","text":"<ol> <li>Separation of Concerns:</li> <li>UXML = Structure</li> <li>USS = Styling</li> <li> <p>C# = Logic &amp; Data</p> </li> <li> <p>Data Binding: Use Unity 6's SerializedObject binding for automatic UI updates</p> </li> <li> <p>World Space UI: Render to texture, display on quad in 3D space</p> </li> <li> <p>Themes: CSS variables + runtime updates for dynamic theming</p> </li> <li> <p>Shader Graph: Apply sparingly for premium effects (glass, glow)</p> </li> </ol>"},{"location":"ai/bg_analysis/#quest-2-optimization-checklist","title":"Quest 2 Optimization Checklist","text":"<ul> <li>\u2705 Target 90 Hz, accept 72 Hz minimum</li> <li>\u2705 Use simple gradients (linear &gt; radial)</li> <li>\u2705 Disable transitions in performance mode</li> <li>\u2705 Pool UI elements for dynamic content</li> <li>\u2705 Batch data updates (10-30 Hz)</li> <li>\u2705 Simple border-radius values</li> <li>\u2705 No box-shadows</li> <li>\u2705 Anti-aliasing: 1x or off</li> </ul>"},{"location":"ai/bg_analysis/#resources","title":"Resources","text":"<ul> <li>Bagel Game Repo: https://github.com/Unity-Technologies/BagelGame</li> <li>UI Toolkit Manual: https://docs.unity3d.com/Manual/UIElements.html</li> <li>Shader Graph Samples: Package Manager \u2192 Shader Graph \u2192 Samples</li> <li>Unity Input System: https://docs.unity3d.com/Packages/com.unity.inputsystem@latest</li> </ul> <p>This analysis provides a comprehensive foundation for building UI Toolkit systems inspired by Bagel Game patterns, optimized for Quest 2 VR deployment.</p>"},{"location":"ai/industry_uitk/","title":"Industry-Standard UI Toolkit Practices: Code-First Architecture","text":"<p>Focus: Enterprise-grade UI Toolkit patterns for team environments Audience: Teams transitioning from code-generated UI to scalable architectures Approach: Code-first with separation of concerns and data binding</p>"},{"location":"ai/industry_uitk/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Architecture Patterns Overview</li> <li>Code-First UI Generation</li> <li>Separation of Concerns</li> <li>Data Binding Strategies</li> <li>Factory Pattern Implementation</li> <li>View-Controller Patterns</li> <li>Runtime Customization</li> <li>Team Collaboration Patterns</li> <li>Testing Strategies</li> <li>Performance &amp; Scalability</li> <li>Production Patterns</li> </ol>"},{"location":"ai/industry_uitk/#1-architecture-patterns-overview","title":"1. Architecture Patterns Overview","text":""},{"location":"ai/industry_uitk/#11-common-ui-architecture-patterns","title":"1.1 Common UI Architecture Patterns","text":"<p>Model-View-Controller (MVC)</p> <pre><code>Model (Data) \u2190\u2192 Controller (Logic) \u2190\u2192 View (UI)\n     \u2193                                    \u2191\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Events \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Model-View-Presenter (MVP)</p> <pre><code>Model (Data) \u2190\u2192 Presenter (Logic) \u2190\u2192 View (Interface)\n</code></pre> <p>Model-View-ViewModel (MVVM)</p> <pre><code>Model (Data) \u2190\u2192 ViewModel (Logic + State) \u2190\u2192 View (UI + Binding)\n</code></pre>"},{"location":"ai/industry_uitk/#12-ui-toolkit-best-pattern-choice","title":"1.2 UI Toolkit Best Pattern Choice","text":"<p>Recommendation: MVVM with UI Toolkit</p> <p>Why MVVM for UI Toolkit: - Unity 6 native data binding support - Clear separation of logic and presentation - Easy to unit test ViewModels - Scales well for large teams - Designer-friendly (artists work on UXML/USS) - Developers work on ViewModels and Models</p> <p>Architecture Diagram:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   Application                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2502\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502                       \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  UI Services   \u2502    \u2502  Game Services  \u2502\n\u2502  - UIRouter    \u2502    \u2502  - GameManager  \u2502\n\u2502  - UIFactory   \u2502    \u2502  - AudioManager \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502                      \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                   \u2502\n         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n         \u2502   View Controllers \u2502\n         \u2502  (Screen Logic)    \u2502\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                   \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502              \u2502              \u2502\n\u250c\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2510\n\u2502 View   \u2502   \u2502 ViewModel\u2502   \u2502 Model  \u2502\n\u2502 (UXML  \u2502\u25c4\u2500\u2500\u2524 (Binding \u2502\u25c4\u2500\u2500\u2524 (Data) \u2502\n\u2502  USS)  \u2502   \u2502  Logic)  \u2502   \u2502        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ai/industry_uitk/#13-layer-responsibilities","title":"1.3 Layer Responsibilities","text":"<p>Model Layer - Pure data structures - Business logic - No Unity dependencies - Easily unit testable</p> <p>ViewModel Layer - Presentation logic - Command handling - Property change notifications - Data transformation for view</p> <p>View Layer - UXML structure - USS styling - Minimal C# (wiring only) - Event routing to ViewModel</p> <p>Controller Layer - Orchestrates Views and ViewModels - Lifecycle management - Navigation - Dependency injection</p>"},{"location":"ai/industry_uitk/#2-code-first-ui-generation","title":"2. Code-First UI Generation","text":""},{"location":"ai/industry_uitk/#21-pure-code-ui-generation","title":"2.1 Pure Code UI Generation","text":"<p>Example: Building UI Programmatically</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic static class UIFactory\n{\n    // Create a styled button\n    public static Button CreateButton(string text, string[] classes = null)\n    {\n        var button = new Button { text = text };\n\n        // Apply base styling\n        button.style.minHeight = 50;\n        button.style.minWidth = 200;\n        button.style.marginBottom = 10;\n        button.style.borderRadius = new Length(8, LengthUnit.Pixel);\n\n        // Apply classes if provided\n        if (classes != null)\n        {\n            foreach (var className in classes)\n            {\n                button.AddToClassList(className);\n            }\n        }\n\n        return button;\n    }\n\n    // Create a labeled input field\n    public static VisualElement CreateLabeledField(string label, VisualElement field)\n    {\n        var container = new VisualElement();\n        container.AddToClassList(\"labeled-field\");\n\n        var labelElement = new Label(label);\n        labelElement.AddToClassList(\"field-label\");\n\n        container.Add(labelElement);\n        container.Add(field);\n\n        return container;\n    }\n\n    // Create a panel with header\n    public static VisualElement CreatePanel(string title, VisualElement content)\n    {\n        var panel = new VisualElement();\n        panel.AddToClassList(\"panel\");\n\n        // Header\n        var header = new VisualElement();\n        header.AddToClassList(\"panel-header\");\n\n        var titleLabel = new Label(title);\n        titleLabel.AddToClassList(\"panel-title\");\n        header.Add(titleLabel);\n\n        // Content container\n        var contentContainer = new VisualElement();\n        contentContainer.AddToClassList(\"panel-content\");\n        contentContainer.Add(content);\n\n        panel.Add(header);\n        panel.Add(contentContainer);\n\n        return panel;\n    }\n}\n</code></pre> <p>Usage Example:</p> <pre><code>public class MenuView : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n\n    private void OnEnable()\n    {\n        var root = _uiDocument.rootVisualElement;\n        root.Clear(); // Clear existing content\n\n        // Build UI programmatically\n        var container = new VisualElement();\n        container.AddToClassList(\"menu-container\");\n\n        // Create buttons\n        var playButton = UIFactory.CreateButton(\"Play\", new[] { \"primary-button\" });\n        var settingsButton = UIFactory.CreateButton(\"Settings\", new[] { \"secondary-button\" });\n        var quitButton = UIFactory.CreateButton(\"Quit\", new[] { \"secondary-button\" });\n\n        // Add callbacks\n        playButton.clicked += OnPlayClicked;\n        settingsButton.clicked += OnSettingsClicked;\n        quitButton.clicked += OnQuitClicked;\n\n        // Add to container\n        container.Add(playButton);\n        container.Add(settingsButton);\n        container.Add(quitButton);\n\n        // Add to root\n        root.Add(container);\n    }\n\n    private void OnPlayClicked() { /* ... */ }\n    private void OnSettingsClicked() { /* ... */ }\n    private void OnQuitClicked() { /* ... */ }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#22-template-based-generation","title":"2.2 Template-Based Generation","text":"<p>Hybrid Approach: UXML Templates + Code Generation</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class InventoryItemTemplate\n{\n    // UXML template (can be embedded or loaded from file)\n    private static VisualTreeAsset _template;\n\n    public static VisualElement Create(InventoryItemData data)\n    {\n        // Load template if not cached\n        if (_template == null)\n        {\n            _template = Resources.Load&lt;VisualTreeAsset&gt;(\"UI/Templates/InventoryItem\");\n        }\n\n        // Clone template\n        var instance = _template.CloneTree();\n\n        // Populate with data\n        var icon = instance.Q&lt;VisualElement&gt;(\"Icon\");\n        var nameLabel = instance.Q&lt;Label&gt;(\"ItemName\");\n        var quantityLabel = instance.Q&lt;Label&gt;(\"Quantity\");\n\n        icon.style.backgroundImage = new StyleBackground(data.Icon);\n        nameLabel.text = data.Name;\n        quantityLabel.text = data.Quantity.ToString();\n\n        // Add interaction\n        instance.RegisterCallback&lt;ClickEvent&gt;(evt =&gt; OnItemClicked(data));\n\n        return instance;\n    }\n\n    private static void OnItemClicked(InventoryItemData data)\n    {\n        Debug.Log($\"Clicked item: {data.Name}\");\n    }\n}\n</code></pre> <p>InventoryItem.uxml Template:</p> <pre><code>&lt;ui:UXML xmlns:ui=\"UnityEngine.UIElements\"&gt;\n    &lt;ui:VisualElement class=\"inventory-item\"&gt;\n        &lt;ui:VisualElement name=\"Icon\" class=\"item-icon\" /&gt;\n        &lt;ui:VisualElement class=\"item-info\"&gt;\n            &lt;ui:Label name=\"ItemName\" class=\"item-name\" /&gt;\n            &lt;ui:Label name=\"Quantity\" class=\"item-quantity\" /&gt;\n        &lt;/ui:VisualElement&gt;\n    &lt;/ui:VisualElement&gt;\n&lt;/ui:UXML&gt;\n</code></pre>"},{"location":"ai/industry_uitk/#23-builder-pattern-for-complex-ui","title":"2.3 Builder Pattern for Complex UI","text":"<pre><code>using UnityEngine.UIElements;\n\npublic class FormBuilder\n{\n    private VisualElement _form;\n    private VisualElement _currentSection;\n\n    public FormBuilder()\n    {\n        _form = new VisualElement();\n        _form.AddToClassList(\"form\");\n    }\n\n    public FormBuilder AddSection(string title)\n    {\n        _currentSection = new VisualElement();\n        _currentSection.AddToClassList(\"form-section\");\n\n        if (!string.IsNullOrEmpty(title))\n        {\n            var sectionTitle = new Label(title);\n            sectionTitle.AddToClassList(\"section-title\");\n            _currentSection.Add(sectionTitle);\n        }\n\n        _form.Add(_currentSection);\n        return this;\n    }\n\n    public FormBuilder AddTextField(string label, string bindingPath)\n    {\n        var field = new TextField(label);\n        field.bindingPath = bindingPath;\n        field.AddToClassList(\"form-field\");\n\n        _currentSection.Add(field);\n        return this;\n    }\n\n    public FormBuilder AddSlider(string label, float min, float max, string bindingPath)\n    {\n        var container = new VisualElement();\n        container.AddToClassList(\"form-field\");\n\n        var labelElement = new Label(label);\n        labelElement.AddToClassList(\"field-label\");\n\n        var slider = new Slider(min, max);\n        slider.bindingPath = bindingPath;\n        slider.AddToClassList(\"slider-field\");\n\n        container.Add(labelElement);\n        container.Add(slider);\n\n        _currentSection.Add(container);\n        return this;\n    }\n\n    public FormBuilder AddToggle(string label, string bindingPath)\n    {\n        var toggle = new Toggle(label);\n        toggle.bindingPath = bindingPath;\n        toggle.AddToClassList(\"form-field\");\n\n        _currentSection.Add(toggle);\n        return this;\n    }\n\n    public FormBuilder AddDropdown(string label, System.Collections.Generic.List&lt;string&gt; choices, string bindingPath)\n    {\n        var container = new VisualElement();\n        container.AddToClassList(\"form-field\");\n\n        var labelElement = new Label(label);\n        labelElement.AddToClassList(\"field-label\");\n\n        var dropdown = new DropdownField(choices, 0);\n        dropdown.bindingPath = bindingPath;\n        dropdown.AddToClassList(\"dropdown-field\");\n\n        container.Add(labelElement);\n        container.Add(dropdown);\n\n        _currentSection.Add(container);\n        return this;\n    }\n\n    public FormBuilder AddButton(string text, System.Action onClick)\n    {\n        var button = new Button(onClick) { text = text };\n        button.AddToClassList(\"form-button\");\n\n        _currentSection.Add(button);\n        return this;\n    }\n\n    public VisualElement Build()\n    {\n        return _form;\n    }\n}\n\n// Usage:\nvar settingsForm = new FormBuilder()\n    .AddSection(\"Video Settings\")\n    .AddDropdown(\"Resolution\", new List&lt;string&gt; { \"1920x1080\", \"2560x1440\", \"3840x2160\" }, \"resolution\")\n    .AddToggle(\"Fullscreen\", \"isFullscreen\")\n    .AddSlider(\"Brightness\", 0f, 1f, \"brightness\")\n    .AddSection(\"Audio Settings\")\n    .AddSlider(\"Master Volume\", 0f, 1f, \"masterVolume\")\n    .AddSlider(\"Music Volume\", 0f, 1f, \"musicVolume\")\n    .AddSlider(\"SFX Volume\", 0f, 1f, \"sfxVolume\")\n    .AddSection(\"\")\n    .AddButton(\"Apply\", OnApplySettings)\n    .AddButton(\"Reset\", OnResetSettings)\n    .Build();\n</code></pre>"},{"location":"ai/industry_uitk/#3-separation-of-concerns","title":"3. Separation of Concerns","text":""},{"location":"ai/industry_uitk/#31-layer-structure","title":"3.1 Layer Structure","text":"<p>Project Organization:</p> <pre><code>Assets/\n\u251c\u2500\u2500 Scripts/\n\u2502   \u251c\u2500\u2500 Core/\n\u2502   \u2502   \u251c\u2500\u2500 Models/           # Data models\n\u2502   \u2502   \u251c\u2500\u2500 Services/         # Business logic services\n\u2502   \u2502   \u2514\u2500\u2500 Utilities/        # Helpers, extensions\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 UI/\n\u2502   \u2502   \u251c\u2500\u2500 ViewModels/       # Presentation logic\n\u2502   \u2502   \u251c\u2500\u2500 Views/            # View scripts (minimal)\n\u2502   \u2502   \u251c\u2500\u2500 Controllers/      # Screen controllers\n\u2502   \u2502   \u251c\u2500\u2500 Components/       # Reusable UI components\n\u2502   \u2502   \u251c\u2500\u2500 Factories/        # UI element factories\n\u2502   \u2502   \u2514\u2500\u2500 Bindings/         # Custom binding adapters\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 Application/\n\u2502       \u251c\u2500\u2500 Bootstrap/        # App initialization\n\u2502       \u2514\u2500\u2500 Configuration/    # Settings, config\n\u2502\n\u2514\u2500\u2500 UI/\n    \u251c\u2500\u2500 Documents/            # UIDocument prefabs\n    \u251c\u2500\u2500 Templates/            # UXML templates\n    \u251c\u2500\u2500 Styles/               # USS stylesheets\n    \u2514\u2500\u2500 Assets/               # Icons, sprites\n</code></pre>"},{"location":"ai/industry_uitk/#32-interface-based-design","title":"3.2 Interface-Based Design","text":"<p>View Interface:</p> <pre><code>using UnityEngine.UIElements;\n\n// View interface defines what the view can do\npublic interface IView\n{\n    VisualElement Root { get; }\n    void Show();\n    void Hide();\n    void Dispose();\n}\n\n// Generic view interface with data type\npublic interface IView&lt;TData&gt; : IView\n{\n    void Initialize(TData data);\n}\n\n// Example: Main Menu View\npublic interface IMainMenuView : IView\n{\n    event System.Action PlayClicked;\n    event System.Action SettingsClicked;\n    event System.Action QuitClicked;\n}\n</code></pre> <p>View Implementation:</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class MainMenuView : MonoBehaviour, IMainMenuView\n{\n    [SerializeField] private UIDocument _uiDocument;\n\n    private VisualElement _root;\n    private Button _playButton;\n    private Button _settingsButton;\n    private Button _quitButton;\n\n    // Events\n    public event System.Action PlayClicked;\n    public event System.Action SettingsClicked;\n    public event System.Action QuitClicked;\n\n    // Properties\n    public VisualElement Root =&gt; _root;\n\n    private void Awake()\n    {\n        _root = _uiDocument.rootVisualElement;\n\n        // Query elements\n        _playButton = _root.Q&lt;Button&gt;(\"PlayButton\");\n        _settingsButton = _root.Q&lt;Button&gt;(\"SettingsButton\");\n        _quitButton = _root.Q&lt;Button&gt;(\"QuitButton\");\n\n        // Wire up events\n        _playButton.clicked += () =&gt; PlayClicked?.Invoke();\n        _settingsButton.clicked += () =&gt; SettingsClicked?.Invoke();\n        _quitButton.clicked += () =&gt; QuitClicked?.Invoke();\n    }\n\n    public void Show()\n    {\n        _root.style.display = DisplayStyle.Flex;\n        _root.style.opacity = 1;\n    }\n\n    public void Hide()\n    {\n        _root.style.display = DisplayStyle.None;\n    }\n\n    public void Dispose()\n    {\n        // Clean up event subscriptions\n        PlayClicked = null;\n        SettingsClicked = null;\n        QuitClicked = null;\n    }\n}\n</code></pre> <p>Controller:</p> <pre><code>using UnityEngine;\n\npublic class MainMenuController : MonoBehaviour\n{\n    [SerializeField] private MainMenuView _view;\n\n    // Injected dependencies\n    private ISceneLoader _sceneLoader;\n    private IAudioService _audioService;\n\n    public void Initialize(ISceneLoader sceneLoader, IAudioService audioService)\n    {\n        _sceneLoader = sceneLoader;\n        _audioService = audioService;\n    }\n\n    private void OnEnable()\n    {\n        // Subscribe to view events\n        _view.PlayClicked += OnPlayClicked;\n        _view.SettingsClicked += OnSettingsClicked;\n        _view.QuitClicked += OnQuitClicked;\n\n        _view.Show();\n    }\n\n    private void OnDisable()\n    {\n        // Unsubscribe from view events\n        _view.PlayClicked -= OnPlayClicked;\n        _view.SettingsClicked -= OnSettingsClicked;\n        _view.QuitClicked -= OnQuitClicked;\n    }\n\n    private void OnPlayClicked()\n    {\n        _audioService.PlaySFX(\"ButtonClick\");\n        _sceneLoader.LoadScene(\"GameScene\");\n    }\n\n    private void OnSettingsClicked()\n    {\n        _audioService.PlaySFX(\"ButtonClick\");\n        // Open settings panel\n    }\n\n    private void OnQuitClicked()\n    {\n        _audioService.PlaySFX(\"ButtonClick\");\n        Application.Quit();\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#33-command-pattern-for-actions","title":"3.3 Command Pattern for Actions","text":"<p>Command Interface:</p> <pre><code>public interface ICommand\n{\n    void Execute();\n    void Undo();\n    bool CanExecute();\n}\n\npublic interface ICommand&lt;T&gt; : ICommand\n{\n    void Execute(T parameter);\n}\n</code></pre> <p>Command Implementation:</p> <pre><code>using UnityEngine;\n\npublic class LoadSceneCommand : ICommand&lt;string&gt;\n{\n    private readonly ISceneLoader _sceneLoader;\n    private readonly IAudioService _audioService;\n\n    public LoadSceneCommand(ISceneLoader sceneLoader, IAudioService audioService)\n    {\n        _sceneLoader = sceneLoader;\n        _audioService = audioService;\n    }\n\n    public bool CanExecute()\n    {\n        return !_sceneLoader.IsLoading;\n    }\n\n    public void Execute(string sceneName)\n    {\n        if (!CanExecute()) return;\n\n        _audioService.PlaySFX(\"SceneTransition\");\n        _sceneLoader.LoadScene(sceneName);\n    }\n\n    public void Execute()\n    {\n        // Default implementation\n    }\n\n    public void Undo()\n    {\n        // Not applicable for scene loading\n    }\n}\n</code></pre> <p>Using Commands in Views:</p> <pre><code>public class MainMenuViewModel\n{\n    private readonly ICommand&lt;string&gt; _loadSceneCommand;\n\n    public MainMenuViewModel(ICommand&lt;string&gt; loadSceneCommand)\n    {\n        _loadSceneCommand = loadSceneCommand;\n    }\n\n    public void OnPlayButtonClicked()\n    {\n        if (_loadSceneCommand.CanExecute())\n        {\n            _loadSceneCommand.Execute(\"GameScene\");\n        }\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#4-data-binding-strategies","title":"4. Data Binding Strategies","text":""},{"location":"ai/industry_uitk/#41-observable-pattern-manual-binding","title":"4.1 Observable Pattern (Manual Binding)","text":"<p>Observable Property:</p> <pre><code>using System;\n\npublic class ObservableProperty&lt;T&gt;\n{\n    private T _value;\n\n    public event Action&lt;T&gt; ValueChanged;\n\n    public T Value\n    {\n        get =&gt; _value;\n        set\n        {\n            if (!Equals(_value, value))\n            {\n                _value = value;\n                ValueChanged?.Invoke(_value);\n            }\n        }\n    }\n\n    public ObservableProperty(T initialValue = default)\n    {\n        _value = initialValue;\n    }\n}\n</code></pre> <p>Observable Collection:</p> <pre><code>using System;\nusing System.Collections.Generic;\n\npublic class ObservableCollection&lt;T&gt; : List&lt;T&gt;\n{\n    public event Action&lt;T&gt; ItemAdded;\n    public event Action&lt;T&gt; ItemRemoved;\n    public event Action CollectionCleared;\n    public event Action CollectionChanged;\n\n    public new void Add(T item)\n    {\n        base.Add(item);\n        ItemAdded?.Invoke(item);\n        CollectionChanged?.Invoke();\n    }\n\n    public new bool Remove(T item)\n    {\n        bool removed = base.Remove(item);\n        if (removed)\n        {\n            ItemRemoved?.Invoke(item);\n            CollectionChanged?.Invoke();\n        }\n        return removed;\n    }\n\n    public new void Clear()\n    {\n        base.Clear();\n        CollectionCleared?.Invoke();\n        CollectionChanged?.Invoke();\n    }\n}\n</code></pre> <p>ViewModel with Observables:</p> <pre><code>public class PlayerViewModel\n{\n    // Observable properties\n    public ObservableProperty&lt;string&gt; PlayerName { get; }\n    public ObservableProperty&lt;int&gt; Health { get; }\n    public ObservableProperty&lt;int&gt; MaxHealth { get; }\n    public ObservableProperty&lt;int&gt; Score { get; }\n\n    // Computed property\n    public ObservableProperty&lt;float&gt; HealthPercentage { get; }\n\n    public PlayerViewModel(PlayerModel model)\n    {\n        PlayerName = new ObservableProperty&lt;string&gt;(model.Name);\n        Health = new ObservableProperty&lt;int&gt;(model.Health);\n        MaxHealth = new ObservableProperty&lt;int&gt;(model.MaxHealth);\n        Score = new ObservableProperty&lt;int&gt;(model.Score);\n        HealthPercentage = new ObservableProperty&lt;float&gt;(1f);\n\n        // Update computed property when dependencies change\n        Health.ValueChanged += _ =&gt; UpdateHealthPercentage();\n        MaxHealth.ValueChanged += _ =&gt; UpdateHealthPercentage();\n    }\n\n    private void UpdateHealthPercentage()\n    {\n        HealthPercentage.Value = (float)Health.Value / MaxHealth.Value;\n    }\n\n    public void TakeDamage(int damage)\n    {\n        Health.Value = Mathf.Max(0, Health.Value - damage);\n    }\n\n    public void Heal(int amount)\n    {\n        Health.Value = Mathf.Min(MaxHealth.Value, Health.Value + amount);\n    }\n\n    public void AddScore(int points)\n    {\n        Score.Value += points;\n    }\n}\n</code></pre> <p>View Binding:</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class PlayerHUDView : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n\n    private Label _playerNameLabel;\n    private Label _healthLabel;\n    private ProgressBar _healthBar;\n    private Label _scoreLabel;\n\n    private PlayerViewModel _viewModel;\n\n    public void Initialize(PlayerViewModel viewModel)\n    {\n        _viewModel = viewModel;\n\n        // Get UI elements\n        var root = _uiDocument.rootVisualElement;\n        _playerNameLabel = root.Q&lt;Label&gt;(\"PlayerName\");\n        _healthLabel = root.Q&lt;Label&gt;(\"HealthValue\");\n        _healthBar = root.Q&lt;ProgressBar&gt;(\"HealthBar\");\n        _scoreLabel = root.Q&lt;Label&gt;(\"ScoreValue\");\n\n        // Bind to observables\n        _viewModel.PlayerName.ValueChanged += OnPlayerNameChanged;\n        _viewModel.Health.ValueChanged += OnHealthChanged;\n        _viewModel.HealthPercentage.ValueChanged += OnHealthPercentageChanged;\n        _viewModel.Score.ValueChanged += OnScoreChanged;\n\n        // Initialize with current values\n        OnPlayerNameChanged(_viewModel.PlayerName.Value);\n        OnHealthChanged(_viewModel.Health.Value);\n        OnHealthPercentageChanged(_viewModel.HealthPercentage.Value);\n        OnScoreChanged(_viewModel.Score.Value);\n    }\n\n    private void OnDestroy()\n    {\n        // Unsubscribe from observables\n        if (_viewModel != null)\n        {\n            _viewModel.PlayerName.ValueChanged -= OnPlayerNameChanged;\n            _viewModel.Health.ValueChanged -= OnHealthChanged;\n            _viewModel.HealthPercentage.ValueChanged -= OnHealthPercentageChanged;\n            _viewModel.Score.ValueChanged -= OnScoreChanged;\n        }\n    }\n\n    private void OnPlayerNameChanged(string name)\n    {\n        _playerNameLabel.text = name;\n    }\n\n    private void OnHealthChanged(int health)\n    {\n        _healthLabel.text = $\"{health}/{_viewModel.MaxHealth.Value}\";\n    }\n\n    private void OnHealthPercentageChanged(float percentage)\n    {\n        _healthBar.value = percentage * 100f;\n\n        // Update health bar color based on percentage\n        if (percentage &lt; 0.3f)\n            _healthBar.RemoveFromClassList(\"health-ok\");\n            _healthBar.AddToClassList(\"health-low\");\n        else\n            _healthBar.RemoveFromClassList(\"health-low\");\n            _healthBar.AddToClassList(\"health-ok\");\n    }\n\n    private void OnScoreChanged(int score)\n    {\n        _scoreLabel.text = score.ToString(\"N0\");\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#42-unity-6-native-data-binding","title":"4.2 Unity 6 Native Data Binding","text":"<p>ScriptableObject Model with Binding:</p> <pre><code>using UnityEngine;\n\n[CreateAssetMenu(fileName = \"GameSettings\", menuName = \"Game/Settings\")]\npublic class GameSettings : ScriptableObject\n{\n    [SerializeField] private float _masterVolume = 1f;\n    [SerializeField] private float _musicVolume = 1f;\n    [SerializeField] private float _sfxVolume = 1f;\n    [SerializeField] private bool _isFullscreen = true;\n    [SerializeField] private int _resolutionIndex = 0;\n\n    public float MasterVolume\n    {\n        get =&gt; _masterVolume;\n        set =&gt; _masterVolume = Mathf.Clamp01(value);\n    }\n\n    public float MusicVolume\n    {\n        get =&gt; _musicVolume;\n        set =&gt; _musicVolume = Mathf.Clamp01(value);\n    }\n\n    public float SfxVolume\n    {\n        get =&gt; _sfxVolume;\n        set =&gt; _sfxVolume = Mathf.Clamp01(value);\n    }\n\n    public bool IsFullscreen\n    {\n        get =&gt; _isFullscreen;\n        set =&gt; _isFullscreen = value;\n    }\n\n    public int ResolutionIndex\n    {\n        get =&gt; _resolutionIndex;\n        set =&gt; _resolutionIndex = value;\n    }\n}\n</code></pre> <p>UXML with Binding Paths:</p> <pre><code>&lt;ui:UXML xmlns:ui=\"UnityEngine.UIElements\"&gt;\n    &lt;ui:VisualElement class=\"settings-panel\"&gt;\n\n        &lt;ui:Label text=\"Audio Settings\" class=\"section-title\" /&gt;\n\n        &lt;ui:Slider name=\"MasterVolumeSlider\" \n                   label=\"Master Volume\"\n                   binding-path=\"_masterVolume\"\n                   low-value=\"0\" \n                   high-value=\"1\"\n                   class=\"volume-slider\" /&gt;\n\n        &lt;ui:Slider name=\"MusicVolumeSlider\" \n                   label=\"Music Volume\"\n                   binding-path=\"_musicVolume\"\n                   low-value=\"0\" \n                   high-value=\"1\"\n                   class=\"volume-slider\" /&gt;\n\n        &lt;ui:Slider name=\"SfxVolumeSlider\" \n                   label=\"SFX Volume\"\n                   binding-path=\"_sfxVolume\"\n                   low-value=\"0\" \n                   high-value=\"1\"\n                   class=\"volume-slider\" /&gt;\n\n        &lt;ui:Label text=\"Video Settings\" class=\"section-title\" /&gt;\n\n        &lt;ui:Toggle name=\"FullscreenToggle\" \n                   label=\"Fullscreen\"\n                   binding-path=\"_isFullscreen\"\n                   class=\"settings-toggle\" /&gt;\n\n        &lt;ui:DropdownField name=\"ResolutionDropdown\" \n                          label=\"Resolution\"\n                          binding-path=\"_resolutionIndex\"\n                          class=\"settings-dropdown\" /&gt;\n\n    &lt;/ui:VisualElement&gt;\n&lt;/ui:UXML&gt;\n</code></pre> <p>View Controller with Binding:</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class SettingsViewController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private GameSettings _settings;\n\n    private SerializedObject _serializedSettings;\n    private Slider _masterVolumeSlider;\n    private AudioSource _audioSource;\n\n    private void OnEnable()\n    {\n        var root = _uiDocument.rootVisualElement;\n\n        // Setup binding\n        _serializedSettings = new SerializedObject(_settings);\n        root.Bind(_serializedSettings);\n\n        // Get slider reference for immediate audio feedback\n        _masterVolumeSlider = root.Q&lt;Slider&gt;(\"MasterVolumeSlider\");\n\n        // Add immediate feedback for volume changes\n        _masterVolumeSlider.RegisterValueChangedCallback(evt =&gt;\n        {\n            AudioListener.volume = evt.newValue;\n        });\n    }\n\n    private void OnDisable()\n    {\n        // Unbind\n        var root = _uiDocument.rootVisualElement;\n        root.Unbind();\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#43-reactive-binding-with-unirx-advanced","title":"4.3 Reactive Binding with UniRx (Advanced)","text":"<p>Note: This requires UniRx package from GitHub.</p> <pre><code>using UniRx;\nusing UnityEngine;\n\npublic class ReactivePlayerViewModel\n{\n    // Reactive properties\n    public ReactiveProperty&lt;string&gt; PlayerName { get; }\n    public ReactiveProperty&lt;int&gt; Health { get; }\n    public ReactiveProperty&lt;int&gt; MaxHealth { get; }\n    public ReactiveProperty&lt;int&gt; Score { get; }\n\n    // Computed reactive property\n    public IReadOnlyReactiveProperty&lt;float&gt; HealthPercentage { get; }\n\n    public ReactivePlayerViewModel(PlayerModel model)\n    {\n        PlayerName = new ReactiveProperty&lt;string&gt;(model.Name);\n        Health = new ReactiveProperty&lt;int&gt;(model.Health);\n        MaxHealth = new ReactiveProperty&lt;int&gt;(model.MaxHealth);\n        Score = new ReactiveProperty&lt;int&gt;(model.Score);\n\n        // Computed property using CombineLatest\n        HealthPercentage = Health\n            .CombineLatest(MaxHealth, (h, mh) =&gt; (float)h / mh)\n            .ToReadOnlyReactiveProperty();\n    }\n}\n\n// View binding with UniRx\npublic class ReactivePlayerHUDView : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n\n    private Label _healthLabel;\n    private ProgressBar _healthBar;\n    private ReactivePlayerViewModel _viewModel;\n    private CompositeDisposable _disposables = new CompositeDisposable();\n\n    public void Initialize(ReactivePlayerViewModel viewModel)\n    {\n        _viewModel = viewModel;\n\n        var root = _uiDocument.rootVisualElement;\n        _healthLabel = root.Q&lt;Label&gt;(\"HealthValue\");\n        _healthBar = root.Q&lt;ProgressBar&gt;(\"HealthBar\");\n\n        // Bind with automatic disposal\n        _viewModel.Health\n            .CombineLatest(_viewModel.MaxHealth, (h, mh) =&gt; $\"{h}/{mh}\")\n            .Subscribe(text =&gt; _healthLabel.text = text)\n            .AddTo(_disposables);\n\n        _viewModel.HealthPercentage\n            .Subscribe(percentage =&gt; _healthBar.value = percentage * 100f)\n            .AddTo(_disposables);\n    }\n\n    private void OnDestroy()\n    {\n        _disposables.Dispose();\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#5-factory-pattern-implementation","title":"5. Factory Pattern Implementation","text":""},{"location":"ai/industry_uitk/#51-ui-element-factory","title":"5.1 UI Element Factory","text":"<p>Base Factory Interface:</p> <pre><code>using UnityEngine.UIElements;\n\npublic interface IUIElementFactory&lt;out T&gt; where T : VisualElement\n{\n    T Create();\n}\n\npublic interface IUIElementFactory&lt;out T, in TData&gt; where T : VisualElement\n{\n    T Create(TData data);\n}\n</code></pre> <p>Button Factory:</p> <pre><code>using UnityEngine.UIElements;\n\npublic enum ButtonStyle\n{\n    Primary,\n    Secondary,\n    Danger,\n    Success\n}\n\npublic class ButtonFactory : IUIElementFactory&lt;Button, ButtonFactoryData&gt;\n{\n    public Button Create(ButtonFactoryData data)\n    {\n        var button = new Button\n        {\n            text = data.Text\n        };\n\n        // Apply style class\n        button.AddToClassList(\"btn\");\n        button.AddToClassList(GetStyleClass(data.Style));\n\n        // Apply size class if specified\n        if (data.Size != ButtonSize.Default)\n        {\n            button.AddToClassList(GetSizeClass(data.Size));\n        }\n\n        // Add icon if specified\n        if (data.Icon != null)\n        {\n            var icon = new VisualElement();\n            icon.AddToClassList(\"btn-icon\");\n            icon.style.backgroundImage = new StyleBackground(data.Icon);\n            button.Insert(0, icon);\n        }\n\n        // Add callback if specified\n        if (data.OnClick != null)\n        {\n            button.clicked += data.OnClick;\n        }\n\n        return button;\n    }\n\n    private string GetStyleClass(ButtonStyle style)\n    {\n        return style switch\n        {\n            ButtonStyle.Primary =&gt; \"btn-primary\",\n            ButtonStyle.Secondary =&gt; \"btn-secondary\",\n            ButtonStyle.Danger =&gt; \"btn-danger\",\n            ButtonStyle.Success =&gt; \"btn-success\",\n            _ =&gt; \"btn-primary\"\n        };\n    }\n\n    private string GetSizeClass(ButtonSize size)\n    {\n        return size switch\n        {\n            ButtonSize.Small =&gt; \"btn-sm\",\n            ButtonSize.Large =&gt; \"btn-lg\",\n            _ =&gt; \"\"\n        };\n    }\n}\n\npublic class ButtonFactoryData\n{\n    public string Text { get; set; }\n    public ButtonStyle Style { get; set; } = ButtonStyle.Primary;\n    public ButtonSize Size { get; set; } = ButtonSize.Default;\n    public Sprite Icon { get; set; }\n    public System.Action OnClick { get; set; }\n}\n\npublic enum ButtonSize\n{\n    Default,\n    Small,\n    Large\n}\n</code></pre> <p>Usage:</p> <pre><code>var buttonFactory = new ButtonFactory();\n\nvar playButton = buttonFactory.Create(new ButtonFactoryData\n{\n    Text = \"Play\",\n    Style = ButtonStyle.Primary,\n    Size = ButtonSize.Large,\n    OnClick = () =&gt; Debug.Log(\"Play clicked\")\n});\n\nvar cancelButton = buttonFactory.Create(new ButtonFactoryData\n{\n    Text = \"Cancel\",\n    Style = ButtonStyle.Secondary,\n    OnClick = () =&gt; Debug.Log(\"Cancel clicked\")\n});\n</code></pre>"},{"location":"ai/industry_uitk/#52-panel-factory","title":"5.2 Panel Factory","text":"<p>Panel Factory:</p> <pre><code>using UnityEngine.UIElements;\n\npublic class PanelFactory : IUIElementFactory&lt;VisualElement, PanelFactoryData&gt;\n{\n    public VisualElement Create(PanelFactoryData data)\n    {\n        var panel = new VisualElement();\n        panel.AddToClassList(\"panel\");\n        panel.AddToClassList(GetThemeClass(data.Theme));\n\n        // Header\n        if (!string.IsNullOrEmpty(data.Title))\n        {\n            var header = CreateHeader(data.Title, data.HeaderActions);\n            panel.Add(header);\n        }\n\n        // Content\n        var content = new VisualElement();\n        content.AddToClassList(\"panel-content\");\n\n        if (data.Content != null)\n        {\n            content.Add(data.Content);\n        }\n\n        panel.Add(content);\n\n        // Footer\n        if (data.FooterButtons != null &amp;&amp; data.FooterButtons.Count &gt; 0)\n        {\n            var footer = CreateFooter(data.FooterButtons);\n            panel.Add(footer);\n        }\n\n        return panel;\n    }\n\n    private VisualElement CreateHeader(string title, System.Collections.Generic.List&lt;Button&gt; actions)\n    {\n        var header = new VisualElement();\n        header.AddToClassList(\"panel-header\");\n\n        var titleLabel = new Label(title);\n        titleLabel.AddToClassList(\"panel-title\");\n        header.Add(titleLabel);\n\n        if (actions != null &amp;&amp; actions.Count &gt; 0)\n        {\n            var actionsContainer = new VisualElement();\n            actionsContainer.AddToClassList(\"panel-header-actions\");\n\n            foreach (var action in actions)\n            {\n                actionsContainer.Add(action);\n            }\n\n            header.Add(actionsContainer);\n        }\n\n        return header;\n    }\n\n    private VisualElement CreateFooter(System.Collections.Generic.List&lt;Button&gt; buttons)\n    {\n        var footer = new VisualElement();\n        footer.AddToClassList(\"panel-footer\");\n\n        foreach (var button in buttons)\n        {\n            footer.Add(button);\n        }\n\n        return footer;\n    }\n\n    private string GetThemeClass(PanelTheme theme)\n    {\n        return theme switch\n        {\n            PanelTheme.Light =&gt; \"panel-light\",\n            PanelTheme.Dark =&gt; \"panel-dark\",\n            PanelTheme.Glass =&gt; \"panel-glass\",\n            _ =&gt; \"panel-dark\"\n        };\n    }\n}\n\npublic class PanelFactoryData\n{\n    public string Title { get; set; }\n    public PanelTheme Theme { get; set; } = PanelTheme.Dark;\n    public VisualElement Content { get; set; }\n    public System.Collections.Generic.List&lt;Button&gt; HeaderActions { get; set; }\n    public System.Collections.Generic.List&lt;Button&gt; FooterButtons { get; set; }\n}\n\npublic enum PanelTheme\n{\n    Light,\n    Dark,\n    Glass\n}\n</code></pre>"},{"location":"ai/industry_uitk/#53-abstract-factory-pattern","title":"5.3 Abstract Factory Pattern","text":"<p>UI Component Family:</p> <pre><code>using UnityEngine.UIElements;\n\n// Abstract factory interface\npublic interface IUIComponentFactory\n{\n    Button CreateButton(string text, System.Action onClick = null);\n    TextField CreateTextField(string label, string bindingPath = null);\n    VisualElement CreatePanel(string title);\n    Label CreateLabel(string text);\n}\n\n// Modern theme factory\npublic class ModernUIFactory : IUIComponentFactory\n{\n    public Button CreateButton(string text, System.Action onClick = null)\n    {\n        var button = new Button { text = text };\n        button.AddToClassList(\"modern-button\");\n\n        if (onClick != null)\n        {\n            button.clicked += onClick;\n        }\n\n        return button;\n    }\n\n    public TextField CreateTextField(string label, string bindingPath = null)\n    {\n        var field = new TextField(label);\n        field.AddToClassList(\"modern-textfield\");\n\n        if (!string.IsNullOrEmpty(bindingPath))\n        {\n            field.bindingPath = bindingPath;\n        }\n\n        return field;\n    }\n\n    public VisualElement CreatePanel(string title)\n    {\n        var panel = new VisualElement();\n        panel.AddToClassList(\"modern-panel\");\n\n        if (!string.IsNullOrEmpty(title))\n        {\n            var titleLabel = new Label(title);\n            titleLabel.AddToClassList(\"modern-panel-title\");\n            panel.Add(titleLabel);\n        }\n\n        return panel;\n    }\n\n    public Label CreateLabel(string text)\n    {\n        var label = new Label(text);\n        label.AddToClassList(\"modern-label\");\n        return label;\n    }\n}\n\n// Retro theme factory\npublic class RetroUIFactory : IUIComponentFactory\n{\n    public Button CreateButton(string text, System.Action onClick = null)\n    {\n        var button = new Button { text = text };\n        button.AddToClassList(\"retro-button\");\n\n        if (onClick != null)\n        {\n            button.clicked += onClick;\n        }\n\n        return button;\n    }\n\n    public TextField CreateTextField(string label, string bindingPath = null)\n    {\n        var field = new TextField(label);\n        field.AddToClassList(\"retro-textfield\");\n\n        if (!string.IsNullOrEmpty(bindingPath))\n        {\n            field.bindingPath = bindingPath;\n        }\n\n        return field;\n    }\n\n    public VisualElement CreatePanel(string title)\n    {\n        var panel = new VisualElement();\n        panel.AddToClassList(\"retro-panel\");\n\n        if (!string.IsNullOrEmpty(title))\n        {\n            var titleLabel = new Label(title);\n            titleLabel.AddToClassList(\"retro-panel-title\");\n            panel.Add(titleLabel);\n        }\n\n        return panel;\n    }\n\n    public Label CreateLabel(string text)\n    {\n        var label = new Label(text);\n        label.AddToClassList(\"retro-label\");\n        return label;\n    }\n}\n\n// Usage with dependency injection\npublic class UIBuilder\n{\n    private readonly IUIComponentFactory _factory;\n\n    public UIBuilder(IUIComponentFactory factory)\n    {\n        _factory = factory;\n    }\n\n    public VisualElement BuildLoginForm()\n    {\n        var panel = _factory.CreatePanel(\"Login\");\n\n        var usernameField = _factory.CreateTextField(\"Username\");\n        var passwordField = _factory.CreateTextField(\"Password\");\n\n        var loginButton = _factory.CreateButton(\"Login\", OnLoginClicked);\n        var cancelButton = _factory.CreateButton(\"Cancel\", OnCancelClicked);\n\n        panel.Add(usernameField);\n        panel.Add(passwordField);\n        panel.Add(loginButton);\n        panel.Add(cancelButton);\n\n        return panel;\n    }\n\n    private void OnLoginClicked() { /* ... */ }\n    private void OnCancelClicked() { /* ... */ }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#6-view-controller-patterns","title":"6. View-Controller Patterns","text":""},{"location":"ai/industry_uitk/#61-screen-controller-pattern","title":"6.1 Screen Controller Pattern","text":"<p>Base Screen Controller:</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic abstract class ScreenController : MonoBehaviour\n{\n    [SerializeField] protected UIDocument _uiDocument;\n\n    protected VisualElement Root =&gt; _uiDocument.rootVisualElement;\n\n    public virtual void Initialize()\n    {\n        // Override in derived classes\n    }\n\n    public virtual void Show()\n    {\n        Root.style.display = DisplayStyle.Flex;\n        OnShown();\n    }\n\n    public virtual void Hide()\n    {\n        Root.style.display = DisplayStyle.None;\n        OnHidden();\n    }\n\n    protected virtual void OnShown() { }\n    protected virtual void OnHidden() { }\n\n    public virtual void Dispose()\n    {\n        // Clean up resources\n    }\n}\n</code></pre> <p>Concrete Screen Controller:</p> <pre><code>public class InventoryScreenController : ScreenController\n{\n    [SerializeField] private InventoryViewModel _viewModel;\n\n    private VisualElement _itemsContainer;\n    private Button _closeButton;\n    private TextField _searchField;\n\n    public override void Initialize()\n    {\n        base.Initialize();\n\n        // Query elements\n        _itemsContainer = Root.Q&lt;VisualElement&gt;(\"ItemsContainer\");\n        _closeButton = Root.Q&lt;Button&gt;(\"CloseButton\");\n        _searchField = Root.Q&lt;TextField&gt;(\"SearchField\");\n\n        // Wire up events\n        _closeButton.clicked += OnCloseClicked;\n        _searchField.RegisterValueChangedCallback(OnSearchChanged);\n\n        // Bind to ViewModel\n        BindToViewModel();\n    }\n\n    private void BindToViewModel()\n    {\n        _viewModel.Items.CollectionChanged += RefreshItems;\n        RefreshItems();\n    }\n\n    private void RefreshItems()\n    {\n        _itemsContainer.Clear();\n\n        foreach (var item in _viewModel.FilteredItems)\n        {\n            var itemElement = CreateItemElement(item);\n            _itemsContainer.Add(itemElement);\n        }\n    }\n\n    private VisualElement CreateItemElement(InventoryItemData item)\n    {\n        var itemElement = new VisualElement();\n        itemElement.AddToClassList(\"inventory-item\");\n\n        var icon = new VisualElement();\n        icon.style.backgroundImage = new StyleBackground(item.Icon);\n        icon.AddToClassList(\"item-icon\");\n\n        var nameLabel = new Label(item.Name);\n        nameLabel.AddToClassList(\"item-name\");\n\n        var quantityLabel = new Label($\"x{item.Quantity}\");\n        quantityLabel.AddToClassList(\"item-quantity\");\n\n        itemElement.Add(icon);\n        itemElement.Add(nameLabel);\n        itemElement.Add(quantityLabel);\n\n        // Click handler\n        itemElement.RegisterCallback&lt;ClickEvent&gt;(evt =&gt; OnItemClicked(item));\n\n        return itemElement;\n    }\n\n    private void OnItemClicked(InventoryItemData item)\n    {\n        _viewModel.SelectItem(item);\n    }\n\n    private void OnSearchChanged(ChangeEvent&lt;string&gt; evt)\n    {\n        _viewModel.SetSearchFilter(evt.newValue);\n    }\n\n    private void OnCloseClicked()\n    {\n        Hide();\n    }\n\n    public override void Dispose()\n    {\n        base.Dispose();\n\n        _viewModel.Items.CollectionChanged -= RefreshItems;\n        _closeButton.clicked -= OnCloseClicked;\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#62-screen-manager-navigation-system","title":"6.2 Screen Manager / Navigation System","text":"<p>Screen Manager:</p> <pre><code>using System.Collections.Generic;\nusing UnityEngine;\n\npublic class ScreenManager : MonoBehaviour\n{\n    private static ScreenManager _instance;\n    public static ScreenManager Instance =&gt; _instance;\n\n    private Dictionary&lt;string, ScreenController&gt; _screens = new Dictionary&lt;string, ScreenController&gt;();\n    private Stack&lt;ScreenController&gt; _history = new Stack&lt;ScreenController&gt;();\n    private ScreenController _currentScreen;\n\n    private void Awake()\n    {\n        if (_instance != null &amp;&amp; _instance != this)\n        {\n            Destroy(gameObject);\n            return;\n        }\n\n        _instance = this;\n        DontDestroyOnLoad(gameObject);\n    }\n\n    public void RegisterScreen(string screenId, ScreenController screen)\n    {\n        if (!_screens.ContainsKey(screenId))\n        {\n            _screens.Add(screenId, screen);\n            screen.Initialize();\n            screen.Hide();\n        }\n    }\n\n    public void ShowScreen(string screenId, bool addToHistory = true)\n    {\n        if (!_screens.TryGetValue(screenId, out var screen))\n        {\n            Debug.LogError($\"Screen '{screenId}' not registered!\");\n            return;\n        }\n\n        // Hide current screen\n        if (_currentScreen != null)\n        {\n            _currentScreen.Hide();\n\n            if (addToHistory)\n            {\n                _history.Push(_currentScreen);\n            }\n        }\n\n        // Show new screen\n        _currentScreen = screen;\n        _currentScreen.Show();\n    }\n\n    public void GoBack()\n    {\n        if (_history.Count &gt; 0)\n        {\n            var previousScreen = _history.Pop();\n\n            if (_currentScreen != null)\n            {\n                _currentScreen.Hide();\n            }\n\n            _currentScreen = previousScreen;\n            _currentScreen.Show();\n        }\n    }\n\n    public void ClearHistory()\n    {\n        _history.Clear();\n    }\n\n    public T GetScreen&lt;T&gt;(string screenId) where T : ScreenController\n    {\n        if (_screens.TryGetValue(screenId, out var screen))\n        {\n            return screen as T;\n        }\n\n        return null;\n    }\n}\n\n// Usage:\npublic class GameBootstrap : MonoBehaviour\n{\n    [SerializeField] private ScreenController _mainMenuScreen;\n    [SerializeField] private ScreenController _gameplayScreen;\n    [SerializeField] private ScreenController _settingsScreen;\n\n    private void Start()\n    {\n        var screenManager = ScreenManager.Instance;\n\n        screenManager.RegisterScreen(\"MainMenu\", _mainMenuScreen);\n        screenManager.RegisterScreen(\"Gameplay\", _gameplayScreen);\n        screenManager.RegisterScreen(\"Settings\", _settingsScreen);\n\n        screenManager.ShowScreen(\"MainMenu\");\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#63-presenter-pattern-mvp","title":"6.3 Presenter Pattern (MVP)","text":"<p>Presenter Interface:</p> <pre><code>public interface IPresenter\n{\n    void Initialize();\n    void OnViewShown();\n    void OnViewHidden();\n    void Dispose();\n}\n\npublic interface IPresenter&lt;TView&gt; : IPresenter where TView : IView\n{\n    TView View { get; set; }\n}\n</code></pre> <p>Concrete Presenter:</p> <pre><code>public class InventoryPresenter : IPresenter&lt;IInventoryView&gt;\n{\n    public IInventoryView View { get; set; }\n\n    private readonly InventoryService _inventoryService;\n    private readonly IUIFactory _uiFactory;\n\n    public InventoryPresenter(InventoryService inventoryService, IUIFactory uiFactory)\n    {\n        _inventoryService = inventoryService;\n        _uiFactory = uiFactory;\n    }\n\n    public void Initialize()\n    {\n        // Subscribe to view events\n        View.ItemSelected += OnItemSelected;\n        View.SearchChanged += OnSearchChanged;\n        View.CloseRequested += OnCloseRequested;\n\n        // Subscribe to model events\n        _inventoryService.InventoryChanged += OnInventoryChanged;\n\n        // Initial data load\n        RefreshView();\n    }\n\n    public void OnViewShown()\n    {\n        RefreshView();\n    }\n\n    public void OnViewHidden()\n    {\n        // Cleanup if needed\n    }\n\n    public void Dispose()\n    {\n        // Unsubscribe from events\n        View.ItemSelected -= OnItemSelected;\n        View.SearchChanged -= OnSearchChanged;\n        View.CloseRequested -= OnCloseRequested;\n\n        _inventoryService.InventoryChanged -= OnInventoryChanged;\n    }\n\n    private void RefreshView()\n    {\n        var items = _inventoryService.GetAllItems();\n        View.DisplayItems(items);\n    }\n\n    private void OnItemSelected(InventoryItemData item)\n    {\n        View.ShowItemDetails(item);\n    }\n\n    private void OnSearchChanged(string searchText)\n    {\n        var filteredItems = _inventoryService.SearchItems(searchText);\n        View.DisplayItems(filteredItems);\n    }\n\n    private void OnCloseRequested()\n    {\n        View.Hide();\n    }\n\n    private void OnInventoryChanged()\n    {\n        RefreshView();\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#7-runtime-customization","title":"7. Runtime Customization","text":""},{"location":"ai/industry_uitk/#71-dynamic-theme-system","title":"7.1 Dynamic Theme System","text":"<p>Theme Configuration:</p> <pre><code>using UnityEngine;\nusing System.Collections.Generic;\n\n[CreateAssetMenu(fileName = \"UITheme\", menuName = \"UI/Theme\")]\npublic class UITheme : ScriptableObject\n{\n    [System.Serializable]\n    public class ColorPalette\n    {\n        public Color primary;\n        public Color secondary;\n        public Color background;\n        public Color surface;\n        public Color error;\n        public Color warning;\n        public Color success;\n        public Color textPrimary;\n        public Color textSecondary;\n    }\n\n    [System.Serializable]\n    public class Typography\n    {\n        public int fontSizeSmall = 12;\n        public int fontSizeMedium = 16;\n        public int fontSizeLarge = 24;\n        public int fontSizeXLarge = 32;\n    }\n\n    [System.Serializable]\n    public class Spacing\n    {\n        public int small = 8;\n        public int medium = 16;\n        public int large = 24;\n        public int xLarge = 32;\n    }\n\n    public string themeName;\n    public ColorPalette colors;\n    public Typography typography;\n    public Spacing spacing;\n    public StyleSheet styleSheet;\n}\n</code></pre> <p>Theme Manager:</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\nusing System.Collections.Generic;\n\npublic class ThemeManager : MonoBehaviour\n{\n    private static ThemeManager _instance;\n    public static ThemeManager Instance =&gt; _instance;\n\n    [SerializeField] private List&lt;UITheme&gt; _availableThemes;\n    [SerializeField] private int _currentThemeIndex = 0;\n\n    private List&lt;UIDocument&gt; _registeredDocuments = new List&lt;UIDocument&gt;();\n    private UITheme _currentTheme;\n\n    public UITheme CurrentTheme =&gt; _currentTheme;\n\n    public event System.Action&lt;UITheme&gt; ThemeChanged;\n\n    private void Awake()\n    {\n        if (_instance != null &amp;&amp; _instance != this)\n        {\n            Destroy(gameObject);\n            return;\n        }\n\n        _instance = this;\n        DontDestroyOnLoad(gameObject);\n\n        ApplyTheme(_currentThemeIndex);\n    }\n\n    public void RegisterDocument(UIDocument document)\n    {\n        if (!_registeredDocuments.Contains(document))\n        {\n            _registeredDocuments.Add(document);\n            ApplyThemeToDocument(document, _currentTheme);\n        }\n    }\n\n    public void UnregisterDocument(UIDocument document)\n    {\n        _registeredDocuments.Remove(document);\n    }\n\n    public void ApplyTheme(int themeIndex)\n    {\n        if (themeIndex &lt; 0 || themeIndex &gt;= _availableThemes.Count)\n            return;\n\n        _currentThemeIndex = themeIndex;\n        _currentTheme = _availableThemes[themeIndex];\n\n        // Apply to all registered documents\n        foreach (var document in _registeredDocuments)\n        {\n            ApplyThemeToDocument(document, _currentTheme);\n        }\n\n        ThemeChanged?.Invoke(_currentTheme);\n    }\n\n    public void ApplyThemeByName(string themeName)\n    {\n        int index = _availableThemes.FindIndex(t =&gt; t.themeName == themeName);\n        if (index &gt;= 0)\n        {\n            ApplyTheme(index);\n        }\n    }\n\n    public void NextTheme()\n    {\n        int nextIndex = (_currentThemeIndex + 1) % _availableThemes.Count;\n        ApplyTheme(nextIndex);\n    }\n\n    private void ApplyThemeToDocument(UIDocument document, UITheme theme)\n    {\n        var root = document.rootVisualElement;\n\n        // Remove previous theme stylesheets\n        foreach (var availableTheme in _availableThemes)\n        {\n            if (availableTheme.styleSheet != null)\n            {\n                root.styleSheets.Remove(availableTheme.styleSheet);\n            }\n        }\n\n        // Add new theme stylesheet\n        if (theme.styleSheet != null)\n        {\n            root.styleSheets.Add(theme.styleSheet);\n        }\n\n        // Apply CSS variables\n        ApplyThemeVariables(root, theme);\n    }\n\n    private void ApplyThemeVariables(VisualElement root, UITheme theme)\n    {\n        // Color variables\n        root.style.SetCustomProperty(\"--color-primary\", theme.colors.primary);\n        root.style.SetCustomProperty(\"--color-secondary\", theme.colors.secondary);\n        root.style.SetCustomProperty(\"--color-background\", theme.colors.background);\n        root.style.SetCustomProperty(\"--color-surface\", theme.colors.surface);\n        root.style.SetCustomProperty(\"--color-error\", theme.colors.error);\n        root.style.SetCustomProperty(\"--color-warning\", theme.colors.warning);\n        root.style.SetCustomProperty(\"--color-success\", theme.colors.success);\n        root.style.SetCustomProperty(\"--color-text-primary\", theme.colors.textPrimary);\n        root.style.SetCustomProperty(\"--color-text-secondary\", theme.colors.textSecondary);\n\n        // Typography variables\n        root.style.SetCustomProperty(\"--font-size-sm\", new Length(theme.typography.fontSizeSmall, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--font-size-md\", new Length(theme.typography.fontSizeMedium, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--font-size-lg\", new Length(theme.typography.fontSizeLarge, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--font-size-xl\", new Length(theme.typography.fontSizeXLarge, LengthUnit.Pixel));\n\n        // Spacing variables\n        root.style.SetCustomProperty(\"--spacing-sm\", new Length(theme.spacing.small, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--spacing-md\", new Length(theme.spacing.medium, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--spacing-lg\", new Length(theme.spacing.large, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--spacing-xl\", new Length(theme.spacing.xLarge, LengthUnit.Pixel));\n    }\n}\n\n// Extension method for setting custom properties\npublic static class StyleExtensions\n{\n    public static void SetCustomProperty(this IStyle style, string propertyName, Color value)\n    {\n        // Note: In Unity 6, you can use actual CSS custom properties\n        // For now, we apply colors directly\n        // This is a placeholder for the actual implementation\n    }\n\n    public static void SetCustomProperty(this IStyle style, string propertyName, Length value)\n    {\n        // Similar placeholder\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#72-runtime-style-modification","title":"7.2 Runtime Style Modification","text":"<p>Dynamic Style Controller:</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class DynamicStyleController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n\n    // Runtime style modification examples\n    public void SetButtonStyle(Button button, Color backgroundColor, Color textColor)\n    {\n        button.style.backgroundColor = backgroundColor;\n        button.style.color = textColor;\n    }\n\n    public void AnimateElementScale(VisualElement element, float targetScale, float duration)\n    {\n        StartCoroutine(AnimateScaleCoroutine(element, targetScale, duration));\n    }\n\n    private System.Collections.IEnumerator AnimateScaleCoroutine(VisualElement element, float targetScale, float duration)\n    {\n        float startScale = element.resolvedStyle.scale.value.x;\n        float elapsedTime = 0f;\n\n        while (elapsedTime &lt; duration)\n        {\n            elapsedTime += Time.deltaTime;\n            float t = elapsedTime / duration;\n            float currentScale = Mathf.Lerp(startScale, targetScale, t);\n\n            element.style.scale = new Scale(new Vector3(currentScale, currentScale, 1f));\n\n            yield return null;\n        }\n\n        element.style.scale = new Scale(new Vector3(targetScale, targetScale, 1f));\n    }\n\n    public void AnimateElementOpacity(VisualElement element, float targetOpacity, float duration)\n    {\n        StartCoroutine(AnimateOpacityCoroutine(element, targetOpacity, duration));\n    }\n\n    private System.Collections.IEnumerator AnimateOpacityCoroutine(VisualElement element, float targetOpacity, float duration)\n    {\n        float startOpacity = element.resolvedStyle.opacity;\n        float elapsedTime = 0f;\n\n        while (elapsedTime &lt; duration)\n        {\n            elapsedTime += Time.deltaTime;\n            float t = elapsedTime / duration;\n            float currentOpacity = Mathf.Lerp(startOpacity, targetOpacity, t);\n\n            element.style.opacity = currentOpacity;\n\n            yield return null;\n        }\n\n        element.style.opacity = targetOpacity;\n    }\n\n    // Color transition\n    public void AnimateBackgroundColor(VisualElement element, Color targetColor, float duration)\n    {\n        StartCoroutine(AnimateColorCoroutine(element, targetColor, duration));\n    }\n\n    private System.Collections.IEnumerator AnimateColorCoroutine(VisualElement element, Color targetColor, float duration)\n    {\n        Color startColor = element.resolvedStyle.backgroundColor;\n        float elapsedTime = 0f;\n\n        while (elapsedTime &lt; duration)\n        {\n            elapsedTime += Time.deltaTime;\n            float t = elapsedTime / duration;\n            Color currentColor = Color.Lerp(startColor, targetColor, t);\n\n            element.style.backgroundColor = currentColor;\n\n            yield return null;\n        }\n\n        element.style.backgroundColor = targetColor;\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#73-user-customization-system","title":"7.3 User Customization System","text":"<p>User Preferences:</p> <pre><code>using UnityEngine;\n\n[System.Serializable]\npublic class UserUIPreferences\n{\n    public string selectedTheme = \"Dark\";\n    public float uiScale = 1.0f;\n    public bool highContrastMode = false;\n    public bool reducedMotion = false;\n    public string language = \"en\";\n\n    public void Save()\n    {\n        string json = JsonUtility.ToJson(this);\n        PlayerPrefs.SetString(\"UserUIPreferences\", json);\n        PlayerPrefs.Save();\n    }\n\n    public static UserUIPreferences Load()\n    {\n        if (PlayerPrefs.HasKey(\"UserUIPreferences\"))\n        {\n            string json = PlayerPrefs.GetString(\"UserUIPreferences\");\n            return JsonUtility.FromJson&lt;UserUIPreferences&gt;(json);\n        }\n\n        return new UserUIPreferences();\n    }\n}\n</code></pre> <p>Preference Controller:</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class UIPreferenceController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n\n    private UserUIPreferences _preferences;\n    private Slider _scaleSlider;\n    private Toggle _highContrastToggle;\n    private Toggle _reducedMotionToggle;\n    private DropdownField _themeDropdown;\n\n    private void OnEnable()\n    {\n        _preferences = UserUIPreferences.Load();\n\n        var root = _uiDocument.rootVisualElement;\n\n        _scaleSlider = root.Q&lt;Slider&gt;(\"UIScaleSlider\");\n        _highContrastToggle = root.Q&lt;Toggle&gt;(\"HighContrastToggle\");\n        _reducedMotionToggle = root.Q&lt;Toggle&gt;(\"ReducedMotionToggle\");\n        _themeDropdown = root.Q&lt;DropdownField&gt;(\"ThemeDropdown\");\n\n        // Initialize with saved preferences\n        _scaleSlider.value = _preferences.uiScale;\n        _highContrastToggle.value = _preferences.highContrastMode;\n        _reducedMotionToggle.value = _preferences.reducedMotion;\n\n        // Register callbacks\n        _scaleSlider.RegisterValueChangedCallback(OnScaleChanged);\n        _highContrastToggle.RegisterValueChangedCallback(OnHighContrastChanged);\n        _reducedMotionToggle.RegisterValueChangedCallback(OnReducedMotionChanged);\n        _themeDropdown.RegisterValueChangedCallback(OnThemeChanged);\n\n        // Apply preferences\n        ApplyPreferences();\n    }\n\n    private void ApplyPreferences()\n    {\n        // Apply scale\n        _uiDocument.rootVisualElement.style.scale = new Scale(new Vector3(\n            _preferences.uiScale,\n            _preferences.uiScale,\n            1f\n        ));\n\n        // Apply theme\n        ThemeManager.Instance.ApplyThemeByName(_preferences.selectedTheme);\n\n        // Apply high contrast\n        if (_preferences.highContrastMode)\n        {\n            _uiDocument.rootVisualElement.AddToClassList(\"high-contrast\");\n        }\n\n        // Apply reduced motion\n        if (_preferences.reducedMotion)\n        {\n            _uiDocument.rootVisualElement.AddToClassList(\"reduced-motion\");\n        }\n    }\n\n    private void OnScaleChanged(ChangeEvent&lt;float&gt; evt)\n    {\n        _preferences.uiScale = evt.newValue;\n        _uiDocument.rootVisualElement.style.scale = new Scale(new Vector3(\n            evt.newValue,\n            evt.newValue,\n            1f\n        ));\n        _preferences.Save();\n    }\n\n    private void OnHighContrastChanged(ChangeEvent&lt;bool&gt; evt)\n    {\n        _preferences.highContrastMode = evt.newValue;\n\n        if (evt.newValue)\n        {\n            _uiDocument.rootVisualElement.AddToClassList(\"high-contrast\");\n        }\n        else\n        {\n            _uiDocument.rootVisualElement.RemoveFromClassList(\"high-contrast\");\n        }\n\n        _preferences.Save();\n    }\n\n    private void OnReducedMotionChanged(ChangeEvent&lt;bool&gt; evt)\n    {\n        _preferences.reducedMotion = evt.newValue;\n\n        if (evt.newValue)\n        {\n            _uiDocument.rootVisualElement.AddToClassList(\"reduced-motion\");\n        }\n        else\n        {\n            _uiDocument.rootVisualElement.RemoveFromClassList(\"reduced-motion\");\n        }\n\n        _preferences.Save();\n    }\n\n    private void OnThemeChanged(ChangeEvent&lt;string&gt; evt)\n    {\n        _preferences.selectedTheme = evt.newValue;\n        ThemeManager.Instance.ApplyThemeByName(evt.newValue);\n        _preferences.Save();\n    }\n}\n</code></pre> <p>USS for Accessibility:</p> <pre><code>/* Reduced motion support */\n.reduced-motion * {\n    transition-duration: 0s !important;\n    animation-duration: 0s !important;\n}\n\n/* High contrast mode */\n.high-contrast .button {\n    border-width: 3px;\n    border-color: #FFFFFF;\n}\n\n.high-contrast .text {\n    color: #FFFFFF;\n    text-shadow: 1px 1px 2px #000000;\n}\n</code></pre>"},{"location":"ai/industry_uitk/#8-team-collaboration-patterns","title":"8. Team Collaboration Patterns","text":""},{"location":"ai/industry_uitk/#81-component-library-structure","title":"8.1 Component Library Structure","text":"<p>Shared Component Library:</p> <pre><code>Assets/UI/Components/\n\u251c\u2500\u2500 Buttons/\n\u2502   \u251c\u2500\u2500 PrimaryButton.cs\n\u2502   \u251c\u2500\u2500 SecondaryButton.cs\n\u2502   \u2514\u2500\u2500 IconButton.cs\n\u251c\u2500\u2500 Forms/\n\u2502   \u251c\u2500\u2500 TextInputField.cs\n\u2502   \u251c\u2500\u2500 NumberInputField.cs\n\u2502   \u2514\u2500\u2500 DropdownSelector.cs\n\u251c\u2500\u2500 Panels/\n\u2502   \u251c\u2500\u2500 DialogPanel.cs\n\u2502   \u251c\u2500\u2500 ModalPanel.cs\n\u2502   \u2514\u2500\u2500 TooltipPanel.cs\n\u2514\u2500\u2500 Lists/\n    \u251c\u2500\u2500 ScrollableList.cs\n    \u251c\u2500\u2500 GridList.cs\n    \u2514\u2500\u2500 VirtualizedList.cs\n</code></pre> <p>Base Component Class:</p> <pre><code>using UnityEngine.UIElements;\n\npublic abstract class UIComponent\n{\n    protected VisualElement Root { get; private set; }\n\n    public VisualElement Element =&gt; Root;\n\n    protected UIComponent()\n    {\n        Root = CreateElement();\n        InitializeComponent();\n    }\n\n    protected abstract VisualElement CreateElement();\n\n    protected virtual void InitializeComponent()\n    {\n        // Override in derived classes\n    }\n\n    public virtual void Dispose()\n    {\n        // Cleanup\n        Root?.RemoveFromHierarchy();\n        Root = null;\n    }\n}\n</code></pre> <p>Example Component:</p> <pre><code>using UnityEngine.UIElements;\n\npublic class PrimaryButton : UIComponent\n{\n    private Button _button;\n\n    public event System.Action Clicked;\n\n    public string Text\n    {\n        get =&gt; _button.text;\n        set =&gt; _button.text = value;\n    }\n\n    protected override VisualElement CreateElement()\n    {\n        _button = new Button();\n        _button.AddToClassList(\"btn\");\n        _button.AddToClassList(\"btn-primary\");\n\n        return _button;\n    }\n\n    protected override void InitializeComponent()\n    {\n        _button.clicked += OnButtonClicked;\n    }\n\n    private void OnButtonClicked()\n    {\n        Clicked?.Invoke();\n    }\n\n    public override void Dispose()\n    {\n        _button.clicked -= OnButtonClicked;\n        base.Dispose();\n    }\n}\n\n// Usage:\nvar playButton = new PrimaryButton();\nplayButton.Text = \"Play Game\";\nplayButton.Clicked += OnPlayClicked;\nroot.Add(playButton.Element);\n</code></pre>"},{"location":"ai/industry_uitk/#82-style-guide-documentation","title":"8.2 Style Guide &amp; Documentation","text":"<p>Component Documentation Template:</p> <pre><code>/// &lt;summary&gt;\n/// A reusable dialog panel component.\n/// &lt;/summary&gt;\n/// &lt;example&gt;\n/// var dialog = new DialogPanel(\"Confirm Action\", \"Are you sure?\");\n/// dialog.AddButton(\"Yes\", OnConfirm);\n/// dialog.AddButton(\"No\", OnCancel);\n/// dialog.Show();\n/// &lt;/example&gt;\npublic class DialogPanel : UIComponent\n{\n    // Implementation...\n}\n</code></pre> <p>README for Component Library:</p> <pre><code># UI Component Library\n\n## Installation\n1. Import package via Package Manager\n2. Add stylesheet to your UIDocument: `Assets/UI/Styles/ComponentLibrary.uss`\n\n## Usage\n\n### Buttons\n\n#### Primary Button\n```csharp\nvar button = new PrimaryButton();\nbutton.Text = \"Click Me\";\nbutton.Clicked += () =&gt; Debug.Log(\"Clicked!\");\n</code></pre>"},{"location":"ai/industry_uitk/#icon-button","title":"Icon Button","text":"<pre><code>var iconButton = new IconButton(myIconSprite);\niconButton.Clicked += OnIconClicked;\n</code></pre>"},{"location":"ai/industry_uitk/#forms","title":"Forms","text":""},{"location":"ai/industry_uitk/#text-input","title":"Text Input","text":"<pre><code>var textInput = new TextInputField(\"Username\");\ntextInput.ValueChanged += OnUsernameChanged;\n</code></pre>"},{"location":"ai/industry_uitk/#styling","title":"Styling","text":"<p>All components use BEM naming convention: - <code>.component-name</code> - Block - <code>.component-name__element</code> - Element - <code>.component-name--modifier</code> - Modifier</p>"},{"location":"ai/industry_uitk/#theme-support","title":"Theme Support","text":"<p>Components automatically adapt to the active theme. Use ThemeManager to switch themes:</p> <pre><code>ThemeManager.Instance.ApplyTheme(\"Dark\");\n</code></pre> <pre><code>\n### 8.3 Version Control Best Practices\n\n**Directory Structure for Teams:**\n</code></pre> <p>Assets/ \u251c\u2500\u2500 UI/ \u2502   \u251c\u2500\u2500 Common/              # Shared by all devs (review required) \u2502   \u2502   \u251c\u2500\u2500 Components/ \u2502   \u2502   \u251c\u2500\u2500 Styles/ \u2502   \u2502   \u2514\u2500\u2500 Templates/ \u2502   \u2502 \u2502   \u251c\u2500\u2500 Features/            # Feature-specific UI \u2502   \u2502   \u251c\u2500\u2500 MainMenu/        # Developer A \u2502   \u2502   \u251c\u2500\u2500 Gameplay/        # Developer B \u2502   \u2502   \u2514\u2500\u2500 Settings/        # Developer C \u2502   \u2502 \u2502   \u2514\u2500\u2500 Prototypes/          # Experimental (excluded from builds) \u2502       \u2514\u2500\u2500 NewFeature/</p> <pre><code>\n**.gitignore for UI Toolkit:**\n</code></pre>"},{"location":"ai/industry_uitk/#temporary-ui-files","title":"Temporary UI files","text":"<p>.meta~ .uxml~ *.uss~</p>"},{"location":"ai/industry_uitk/#build-artifacts","title":"Build artifacts","text":"<p>/Assets/UI/Generated/</p>"},{"location":"ai/industry_uitk/#personal-prototypes","title":"Personal prototypes","text":"<p>/Assets/UI/Prototypes/</p> <pre><code>\n**USS Merge Strategy:**\n```css\n/* ===== CORE STYLES - DO NOT MODIFY WITHOUT TEAM REVIEW ===== */\n/* Owner: Tech Lead */\n/* Last Updated: 2024-01-15 */\n\n:root {\n    --primary-color: #8A2BE2;\n    /* ... */\n}\n\n/* ===== FEATURE: MAIN MENU ===== */\n/* Owner: Developer A */\n/* Last Updated: 2024-01-20 */\n\n.main-menu-container {\n    /* ... */\n}\n\n/* ===== FEATURE: GAMEPLAY HUD ===== */\n/* Owner: Developer B */\n/* Last Updated: 2024-01-18 */\n\n.hud-container {\n    /* ... */\n}\n</code></pre>"},{"location":"ai/industry_uitk/#84-code-review-checklist","title":"8.4 Code Review Checklist","text":"<p>UI Code Review Checklist:</p> <pre><code># UI Code Review Checklist\n\n## Architecture\n- [ ] Proper separation of concerns (View/ViewModel/Model)\n- [ ] No business logic in views\n- [ ] Interfaces used for dependencies\n- [ ] Component is reusable\n\n## Code Quality\n- [ ] Follows team naming conventions\n- [ ] Properly documented with XML comments\n- [ ] No magic numbers (use constants)\n- [ ] Memory leaks prevented (event unsubscription)\n\n## Performance\n- [ ] No expensive operations in Update/OnGUI\n- [ ] UI elements pooled if created dynamically\n- [ ] Bindings use efficient change detection\n- [ ] No unnecessary rebuilds\n\n## Styling\n- [ ] Uses theme variables (not hardcoded colors)\n- [ ] Follows BEM naming convention\n- [ ] Responsive to different screen sizes\n- [ ] Accessibility considered\n\n## Testing\n- [ ] Unit tests for ViewModel logic\n- [ ] Manual testing on target platforms\n- [ ] Works with all supported themes\n</code></pre>"},{"location":"ai/industry_uitk/#9-testing-strategies","title":"9. Testing Strategies","text":""},{"location":"ai/industry_uitk/#91-unit-testing-viewmodels","title":"9.1 Unit Testing ViewModels","text":"<p>ViewModel Test:</p> <pre><code>using NUnit.Framework;\n\npublic class PlayerViewModelTests\n{\n    private PlayerViewModel _viewModel;\n    private PlayerModel _model;\n\n    [SetUp]\n    public void SetUp()\n    {\n        _model = new PlayerModel\n        {\n            Name = \"TestPlayer\",\n            Health = 100,\n            MaxHealth = 100\n        };\n\n        _viewModel = new PlayerViewModel(_model);\n    }\n\n    [Test]\n    public void TakeDamage_ReducesHealth()\n    {\n        // Arrange\n        int damage = 25;\n\n        // Act\n        _viewModel.TakeDamage(damage);\n\n        // Assert\n        Assert.AreEqual(75, _viewModel.Health.Value);\n    }\n\n    [Test]\n    public void TakeDamage_DoesNotGoBelowZero()\n    {\n        // Arrange\n        int damage = 150;\n\n        // Act\n        _viewModel.TakeDamage(damage);\n\n        // Assert\n        Assert.AreEqual(0, _viewModel.Health.Value);\n    }\n\n    [Test]\n    public void HealthPercentage_UpdatesWhenHealthChanges()\n    {\n        // Arrange\n        float? capturedPercentage = null;\n        _viewModel.HealthPercentage.ValueChanged += p =&gt; capturedPercentage = p;\n\n        // Act\n        _viewModel.TakeDamage(50);\n\n        // Assert\n        Assert.AreEqual(0.5f, capturedPercentage);\n    }\n\n    [Test]\n    public void Heal_IncreasesHealth()\n    {\n        // Arrange\n        _viewModel.TakeDamage(50);\n\n        // Act\n        _viewModel.Heal(25);\n\n        // Assert\n        Assert.AreEqual(75, _viewModel.Health.Value);\n    }\n\n    [Test]\n    public void Heal_DoesNotExceedMaxHealth()\n    {\n        // Arrange\n        _viewModel.TakeDamage(10);\n\n        // Act\n        _viewModel.Heal(50);\n\n        // Assert\n        Assert.AreEqual(100, _viewModel.Health.Value);\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#92-integration-testing","title":"9.2 Integration Testing","text":"<p>View Integration Test:</p> <pre><code>using NUnit.Framework;\nusing UnityEngine;\nusing UnityEngine.UIElements;\nusing UnityEngine.TestTools;\nusing System.Collections;\n\npublic class PlayerHUDViewIntegrationTests\n{\n    private GameObject _testObject;\n    private PlayerHUDView _view;\n    private PlayerViewModel _viewModel;\n\n    [UnitySetUp]\n    public IEnumerator SetUp()\n    {\n        // Create test GameObject\n        _testObject = new GameObject(\"TestHUD\");\n\n        // Add UIDocument component\n        var uiDocument = _testObject.AddComponent&lt;UIDocument&gt;();\n\n        // Load test UXML\n        var visualTree = Resources.Load&lt;VisualTreeAsset&gt;(\"UI/Tests/PlayerHUDTest\");\n        uiDocument.visualTreeAsset = visualTree;\n\n        // Add view component\n        _view = _testObject.AddComponent&lt;PlayerHUDView&gt;();\n\n        // Create ViewModel\n        var model = new PlayerModel { Health = 100, MaxHealth = 100 };\n        _viewModel = new PlayerViewModel(model);\n\n        // Initialize\n        _view.Initialize(_viewModel);\n\n        yield return null; // Wait for UI to build\n    }\n\n    [UnityTearDown]\n    public IEnumerator TearDown()\n    {\n        Object.Destroy(_testObject);\n        yield return null;\n    }\n\n    [UnityTest]\n    public IEnumerator HealthLabel_UpdatesWhenHealthChanges()\n    {\n        // Act\n        _viewModel.TakeDamage(25);\n\n        yield return null; // Wait for UI update\n\n        // Assert\n        var healthLabel = _view.GetComponent&lt;UIDocument&gt;()\n            .rootVisualElement.Q&lt;Label&gt;(\"HealthValue\");\n\n        Assert.AreEqual(\"75/100\", healthLabel.text);\n    }\n\n    [UnityTest]\n    public IEnumerator HealthBar_UpdatesWhenHealthChanges()\n    {\n        // Act\n        _viewModel.TakeDamage(50);\n\n        yield return null;\n\n        // Assert\n        var healthBar = _view.GetComponent&lt;UIDocument&gt;()\n            .rootVisualElement.Q&lt;ProgressBar&gt;(\"HealthBar\");\n\n        Assert.AreEqual(50f, healthBar.value);\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#93-ui-automation-testing","title":"9.3 UI Automation Testing","text":"<p>Automated UI Test Helper:</p> <pre><code>using UnityEngine.UIElements;\n\npublic static class UITestHelper\n{\n    public static void ClickButton(VisualElement root, string buttonName)\n    {\n        var button = root.Q&lt;Button&gt;(buttonName);\n        if (button == null)\n        {\n            throw new System.Exception($\"Button '{buttonName}' not found!\");\n        }\n\n        // Simulate click\n        using (var evt = ClickEvent.GetPooled())\n        {\n            evt.target = button;\n            button.SendEvent(evt);\n        }\n    }\n\n    public static void SetTextFieldValue(VisualElement root, string fieldName, string value)\n    {\n        var field = root.Q&lt;TextField&gt;(fieldName);\n        if (field == null)\n        {\n            throw new System.Exception($\"TextField '{fieldName}' not found!\");\n        }\n\n        field.value = value;\n    }\n\n    public static string GetLabelText(VisualElement root, string labelName)\n    {\n        var label = root.Q&lt;Label&gt;(labelName);\n        if (label == null)\n        {\n            throw new System.Exception($\"Label '{labelName}' not found!\");\n        }\n\n        return label.text;\n    }\n\n    public static bool IsElementVisible(VisualElement root, string elementName)\n    {\n        var element = root.Q(elementName);\n        if (element == null)\n        {\n            return false;\n        }\n\n        return element.resolvedStyle.display != DisplayStyle.None \n            &amp;&amp; element.resolvedStyle.opacity &gt; 0;\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#10-performance-scalability","title":"10. Performance &amp; Scalability","text":""},{"location":"ai/industry_uitk/#101-virtual-scrolling-list-virtualization","title":"10.1 Virtual Scrolling / List Virtualization","text":"<p>Virtualized List Implementation:</p> <pre><code>using UnityEngine.UIElements;\nusing System.Collections.Generic;\n\npublic class VirtualizedListView&lt;TData&gt; where TData : class\n{\n    private ListView _listView;\n    private List&lt;TData&gt; _items;\n    private System.Func&lt;TData, VisualElement&gt; _makeItem;\n    private System.Action&lt;VisualElement, TData&gt; _bindItem;\n\n    public VirtualizedListView(\n        ListView listView,\n        System.Func&lt;TData, VisualElement&gt; makeItem,\n        System.Action&lt;VisualElement, TData&gt; bindItem)\n    {\n        _listView = listView;\n        _makeItem = makeItem;\n        _bindItem = bindItem;\n        _items = new List&lt;TData&gt;();\n\n        SetupListView();\n    }\n\n    private void SetupListView()\n    {\n        _listView.makeItem = () =&gt; _makeItem(default);\n        _listView.bindItem = (element, index) =&gt;\n        {\n            if (index &lt; _items.Count)\n            {\n                _bindItem(element, _items[index]);\n            }\n        };\n\n        _listView.fixedItemHeight = 50; // Set appropriate height\n        _listView.virtualizationMethod = CollectionVirtualizationMethod.FixedHeight;\n    }\n\n    public void SetItems(List&lt;TData&gt; items)\n    {\n        _items = items;\n        _listView.itemsSource = _items;\n        _listView.Rebuild();\n    }\n\n    public void AddItem(TData item)\n    {\n        _items.Add(item);\n        _listView.RefreshItems();\n    }\n\n    public void RemoveItem(TData item)\n    {\n        _items.Remove(item);\n        _listView.RefreshItems();\n    }\n\n    public void Clear()\n    {\n        _items.Clear();\n        _listView.RefreshItems();\n    }\n}\n\n// Usage:\nvar listView = root.Q&lt;ListView&gt;(\"ItemList\");\n\nvar virtualizedList = new VirtualizedListView&lt;InventoryItemData&gt;(\n    listView,\n    makeItem: (data) =&gt;\n    {\n        var container = new VisualElement();\n        container.AddToClassList(\"list-item\");\n\n        var icon = new VisualElement();\n        icon.AddToClassList(\"item-icon\");\n\n        var label = new Label();\n        label.AddToClassList(\"item-label\");\n\n        container.Add(icon);\n        container.Add(label);\n\n        return container;\n    },\n    bindItem: (element, data) =&gt;\n    {\n        var icon = element.Q&lt;VisualElement&gt;(\"item-icon\");\n        var label = element.Q&lt;Label&gt;(\"item-label\");\n\n        icon.style.backgroundImage = new StyleBackground(data.Icon);\n        label.text = data.Name;\n    }\n);\n\nvirtualizedList.SetItems(inventoryItems);\n</code></pre>"},{"location":"ai/industry_uitk/#102-lazy-loading","title":"10.2 Lazy Loading","text":"<p>Lazy Loading Pattern:</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\nusing System.Collections;\nusing System.Collections.Generic;\n\npublic class LazyLoadController : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private int _itemsPerPage = 20;\n\n    private ScrollView _scrollView;\n    private VisualElement _contentContainer;\n    private List&lt;ItemData&gt; _allItems;\n    private int _currentPage = 0;\n    private bool _isLoading = false;\n\n    private void OnEnable()\n    {\n        var root = _uiDocument.rootVisualElement;\n        _scrollView = root.Q&lt;ScrollView&gt;(\"ItemScrollView\");\n        _contentContainer = root.Q&lt;VisualElement&gt;(\"ItemContainer\");\n\n        // Register scroll event\n        _scrollView.verticalScroller.valueChanged += OnScrollChanged;\n\n        // Load initial data\n        LoadPage(0);\n    }\n\n    private void OnScrollChanged(float scrollPosition)\n    {\n        // Check if scrolled near bottom\n        float scrollableHeight = _scrollView.contentContainer.layout.height - _scrollView.layout.height;\n        float scrollPercentage = scrollPosition / scrollableHeight;\n\n        if (scrollPercentage &gt; 0.8f &amp;&amp; !_isLoading)\n        {\n            LoadNextPage();\n        }\n    }\n\n    private void LoadNextPage()\n    {\n        _currentPage++;\n        LoadPage(_currentPage);\n    }\n\n    private void LoadPage(int pageIndex)\n    {\n        if (_isLoading) return;\n\n        _isLoading = true;\n        StartCoroutine(LoadPageCoroutine(pageIndex));\n    }\n\n    private IEnumerator LoadPageCoroutine(int pageIndex)\n    {\n        // Simulate network delay\n        yield return new WaitForSeconds(0.5f);\n\n        int startIndex = pageIndex * _itemsPerPage;\n        int endIndex = Mathf.Min(startIndex + _itemsPerPage, _allItems.Count);\n\n        for (int i = startIndex; i &lt; endIndex; i++)\n        {\n            var itemElement = CreateItemElement(_allItems[i]);\n            _contentContainer.Add(itemElement);\n\n            // Yield periodically to prevent frame drops\n            if (i % 5 == 0)\n            {\n                yield return null;\n            }\n        }\n\n        _isLoading = false;\n    }\n\n    private VisualElement CreateItemElement(ItemData data)\n    {\n        // Create and return item element\n        return new VisualElement();\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#103-memory-management","title":"10.3 Memory Management","text":"<p>UI Element Pool:</p> <pre><code>using UnityEngine.UIElements;\nusing System.Collections.Generic;\n\npublic class UIElementPool&lt;T&gt; where T : VisualElement, new()\n{\n    private Stack&lt;T&gt; _pool = new Stack&lt;T&gt;();\n    private HashSet&lt;T&gt; _activeElements = new HashSet&lt;T&gt;();\n    private VisualElement _container;\n    private int _maxPoolSize;\n\n    public UIElementPool(VisualElement container, int initialSize = 10, int maxSize = 100)\n    {\n        _container = container;\n        _maxPoolSize = maxSize;\n\n        // Pre-populate pool\n        for (int i = 0; i &lt; initialSize; i++)\n        {\n            var element = CreateNewElement();\n            element.style.display = DisplayStyle.None;\n            _pool.Push(element);\n        }\n    }\n\n    private T CreateNewElement()\n    {\n        var element = new T();\n        _container.Add(element);\n        return element;\n    }\n\n    public T Get()\n    {\n        T element;\n\n        if (_pool.Count &gt; 0)\n        {\n            element = _pool.Pop();\n        }\n        else\n        {\n            element = CreateNewElement();\n        }\n\n        element.style.display = DisplayStyle.Flex;\n        _activeElements.Add(element);\n\n        return element;\n    }\n\n    public void Return(T element)\n    {\n        if (!_activeElements.Contains(element))\n        {\n            return; // Element not from this pool\n        }\n\n        element.style.display = DisplayStyle.None;\n        _activeElements.Remove(element);\n\n        // Only return to pool if under max size\n        if (_pool.Count &lt; _maxPoolSize)\n        {\n            _pool.Push(element);\n        }\n        else\n        {\n            // Remove from hierarchy to free memory\n            element.RemoveFromHierarchy();\n        }\n    }\n\n    public void ReturnAll()\n    {\n        foreach (var element in _activeElements)\n        {\n            element.style.display = DisplayStyle.None;\n\n            if (_pool.Count &lt; _maxPoolSize)\n            {\n                _pool.Push(element);\n            }\n            else\n            {\n                element.RemoveFromHierarchy();\n            }\n        }\n\n        _activeElements.Clear();\n    }\n\n    public void Clear()\n    {\n        ReturnAll();\n\n        while (_pool.Count &gt; 0)\n        {\n            var element = _pool.Pop();\n            element.RemoveFromHierarchy();\n        }\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#11-production-patterns","title":"11. Production Patterns","text":""},{"location":"ai/industry_uitk/#111-dependency-injection","title":"11.1 Dependency Injection","text":"<p>Simple Service Locator:</p> <pre><code>using System;\nusing System.Collections.Generic;\n\npublic class ServiceLocator\n{\n    private static ServiceLocator _instance;\n    public static ServiceLocator Instance =&gt; _instance ?? (_instance = new ServiceLocator());\n\n    private Dictionary&lt;Type, object&gt; _services = new Dictionary&lt;Type, object&gt;();\n\n    public void Register&lt;T&gt;(T service)\n    {\n        var type = typeof(T);\n\n        if (_services.ContainsKey(type))\n        {\n            _services[type] = service;\n        }\n        else\n        {\n            _services.Add(type, service);\n        }\n    }\n\n    public T Get&lt;T&gt;()\n    {\n        var type = typeof(T);\n\n        if (_services.TryGetValue(type, out var service))\n        {\n            return (T)service;\n        }\n\n        throw new Exception($\"Service of type {type} not registered!\");\n    }\n\n    public bool TryGet&lt;T&gt;(out T service)\n    {\n        var type = typeof(T);\n\n        if (_services.TryGetValue(type, out var obj))\n        {\n            service = (T)obj;\n            return true;\n        }\n\n        service = default;\n        return false;\n    }\n\n    public void Clear()\n    {\n        _services.Clear();\n    }\n}\n\n// Usage:\npublic class GameBootstrap : MonoBehaviour\n{\n    private void Awake()\n    {\n        // Register services\n        ServiceLocator.Instance.Register&lt;IAudioService&gt;(new AudioService());\n        ServiceLocator.Instance.Register&lt;ISceneLoader&gt;(new SceneLoader());\n        ServiceLocator.Instance.Register&lt;IPlayerData&gt;(new PlayerData());\n    }\n}\n\npublic class MainMenuController : MonoBehaviour\n{\n    private IAudioService _audioService;\n    private ISceneLoader _sceneLoader;\n\n    private void Awake()\n    {\n        // Resolve dependencies\n        _audioService = ServiceLocator.Instance.Get&lt;IAudioService&gt;();\n        _sceneLoader = ServiceLocator.Instance.Get&lt;ISceneLoader&gt;();\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#112-event-bus-pattern","title":"11.2 Event Bus Pattern","text":"<p>Global Event Bus:</p> <pre><code>using System;\nusing System.Collections.Generic;\n\npublic class EventBus\n{\n    private static EventBus _instance;\n    public static EventBus Instance =&gt; _instance ?? (_instance = new EventBus());\n\n    private Dictionary&lt;Type, Delegate&gt; _eventHandlers = new Dictionary&lt;Type, Delegate&gt;();\n\n    public void Subscribe&lt;T&gt;(Action&lt;T&gt; handler)\n    {\n        var eventType = typeof(T);\n\n        if (_eventHandlers.TryGetValue(eventType, out var existingHandler))\n        {\n            _eventHandlers[eventType] = Delegate.Combine(existingHandler, handler);\n        }\n        else\n        {\n            _eventHandlers[eventType] = handler;\n        }\n    }\n\n    public void Unsubscribe&lt;T&gt;(Action&lt;T&gt; handler)\n    {\n        var eventType = typeof(T);\n\n        if (_eventHandlers.TryGetValue(eventType, out var existingHandler))\n        {\n            var newHandler = Delegate.Remove(existingHandler, handler);\n\n            if (newHandler == null)\n            {\n                _eventHandlers.Remove(eventType);\n            }\n            else\n            {\n                _eventHandlers[eventType] = newHandler;\n            }\n        }\n    }\n\n    public void Publish&lt;T&gt;(T eventData)\n    {\n        var eventType = typeof(T);\n\n        if (_eventHandlers.TryGetValue(eventType, out var handler))\n        {\n            (handler as Action&lt;T&gt;)?.Invoke(eventData);\n        }\n    }\n\n    public void Clear()\n    {\n        _eventHandlers.Clear();\n    }\n}\n\n// Event definitions\npublic class PlayerHealthChangedEvent\n{\n    public int NewHealth { get; set; }\n    public int MaxHealth { get; set; }\n}\n\npublic class ScoreUpdatedEvent\n{\n    public int NewScore { get; set; }\n}\n\n// Usage:\npublic class PlayerController : MonoBehaviour\n{\n    private void TakeDamage(int damage)\n    {\n        health -= damage;\n\n        // Publish event\n        EventBus.Instance.Publish(new PlayerHealthChangedEvent\n        {\n            NewHealth = health,\n            MaxHealth = maxHealth\n        });\n    }\n}\n\npublic class HUDController : MonoBehaviour\n{\n    private void OnEnable()\n    {\n        // Subscribe to events\n        EventBus.Instance.Subscribe&lt;PlayerHealthChangedEvent&gt;(OnHealthChanged);\n        EventBus.Instance.Subscribe&lt;ScoreUpdatedEvent&gt;(OnScoreUpdated);\n    }\n\n    private void OnDisable()\n    {\n        // Unsubscribe\n        EventBus.Instance.Unsubscribe&lt;PlayerHealthChangedEvent&gt;(OnHealthChanged);\n        EventBus.Instance.Unsubscribe&lt;ScoreUpdatedEvent&gt;(OnScoreUpdated);\n    }\n\n    private void OnHealthChanged(PlayerHealthChangedEvent evt)\n    {\n        UpdateHealthDisplay(evt.NewHealth, evt.MaxHealth);\n    }\n\n    private void OnScoreUpdated(ScoreUpdatedEvent evt)\n    {\n        UpdateScoreDisplay(evt.NewScore);\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#113-localization-system","title":"11.3 Localization System","text":"<p>Localization Manager:</p> <pre><code>using UnityEngine;\nusing System.Collections.Generic;\n\npublic class LocalizationManager : MonoBehaviour\n{\n    private static LocalizationManager _instance;\n    public static LocalizationManager Instance =&gt; _instance;\n\n    [SerializeField] private SystemLanguage _currentLanguage = SystemLanguage.English;\n\n    private Dictionary&lt;string, Dictionary&lt;SystemLanguage, string&gt;&gt; _localizedStrings \n        = new Dictionary&lt;string, Dictionary&lt;SystemLanguage, string&gt;&gt;();\n\n    public event System.Action&lt;SystemLanguage&gt; LanguageChanged;\n\n    public SystemLanguage CurrentLanguage =&gt; _currentLanguage;\n\n    private void Awake()\n    {\n        if (_instance != null &amp;&amp; _instance != this)\n        {\n            Destroy(gameObject);\n            return;\n        }\n\n        _instance = this;\n        DontDestroyOnLoad(gameObject);\n\n        LoadLocalizations();\n    }\n\n    private void LoadLocalizations()\n    {\n        // Load from JSON, CSV, or ScriptableObjects\n        // Example structure:\n        var locData = new Dictionary&lt;string, Dictionary&lt;SystemLanguage, string&gt;&gt;\n        {\n            [\"menu.play\"] = new Dictionary&lt;SystemLanguage, string&gt;\n            {\n                [SystemLanguage.English] = \"Play\",\n                [SystemLanguage.Spanish] = \"Jugar\",\n                [SystemLanguage.French] = \"Jouer\"\n            },\n            [\"menu.settings\"] = new Dictionary&lt;SystemLanguage, string&gt;\n            {\n                [SystemLanguage.English] = \"Settings\",\n                [SystemLanguage.Spanish] = \"Ajustes\",\n                [SystemLanguage.French] = \"Param\u00e8tres\"\n            }\n        };\n\n        _localizedStrings = locData;\n    }\n\n    public string GetString(string key)\n    {\n        if (_localizedStrings.TryGetValue(key, out var translations))\n        {\n            if (translations.TryGetValue(_currentLanguage, out var translation))\n            {\n                return translation;\n            }\n\n            // Fallback to English\n            if (translations.TryGetValue(SystemLanguage.English, out var fallback))\n            {\n                return fallback;\n            }\n        }\n\n        return $\"[{key}]\"; // Return key if not found\n    }\n\n    public void SetLanguage(SystemLanguage language)\n    {\n        if (_currentLanguage != language)\n        {\n            _currentLanguage = language;\n            LanguageChanged?.Invoke(_currentLanguage);\n        }\n    }\n}\n</code></pre> <p>Localized Label Component:</p> <pre><code>using UnityEngine;\nusing UnityEngine.UIElements;\n\npublic class LocalizedLabel : MonoBehaviour\n{\n    [SerializeField] private UIDocument _uiDocument;\n    [SerializeField] private string _labelName;\n    [SerializeField] private string _localizationKey;\n\n    private Label _label;\n\n    private void OnEnable()\n    {\n        _label = _uiDocument.rootVisualElement.Q&lt;Label&gt;(_labelName);\n\n        // Subscribe to language changes\n        LocalizationManager.Instance.LanguageChanged += OnLanguageChanged;\n\n        // Set initial text\n        UpdateText();\n    }\n\n    private void OnDisable()\n    {\n        LocalizationManager.Instance.LanguageChanged -= OnLanguageChanged;\n    }\n\n    private void OnLanguageChanged(SystemLanguage newLanguage)\n    {\n        UpdateText();\n    }\n\n    private void UpdateText()\n    {\n        if (_label != null)\n        {\n            _label.text = LocalizationManager.Instance.GetString(_localizationKey);\n        }\n    }\n}\n</code></pre>"},{"location":"ai/industry_uitk/#summary-industry-best-practices","title":"Summary: Industry Best Practices","text":""},{"location":"ai/industry_uitk/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Architecture: Use MVVM for UI Toolkit projects</li> <li>Code-First: Generate UI programmatically with factory patterns</li> <li>Separation: Keep logic in ViewModels, visuals in UXML/USS</li> <li>Data Binding: Use Unity 6 native binding or observable patterns</li> <li>Team Workflow: Component libraries + style guides</li> <li>Performance: Virtualization, pooling, lazy loading</li> <li>Testing: Unit test ViewModels, integration test views</li> <li>Production: DI, event bus, localization</li> </ol>"},{"location":"ai/industry_uitk/#comparison-your-past-approach-vs-industry-standard","title":"Comparison: Your Past Approach vs. Industry Standard","text":"Aspect Factory-View-Host-Controller Industry MVVM Pattern Scalability Good for small teams Excellent for large teams Testability Moderate High (ViewModels easily tested) Designer Collaboration Limited Excellent (UXML/USS separation) Code Reusability Component-based Component + data binding Learning Curve Low Medium Unity 6 Features Limited use Full data binding support"},{"location":"ai/industry_uitk/#recommended-transition-path","title":"Recommended Transition Path","text":"<p>Phase 1: Introduce ViewModels - Keep your factory pattern - Add ViewModel layer between controllers and views - Start using observable properties</p> <p>Phase 2: Adopt Data Binding - Convert to UXML templates for structure - Use USS for all styling - Implement Unity 6 native binding</p> <p>Phase 3: Full MVVM - Refactor controllers to presenters - Component library for team - Automated testing</p> <p>This document provides production-ready patterns for scaling UI Toolkit projects across teams while maintaining code quality and performance.</p>"},{"location":"ai/layer_architecture/","title":"Your 3-Layer Architecture: Controller \u2192 Host \u2192 View","text":""},{"location":"ai/layer_architecture/#what-you-actually-have","title":"What You Actually Have","text":"<p>You have a 3-tier architecture that's already well-separated:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         StartMenuController (MonoBehaviour)             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 SCENE ORCHESTRATION                               \u2502 \u2502\n\u2502  \u2502 \u2022 Manages multiple panels (StartMenu, Settings)   \u2502 \u2502\n\u2502  \u2502 \u2022 Handles navigation (LoadScene)                  \u2502 \u2502\n\u2502  \u2502 \u2022 Application logic (Application.Quit)            \u2502 \u2502\n\u2502  \u2502 \u2022 Panel visibility (toggle settings)              \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2502\n                    \u2502 controls\n                    \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         StartMenuPanelHost (MonoBehaviour)              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 PANEL LIFECYCLE                                   \u2502 \u2502\n\u2502  \u2502 \u2022 Generate() / Dispose()                          \u2502 \u2502\n\u2502  \u2502 \u2022 Show() / Hide() animations                      \u2502 \u2502\n\u2502  \u2502 \u2022 Event passthrough (OnPlayClicked, etc.)         \u2502 \u2502\n\u2502  \u2502 \u2022 UIDocument reference                            \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2502\n                    \u2502 creates &amp; subscribes\n                    \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         StartMenuPanelView (Pure C#)                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 UI GENERATION                                     \u2502 \u2502\n\u2502  \u2502 \u2022 Creates UI via Factory                          \u2502 \u2502\n\u2502  \u2502 \u2022 Wires button clicks to events                   \u2502 \u2502\n\u2502  \u2502 \u2022 Exposes events (OnPlayClicked, etc.)            \u2502 \u2502\n\u2502  \u2502 \u2022 No Unity dependencies                           \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ai/layer_architecture/#your-architecture-in-mvvm-terms","title":"Your Architecture in MVVM Terms","text":"Your Layer MVVM Equivalent Responsibilities Controller Application Controller / Navigator Scene orchestration, multi-panel coordination, navigation Host View Controller Panel lifecycle, Show/Hide, event routing View View UI generation, event exposure (Missing) ViewModel Presentation logic (only needed for complex panels)"},{"location":"ai/layer_architecture/#the-key-insight","title":"The Key Insight","text":"<p>Your architecture is actually BETTER than basic MVVM!</p> <p>You've split the Controller into two layers: 1. Controller (scene-level) - handles multiple panels 2. Host (panel-level) - handles single panel lifecycle</p> <p>This is actually a Hierarchical Controller pattern and it's cleaner than MVVM for Unity UI because: - \u2705 Scene Controller manages panel coordination - \u2705 Panel Host manages individual panel lifecycle - \u2705 View is pure UI generation - \u2705 ViewModel added only when needed (not shown in your simple menu)</p>"},{"location":"ai/layer_architecture/#analysis-of-your-startmenucontroller","title":"Analysis of Your StartMenuController","text":""},{"location":"ai/layer_architecture/#what-it-does-right","title":"What It Does Right \u2705","text":"<pre><code>public class StartMenuController : MonoBehaviour\n{\n    // GOOD: References to managed panels\n    [SerializeField] private StartMenuPanelHost startMenuPanelHost;\n    [SerializeField] private SettingsPanelHost settingsPanelHost;\n\n    // GOOD: Scene-level state\n    private bool _settingsActive;\n\n    // GOOD: Panel coordination\n    private void ToggleSettings()\n    {\n        _settingsActive = !_settingsActive;\n\n        if(!_settingsActive)\n            settingsPanelHost.Hide();\n        else\n            settingsPanelHost.Generate();\n    }\n\n    // GOOD: Application/navigation logic\n    private void HandlePlay() =&gt; BootstrapManager.Instance.LoadScene(GameConstants.Hub);\n    private void HandleQuit() =&gt; Application.Quit();\n}\n</code></pre> <p>This is exactly what a Scene Controller should do!</p>"},{"location":"ai/layer_architecture/#minor-improvements","title":"Minor Improvements","text":"<p>1. SubscribeEvents() is redundant</p> <pre><code>// Current:\nprivate void BindButtons()\n{\n    startMenuPanelHost.SubscribeEvents(); // \u2190 This is called in Generate() already\n    startMenuPanelHost.OnPlayClicked += HandlePlay;\n    // ...\n}\n\n// Better:\nprivate void BindButtons()\n{\n    // Remove SubscribeEvents() - Host already does this in Generate()\n    startMenuPanelHost.OnPlayClicked += HandlePlay;\n    startMenuPanelHost.OnSettingsClicked += HandleSettings;\n    startMenuPanelHost.OnControlsClicked += HandleControls;\n    startMenuPanelHost.OnQuitClicked += HandleQuit;\n}\n</code></pre> <p>2. Settings panel lifecycle</p> <pre><code>// Current: Settings regenerates every toggle\nprivate void ToggleSettings()\n{\n    _settingsActive = !_settingsActive;\n\n    if(!_settingsActive)\n        settingsPanelHost.Hide();\n    else\n        settingsPanelHost.Generate(); // \u2190 Recreates UI every time\n}\n\n// Better: Generate once, then Show/Hide\nprivate void OnEnable()\n{\n    startMenuPanelHost.Generate();\n    settingsPanelHost.Generate(); // Generate both upfront\n    settingsPanelHost.Hide();     // But hide settings initially\n\n    BindButtons();\n}\n\nprivate void ToggleSettings()\n{\n    _settingsActive = !_settingsActive;\n\n    if (_settingsActive)\n        settingsPanelHost.Show();\n    else\n        settingsPanelHost.Hide();\n}\n</code></pre>"},{"location":"ai/layer_architecture/#improved-version-your-style","title":"Improved Version (Your Style)","text":"<pre><code>using Constants;\nusing Systems.Core;\nusing UI.Hosts;\nusing UnityEngine;\n\nnamespace UI.Controllers\n{\n    /// &lt;summary&gt;\n    /// Scene-level controller managing the Start Menu screen.\n    /// Coordinates multiple panels and handles navigation.\n    /// &lt;/summary&gt;\n    public class StartMenuController : MonoBehaviour\n    {\n        #region Fields\n\n        [Header(\"Panels\")]\n        [SerializeField] private StartMenuPanelHost _startMenuPanel;\n        [SerializeField] private SettingsPanelHost _settingsPanel;\n        [SerializeField] private ControlsPanelHost _controlsPanel; // If you add this later\n\n        #endregion\n\n        #region Panel Management\n\n        private void ShowPanel(BasePanelHost panel)\n        {\n            // Hide all panels\n            _startMenuPanel.Hide();\n            _settingsPanel.Hide();\n            // _controlsPanel.Hide();\n\n            // Show requested panel\n            panel.Show();\n        }\n\n        private void ShowStartMenu() =&gt; ShowPanel(_startMenuPanel);\n        private void ShowSettings() =&gt; ShowPanel(_settingsPanel);\n        // private void ShowControls() =&gt; ShowPanel(_controlsPanel);\n\n        #endregion\n\n        #region Event Subscription\n\n        private void SubscribeToEvents()\n        {\n            // Start Menu events\n            _startMenuPanel.OnPlayClicked += HandlePlay;\n            _startMenuPanel.OnSettingsClicked += HandleSettings;\n            _startMenuPanel.OnControlsClicked += HandleControls;\n            _startMenuPanel.OnQuitClicked += HandleQuit;\n\n            // Settings panel events (when you add them)\n            // _settingsPanel.OnBackClicked += ShowStartMenu;\n        }\n\n        private void UnsubscribeFromEvents()\n        {\n            _startMenuPanel.OnPlayClicked -= HandlePlay;\n            _startMenuPanel.OnSettingsClicked -= HandleSettings;\n            _startMenuPanel.OnControlsClicked -= HandleControls;\n            _startMenuPanel.OnQuitClicked -= HandleQuit;\n\n            // _settingsPanel.OnBackClicked -= ShowStartMenu;\n        }\n\n        #endregion\n\n        #region Event Handlers\n\n        private void HandlePlay()\n        {\n            BootstrapManager.Instance.LoadScene(GameConstants.Hub);\n        }\n\n        private void HandleSettings()\n        {\n            ShowSettings();\n        }\n\n        private void HandleControls()\n        {\n            // Temporary - replace with ShowControls() when panel exists\n            BootstrapManager.Instance.LoadScene(GameConstants.GoblinCampDay);\n        }\n\n        private void HandleQuit()\n        {\n            #if UNITY_EDITOR\n            UnityEditor.EditorApplication.isPlaying = false;\n            #else\n            Application.Quit();\n            #endif\n        }\n\n        #endregion\n\n        #region Unity Lifecycle\n\n        private void OnEnable()\n        {\n            // Generate all panels\n            _startMenuPanel.Generate();\n            _settingsPanel.Generate();\n            // _controlsPanel.Generate();\n\n            // Show only start menu\n            ShowStartMenu();\n\n            // Subscribe to events\n            SubscribeToEvents();\n        }\n\n        private void OnDisable()\n        {\n            UnsubscribeFromEvents();\n        }\n\n        #endregion\n    }\n}\n</code></pre>"},{"location":"ai/layer_architecture/#when-to-add-viewmodel-in-your-3-layer-system","title":"When to Add ViewModel (In Your 3-Layer System)","text":""},{"location":"ai/layer_architecture/#current-structure-no-viewmodel-needed","title":"Current Structure (No ViewModel Needed)","text":"<pre><code>StartMenuController (Scene orchestration)\n    \u2193\nStartMenuPanelHost (Panel lifecycle)\n    \u2193\nStartMenuPanelView (UI generation)\n</code></pre> <p>This is perfect for simple panels!</p>"},{"location":"ai/layer_architecture/#when-you-need-viewmodel","title":"When You Need ViewModel","text":"<p>Example: Settings Panel with State</p> <pre><code>SettingsController (Scene orchestration - optional)\n    \u2193\nSettingsPanelHost (Panel lifecycle)\n    \u2193\nSettingsViewModel (Presentation logic) \u2190 NEW\n    \u2193\nSettingsPanelView (UI generation + binding)\n</code></pre> <p>Example with code:</p> <pre><code>// SettingsPanelHost.cs\npublic class SettingsPanelHost : BasePanelHost\n{\n    [SerializeField] private GameSettings _gameSettings;\n\n    private SettingsViewModel _viewModel;\n    private SettingsPanelView _view;\n\n    public override void Generate()\n    {\n        Dispose();\n\n        // Create ViewModel from settings\n        var model = new SettingsModel\n        {\n            Volume = _gameSettings.Volume,\n            Quality = _gameSettings.Quality\n        };\n\n        _viewModel = new SettingsViewModel(model);\n\n        // Subscribe to ViewModel events (game logic)\n        _viewModel.OnApplyRequested += ApplySettings;\n        _viewModel.OnVolumePreview += PreviewVolume;\n\n        // Create View with ViewModel\n        _view = new SettingsPanelView(\n            uiDocument.rootVisualElement,\n            styleSheet,\n            _viewModel // Pass ViewModel to View\n        );\n\n        Show();\n    }\n\n    // Game logic (Unity-specific)\n    private void PreviewVolume(float volume)\n    {\n        AudioListener.volume = volume;\n    }\n\n    private void ApplySettings()\n    {\n        var settings = _viewModel.GetCurrentSettings();\n        _gameSettings.Volume = settings.Volume;\n        _gameSettings.Quality = settings.Quality;\n        _gameSettings.Save();\n\n        // Apply to Unity\n        QualitySettings.SetQualityLevel(settings.Quality);\n    }\n\n    protected override void Dispose()\n    {\n        if (_viewModel != null)\n        {\n            _viewModel.OnApplyRequested -= ApplySettings;\n            _viewModel.OnVolumePreview -= PreviewVolume;\n        }\n\n        _view?.Dispose();\n        _view = null;\n        _viewModel = null;\n    }\n}\n</code></pre>"},{"location":"ai/layer_architecture/#complete-architecture-pattern","title":"Complete Architecture Pattern","text":""},{"location":"ai/layer_architecture/#for-simple-panels-your-startmenu","title":"For Simple Panels (Your StartMenu)","text":"<pre><code>Layer 1: Scene Controller (manages multiple panels, navigation)\n    \u2514\u2500 StartMenuController.cs\n\nLayer 2: Panel Host (lifecycle, Show/Hide)\n    \u2514\u2500 StartMenuPanelHost.cs\n\nLayer 3: View (UI generation)\n    \u2514\u2500 StartMenuPanelView.cs\n</code></pre>"},{"location":"ai/layer_architecture/#for-complex-panels-settings-inventory-character-sheet","title":"For Complex Panels (Settings, Inventory, Character Sheet)","text":"<pre><code>Layer 1: Scene Controller (optional - only if coordinating multiple panels)\n    \u2514\u2500 SettingsController.cs (optional)\n\nLayer 2: Panel Host (lifecycle, game logic)\n    \u2514\u2500 SettingsPanelHost.cs\n\nLayer 2.5: ViewModel (presentation logic, testable) \u2190 NEW\n    \u2514\u2500 SettingsViewModel.cs\n\nLayer 3: View (UI generation + binding)\n    \u2514\u2500 SettingsPanelView.cs\n</code></pre>"},{"location":"ai/layer_architecture/#directory-structure-recommended","title":"Directory Structure (Recommended)","text":"<pre><code>Assets/Scripts/UI/\n\u251c\u2500\u2500 Controllers/\n\u2502   \u251c\u2500\u2500 StartMenuController.cs       # Scene-level orchestration\n\u2502   \u251c\u2500\u2500 GameplayHUDController.cs     # Coordinates HUD panels\n\u2502   \u2514\u2500\u2500 InventoryController.cs       # Coordinates inventory UI\n\u2502\n\u251c\u2500\u2500 Hosts/                            # Panel lifecycle managers\n\u2502   \u251c\u2500\u2500 Base/\n\u2502   \u2502   \u2514\u2500\u2500 BasePanelHost.cs\n\u2502   \u251c\u2500\u2500 StartMenuPanelHost.cs\n\u2502   \u251c\u2500\u2500 SettingsPanelHost.cs\n\u2502   \u2514\u2500\u2500 InventoryPanelHost.cs\n\u2502\n\u251c\u2500\u2500 ViewModels/                       # Presentation logic (add as needed)\n\u2502   \u251c\u2500\u2500 SettingsViewModel.cs\n\u2502   \u251c\u2500\u2500 InventoryViewModel.cs\n\u2502   \u2514\u2500\u2500 CharacterStatsViewModel.cs\n\u2502\n\u251c\u2500\u2500 Views/                            # UI generation\n\u2502   \u251c\u2500\u2500 Base/\n\u2502   \u2502   \u2514\u2500\u2500 BasePanelView.cs\n\u2502   \u251c\u2500\u2500 StartMenuPanelView.cs\n\u2502   \u251c\u2500\u2500 SettingsPanelView.cs\n\u2502   \u2514\u2500\u2500 InventoryPanelView.cs\n\u2502\n\u251c\u2500\u2500 Models/                           # Data structures\n\u2502   \u251c\u2500\u2500 SettingsModel.cs\n\u2502   \u251c\u2500\u2500 InventoryModel.cs\n\u2502   \u2514\u2500\u2500 CharacterStatsModel.cs\n\u2502\n\u2514\u2500\u2500 Common/\n    \u251c\u2500\u2500 ObservableProperty.cs\n    \u2514\u2500\u2500 ObservableCollection.cs\n</code></pre>"},{"location":"ai/layer_architecture/#decision-matrix-do-i-need-viewmodel","title":"Decision Matrix: Do I Need ViewModel?","text":"Panel Type Complexity Needs ViewModel? Example Simple Menu Just buttons \u2192 actions \u274c NO Your StartMenu Pause Menu Buttons + resume/quit \u274c NO Pause overlay Confirmation Dialog Yes/No buttons \u274c NO \"Are you sure?\" Settings Panel Sliders, formatting, validation \u2705 YES Volume: 75%, Quality names Inventory Filtering, sorting, selection \u2705 YES Filter by type, sort by value Character Sheet Computed stats, percentage bars \u2705 YES Attack: 45 (+15), Health: 80% Form Input Validation, error messages \u2705 YES \"Password must be 8+ chars\" Live Stats HUD Updating values, health % \u26a0\ufe0f MAYBE If formatting is complex <p>Rule of Thumb:</p> <pre><code>Does the panel have:\n- Data formatting? (percentages, dates, currency)\n- Validation logic? (forms, inputs)\n- Computed properties? (total price, health %)\n- Complex state? (filters, selections)\n\nYES \u2192 Add ViewModel\nNO  \u2192 Keep as Controller \u2192 Host \u2192 View\n</code></pre>"},{"location":"ai/layer_architecture/#your-pattern-is-actually-superior-for-unity","title":"Your Pattern is Actually Superior for Unity","text":"<p>Standard MVVM:</p> <pre><code>ViewModel \u2192 View\n</code></pre> <p>Problems: - ViewModel doesn't know about panel lifecycle - View manages its own Show/Hide - No centralized panel coordination</p> <p>Your Pattern:</p> <pre><code>Controller (scene) \u2192 Host (panel lifecycle) \u2192 View (UI)\n                         \u2193\n                    ViewModel (when needed)\n</code></pre> <p>Benefits: - \u2705 Controller manages multiple panels - \u2705 Host manages panel lifecycle + animations - \u2705 View is pure UI generation - \u2705 ViewModel added only when presentation logic exists - \u2705 Clean separation of concerns</p>"},{"location":"ai/layer_architecture/#quick-reference-your-architecture","title":"Quick Reference: Your Architecture","text":""},{"location":"ai/layer_architecture/#current-simple-panels","title":"Current (Simple Panels)","text":"<pre><code>// Layer 1: Scene Controller\npublic class StartMenuController : MonoBehaviour\n{\n    [SerializeField] private StartMenuPanelHost _startMenuPanel;\n\n    private void OnEnable()\n    {\n        _startMenuPanel.Generate();\n        _startMenuPanel.OnPlayClicked += HandlePlay;\n    }\n\n    private void HandlePlay()\n    {\n        BootstrapManager.Instance.LoadScene(\"Hub\");\n    }\n}\n\n// Layer 2: Panel Host\npublic class StartMenuPanelHost : BasePanelHost\n{\n    public event Action OnPlayClicked;\n    private StartMenuPanelView _view;\n\n    public override void Generate()\n    {\n        _view = new StartMenuPanelView(uiDocument.rootVisualElement, styleSheet);\n        _view.OnPlayClicked += () =&gt; OnPlayClicked?.Invoke();\n        Show();\n    }\n}\n\n// Layer 3: View\npublic class StartMenuPanelView : BasePanelView\n{\n    public event Action OnPlayClicked;\n\n    protected override void GenerateUI(VisualElement root)\n    {\n        var playButton = UIToolkitFactory.CreateButton(\"Play\");\n        playButton.clicked += () =&gt; OnPlayClicked?.Invoke();\n        // ...\n    }\n}\n</code></pre>"},{"location":"ai/layer_architecture/#with-viewmodel-complex-panels","title":"With ViewModel (Complex Panels)","text":"<pre><code>// Layer 2: Panel Host\npublic class SettingsPanelHost : BasePanelHost\n{\n    private SettingsViewModel _viewModel;\n    private SettingsPanelView _view;\n\n    public override void Generate()\n    {\n        var model = new SettingsModel { Volume = 0.5f };\n        _viewModel = new SettingsViewModel(model);\n        _viewModel.OnVolumePreview += volume =&gt; AudioListener.volume = volume;\n\n        _view = new SettingsPanelView(\n            uiDocument.rootVisualElement,\n            styleSheet,\n            _viewModel // Pass ViewModel\n        );\n\n        Show();\n    }\n}\n\n// Layer 2.5: ViewModel\npublic class SettingsViewModel\n{\n    public ObservableProperty&lt;float&gt; Volume { get; }\n    public ObservableProperty&lt;string&gt; VolumeText { get; }\n    public event Action&lt;float&gt; OnVolumePreview;\n\n    public void UpdateVolume(float value)\n    {\n        Volume.Value = value;\n        VolumeText.Value = $\"Volume: {value:P0}\";\n        OnVolumePreview?.Invoke(value);\n    }\n}\n\n// Layer 3: View\npublic class SettingsPanelView : BasePanelView\n{\n    private SettingsViewModel _viewModel;\n\n    public SettingsPanelView(VisualElement root, StyleSheet styleSheet, SettingsViewModel viewModel)\n    {\n        _viewModel = viewModel;\n        GenerateUI(root);\n        BindToViewModel();\n    }\n\n    private void BindToViewModel()\n    {\n        var slider = Container.Q&lt;Slider&gt;(\"VolumeSlider\");\n        slider.RegisterValueChangedCallback(evt =&gt; _viewModel.UpdateVolume(evt.newValue));\n\n        var label = Container.Q&lt;Label&gt;(\"VolumeLabel\");\n        _viewModel.VolumeText.ValueChanged += text =&gt; label.text = text;\n    }\n}\n</code></pre>"},{"location":"ai/layer_architecture/#summary","title":"Summary","text":"<p>Your Current Architecture:</p> <pre><code>\u2705 Scene Controller (multi-panel coordination)\n\u2705 Panel Host (lifecycle, Show/Hide, animations)\n\u2705 View (UI generation)\n\u26a0\ufe0f ViewModel (add only when needed)\n</code></pre> <p>This is BETTER than standard MVVM for Unity because: 1. Separates scene-level vs panel-level concerns 2. Panel lifecycle is explicit (Host layer) 3. Animations/transitions managed in one place 4. ViewModel only added when there's actual presentation logic</p> <p>What to change: 1. Minor cleanup in StartMenuController (remove redundant SubscribeEvents call) 2. Consider generating panels once, then Show/Hide 3. Add ViewModel layer when panels get complex (Settings, Inventory, Stats)</p> <p>You're already doing it right! Just add ViewModel when you have: - Formatting logic - Validation - Computed properties - Complex state management</p> <p>For simple menus like your StartMenu, your current pattern is perfect! \ud83c\udfaf</p>"},{"location":"references/uitk_refs/","title":"UI Toolkit Unity References","text":"<p>Some links to videos and docs relating to UI Toolkit and it's recent updates in Unity 6.3</p>"},{"location":"references/uitk_refs/#official-unity-resources","title":"Official Unity Resources","text":"<p>Official Resources by Unity themselves. All created recently as they have been really pushing UI Toolkit in Unity 6.</p>"},{"location":"references/uitk_refs/#unity-documents","title":"Unity Documents","text":"<ul> <li>Getting Started - UI Shader Graph</li> </ul>"},{"location":"references/uitk_refs/#unity-repos","title":"Unity Repos","text":"<ul> <li>Bagel Game - UITK World Space Demo</li> </ul>"},{"location":"references/uitk_refs/#unity-videos","title":"Unity Videos","text":"<ul> <li>UITK Intro Series - Brand New</li> </ul>"},{"location":"research/shader_graph/","title":"Shader Graph in UI Toolkit","text":""},{"location":"research/shader_graph/#overview","title":"Overview","text":"<p>As of Unity 6.3, Shader Graph Materials can now be applied directly to UITK Visual Elements to improve the graphical quality while maintaining the performance.</p> <p>Some effects are still bad for VR and some effects like gradients should be done in USS, but for vector graphics backgrounds, scanlines, vignette, clouds, these can all be added now.</p> <p>It is a very new implementation so resources are scarce but at least Unity are doing a big push promoting it right now. </p>"},{"location":"research/shader_graph/#implementation","title":"Implementation","text":"<p>When generating UI Toolkit through code, it is very easy to quickly add effects and styles through a factory and the builder pattern which is what I have done in the past.</p> <p>From what I have seen I should be able to get material implementation working alright. The main challenge will be finding what looks good without tanking performance too much. </p> <p>Did some tests and passed it back and forth with Claude Sonnet 4.5 and it told me that a styled panel with some shader effects layed on top would come in at &gt; 0.15ms render time on the quest 2 since the shaders are all done through math and the base UITK Panel is only a single draw call combined.</p>"},{"location":"research/shader_graph/#resources","title":"Resources","text":""},{"location":"research/shader_graph/#youtube-videos","title":"YouTube Videos","text":"<ul> <li> <p>Shader Graph in UITK</p> </li> <li> <p>Cam Ayres Vid (He Works for Unity)</p> </li> </ul>"},{"location":"research/vr_integration/","title":"UITK VR Integration","text":""}]}