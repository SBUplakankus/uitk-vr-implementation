{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"UI Toolkit in VR","text":""},{"location":"#overview","title":"Overview","text":""},{"location":"#intro","title":"Intro","text":"<p>This site is looking into implemnenting UI Toolkit andthe latest Unity UI Workflows in a VR Application based off the Meta XR SDK.</p> <p>The main challenge will be transitioning all possible visual elements from UGUI to UITK while keeping the Meta Poke Interactables for the tactile VR Experience.</p> <p>From what I have seen Avatar Academy right now uses UGUI layered on top of a 3D Tablet Model with the poke interactables on top of the UGUI with an audio filter at the bottom.</p> <p>Aiming to work with the Meta Quest 2 as a baseline for performance. If you're brand new to UI Toolkit, to official Unity E-Book is the best resource to get started with.</p>"},{"location":"#goals","title":"Goals","text":"<p>The goal will be to replace the 3D and UGUI Layer with a single UITK Panel, then have the XR Interactables layered on top. The UI Panels should be able to be generated through code by Immersives, but have their design easily modifiable by creatives who can tweak values themselves, or pass it onto an immersive who can easily do it in 5 minutes.</p> <p>One of the main ideas I have had is taking advantage of a \"style sheet\"\" scriptable object class which can set the USS Style Sheet variables to quickly change the look of the project. This would also allow us to set different presets so users could customize the application however they wish. Or we could even make it fully customisable to the user who can select primary, secondary colours, font, background style etc. </p> <p>Features like this are the main benefit to switching from UGUI to code generated UI.</p>"},{"location":"#challenges","title":"Challenges","text":"<p>UITK in VR is pretty much brand new since it only became available a couple months ago so we would be among the first to develop something at a decent scale through it from what I can tell. This is a challenge since we don't have many online resources. </p> <p>Unity however are really pushing it recently with a full YouTube series being launched and updated regularly as of writing this 2nd February 2026. Will be important to document progress and share knowledge as integrations goes along so everyone isn't discovering things for the first time.</p>"},{"location":"#design-patterns","title":"Design Patterns","text":""},{"location":"#factories","title":"Factories","text":"<p>You can code the UXML Documents for specific static panels that won't change at run time. This is just like making a html page. For generating in C# it is best to use factories for visual element creation. All of the UXML Elements can be made through C# but it is alot of boilerplate so you can just ask AI to generate them for you and they will work perfectly. It's then easy to modify each of the functions and add variations for specific styles where needed. I use Claude Sonnet 4.5 on the free tier which is pretty good.</p>"},{"location":"#constants-and-references","title":"Constants and References","text":"<p>The main downside to UITK right now is that it is ran on strings so a constants class is crucial for passing through styles in C#. I just make a UIToolkitStyles class to store them all in for type-safety. It is also good to cache the visual elements on creation so you don't need to run string queries to find the element when trying to update at runtime. </p>"},{"location":"#builder","title":"Builder","text":"<p>It'll also be good to implement the builder pattern to quickly and safely generate the panels in the C# view classes. The main problem I came across myself was all my view classes becoming repetetive long lists of Factory calls and adding to elements so this could be done much more smoothly on a bigger project. Would need to figure out the specifics but it'll still probably be better to create elements that need to be cached directly from the factory then add them, but the builder can easily set the containers, styles, text, images, shaders, etc.</p>"},{"location":"#site-contents","title":"Site Contents","text":""},{"location":"#references","title":"References","text":"<p>Links to official Unity Documentation and Videos about UI Toolkit and Shader Graph for UI Toolkit.</p>"},{"location":"#research","title":"Research","text":"<p>Pages on specific elements of the system such as UITK Shader Graph implementation, Integration with VR, and converting modern web styling to USS for use in Unity.</p>"},{"location":"#ai-docs","title":"AI Docs","text":"<p>Docs generated by Claude Sonnet 4.6. Since it is new there is little resources for it to scour, but it is good at giving an overview and general ideas since the workflow is essentially trying to replicate Software UI Programming in Unity.</p> <p>Good for an initial reference and overview when new to the topic but be careful with it hallucinating stuff due to the workflow still being new. </p>"},{"location":"ai/bg_analysis/","title":"BagelGame \u2014 Sample Analysis","text":"<p>Repo: Unity-Technologies/BagelGame Branch: <code>6.3</code> (Unity 6.3 LTS) Language split: C# 93% / HLSL 7% Purpose: Full vertical game demonstrating UI Toolkit for 3D games</p>"},{"location":"ai/bg_analysis/#what-it-actually-is","title":"What It Actually Is","text":"<p>BagelGame is a physics-based 3D game where you navigate a bagel to a toaster before it goes stale. The game itself is deliberately simple \u2014 the point is the UI, not the gameplay. Unity describe it as a \"full vertical,\" meaning it's a complete, shippable game slice rather than a toy scene, so all the UI features are implemented in a realistic, connected context rather than isolated demos.</p> <p>It is the closest thing to an official reference implementation for production UI Toolkit in Unity 6.3.</p>"},{"location":"ai/bg_analysis/#confirmed-features","title":"Confirmed Features","text":"<p>These are taken directly from the official README \u2014 not inferred or speculated:</p> <ul> <li>World Space UI \u2014 UITK panels rendered into 3D game space</li> <li>Custom Shaders \u2014 Shader Graph integration with UI elements</li> <li>Filters \u2014 USS filter effects (available as of Unity 6.3)</li> <li>Data Bindings \u2014 Runtime data binding (Unity 6 feature)</li> <li>UXML / USS \u2014 Declarative structure and styling</li> <li>Themes \u2014 Dynamic theme switching system</li> <li>Input System Integration \u2014 New Input System, not legacy</li> </ul>"},{"location":"ai/bg_analysis/#why-it-matters-for-this-project","title":"Why It Matters for This Project","text":""},{"location":"ai/bg_analysis/#1-world-space-ui","title":"1. World Space UI","text":"<p>This is the most directly relevant feature. BagelGame demonstrates UITK panels in 3D space, which is the same fundamental problem as rendering a UI panel on a virtual tablet in VR. The render pipeline \u2014 Panel Settings \u2192 Render Texture \u2192 world-space quad \u2014 is the same approach regardless of whether the viewer is in a headset or not.</p> <p>Gap to be aware of: BagelGame targets desktop PC, not Quest 2. The world space setup won't account for the mobile GPU constraints or the render texture resolution tradeoffs at Quest 2's display density. Treat it as the architectural pattern, not the performance-tuned implementation.</p>"},{"location":"ai/bg_analysis/#2-shader-graph-filters","title":"2. Shader Graph + Filters","text":"<p>The C#/HLSL split (93/7) tells you HLSL is present but not dominant. The shader work is likely targeted effects rather than a full custom rendering pipeline. This aligns with Unity 6.3's USS filter system, which is the recommended approach for effects like blur and glow without breaking batching.</p> <p>Key constraint from Unity 6.3: Applying a custom shader to a UITK element affects that element and all its children. This matters for how you structure the visual hierarchy \u2014 glass panels with children need careful thought.</p> <p>Batching note: More than 6 unique un-atlased textures in a UITK hierarchy breaks batching. This is a hard limit worth knowing early.</p>"},{"location":"ai/bg_analysis/#3-data-bindings","title":"3. Data Bindings","text":"<p>Unity 6 introduced runtime <code>SerializedObject</code> binding. BagelGame uses this to keep game state (score, toppings, time) in sync with UI labels and progress bars automatically. This is directly applicable to syncing VR interaction state with visual feedback.</p>"},{"location":"ai/bg_analysis/#4-themes","title":"4. Themes","text":"<p>The theme system is one of the more transferable patterns. CSS custom properties (<code>:root</code> variables in USS) can be updated at runtime to retheme the entire panel without touching individual elements. This maps directly to the ScriptableObject-driven theme preset idea described in the index page.</p>"},{"location":"ai/bg_analysis/#5-input-system","title":"5. Input System","text":"<p>BagelGame uses the New Input System. This is relevant context but not directly portable to VR \u2014 Meta's Poke Interactables sit above the input layer and don't feed through Unity's standard Input System event pipeline to UITK. The interaction bridge between Meta SDK and UITK panels needs to be custom.</p>"},{"location":"ai/bg_analysis/#honest-gaps-what-bagelgame-doesnt-cover","title":"Honest Gaps (What BagelGame Doesn't Cover)","text":"<p>These are things you will need to solve yourself:</p> Gap Why It Matters No Quest 2 / XR target No mobile GPU perf tuning, no headset rendering path No hand tracking or poke interaction Meta SDK integration is entirely absent Desktop input model Controller ray and poke events don't map to standard UITK pointer events No performance budgeting for VR 72/90Hz target, foveated rendering, thermal constraints all absent No accessibility / comfort patterns VR UI ergonomics (panel distance, FOV, readable text size) not addressed"},{"location":"ai/bg_analysis/#what-to-actually-study-in-the-repo","title":"What to Actually Study in the Repo","text":"<p>Rather than reading the code to copy patterns verbatim, focus on:</p> <ol> <li>How Panel Settings is configured for world space \u2014 the <code>SetScreenToPanelSpaceFunction</code> override is the critical piece for mapping controller input to panel coordinates</li> <li>How themes are structured in USS \u2014 specifically how <code>:root</code> variables are declared and whether they swap USS sheets entirely or patch variables at runtime</li> <li>How the shader materials are assigned \u2014 via USS <code>filter</code> property or via the experimental <code>SetMaterial</code> API, since these have different batching implications</li> <li>The data model structure \u2014 how GameData ScriptableObjects are shaped for <code>SerializedObject</code> binding, since this pattern is directly reusable</li> </ol>"},{"location":"ai/bg_analysis/#unity-63-context","title":"Unity 6.3 Context","text":"<p>BagelGame was built against Unity 6.3 LTS, which is when several long-awaited UITK features landed:</p> <ul> <li>Custom shader support via USS filters (6.3)</li> <li>World space UI as a first-class feature (6.2/6.3)</li> <li>SVG support integrated natively (no separate package needed)</li> <li>Runtime data binding stabilised</li> </ul> <p>This means the patterns in BagelGame were not possible before mid-2025. Any older UITK tutorials or Stack Overflow answers predate these APIs and should be treated with caution.</p>"},{"location":"ai/bg_analysis/#current-uitk-limitations-as-of-63","title":"Current UITK Limitations (as of 6.3)","text":"<p>Relevant gaps that BagelGame won't help with because they're engine-level:</p> <ul> <li>No dynamic text gradients \u2014 static only, or implement via custom text animation</li> <li>Rich text tags (<code>&lt;color&gt;</code>, <code>&lt;link&gt;</code>) can't be targeted by USS \u2014 no dynamic styling on inline text</li> <li>No anti-aliasing on <code>VectorImage</code> elements</li> <li>No glow/drop shadow natively \u2014 USS filters are the workaround as of 6.3</li> <li>Batching breaks above 6 unique un-atlased textures in a hierarchy</li> </ul>"},{"location":"ai/bg_analysis/#relationship-to-this-project","title":"Relationship to This Project","text":"<p>BagelGame is the best available reference for the UITK architecture layer \u2014 world space rendering, theming, data binding, shader effects. It is not a reference for the VR interaction layer. The split in this project's architecture mirrors that:</p> <pre><code>BagelGame covers:        This project must add:\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500     \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nWorld space UITK panel   Meta Poke Interactable layer\nUSS theming              ScriptableObject theme presets  \nData binding             VR-specific state (hand pose, etc.)\nShader Graph effects     Quest 2 performance budgeting\nInput System (desktop)   Meta SDK input bridge\n</code></pre> <p>Clone it, run it, open the USS files and the Panel Settings configuration. Don't treat the C# controllers as copy-paste templates \u2014 understand the pattern, then implement it against your own architecture.</p> <p>Analysis based on the public README, confirmed Unity 6.3 feature set, and official Unity documentation. Internal file structure not verified \u2014 clone the repo to inspect actual class names and scene hierarchy.</p>"},{"location":"ai/cs_implementation/","title":"Factory \u2192 Builder \u2192 View \u2192 Host \u2192 Controller","text":"<p>Pattern: Code-generated UITK panels for the Training App Examples: Login, Settings (with tabs), Module instructions Note: Code samples are demonstrative \u2014 not production-complete</p>"},{"location":"ai/cs_implementation/#layer-overview","title":"Layer Overview","text":"<pre><code>UIFactory          creates individual elements with correct USS classes\nPanelBuilder       assembles elements into layouts, returns cached refs\n*PanelView         pure C#, calls builder, wires internal events, exposes them upward  \n*PanelHost         MonoBehaviour, panel lifecycle, Unity API calls\nAppController      MonoBehaviour, scene orchestration, navigation\n</code></pre> <p>Each layer has one job. The View never touches Unity APIs. The Host never touches raw <code>VisualElement</code> creation. The Controller never queries the UI directly.</p>"},{"location":"ai/cs_implementation/#uistyles-string-constants","title":"UIStyles \u2014 String Constants","text":"<p>Every USS class name lives here. Never use raw strings anywhere else in the codebase. If a class name changes in USS, there is one place to update it.</p> <pre><code>public static class UIStyles\n{\n    // Layout\n    public const string PanelRoot        = \"panel-root\";\n    public const string PanelHeader      = \"panel-header\";\n    public const string PanelBody        = \"panel-body\";\n    public const string PanelFooter      = \"panel-footer\";\n    public const string Row              = \"row\";\n    public const string Column           = \"column\";\n    public const string Spacer           = \"spacer\";\n\n    // Typography\n    public const string TitleLarge       = \"title-large\";\n    public const string TitleMedium      = \"title-medium\";\n    public const string BodyText         = \"body-text\";\n    public const string LabelText        = \"label-text\";\n    public const string CaptionText      = \"caption-text\";\n\n    // Buttons\n    public const string BtnPrimary       = \"btn-primary\";\n    public const string BtnSecondary     = \"btn-secondary\";\n    public const string BtnGhost         = \"btn-ghost\";\n    public const string BtnTab           = \"btn-tab\";\n    public const string BtnTabActive     = \"btn-tab--active\";\n    public const string BtnIcon          = \"btn-icon\";\n    public const string BtnDanger        = \"btn-danger\";\n\n    // Inputs\n    public const string InputGroup       = \"input-group\";\n    public const string InputLabel       = \"input-label\";\n    public const string InputField       = \"input-field\";\n    public const string InputError       = \"input-field--error\";\n\n    // Components\n    public const string Card             = \"card\";\n    public const string CardActive       = \"card--active\";\n    public const string CardLocked       = \"card--locked\";\n    public const string GlassPanel       = \"glass-panel\";\n    public const string Divider          = \"divider\";\n    public const string TabBar           = \"tab-bar\";\n    public const string TabContent       = \"tab-content\";\n    public const string ProgressTrack    = \"progress-track\";\n    public const string ProgressFill     = \"progress-fill\";\n    public const string ProgressLabel    = \"progress-label\";\n    public const string StepItem         = \"step-item\";\n    public const string StepItemComplete = \"step-item--complete\";\n    public const string StepItemActive   = \"step-item--active\";\n\n    // State\n    public const string Hidden           = \"hidden\";\n    public const string Disabled         = \"disabled\";\n    public const string FadeIn           = \"fade-in\";\n    public const string Loading          = \"loading\";\n}\n</code></pre>"},{"location":"ai/cs_implementation/#uifactory","title":"UIFactory","text":"<p>Creates individual elements. No layout assembly here \u2014 just correctly classed elements ready to be placed by a builder.</p> <p>Tuple returns are used throughout so callers get both the wrapper group and the interactive element without needing to query for either.</p> <pre><code>public static class UIFactory\n{\n    // \u2500\u2500 Containers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    public static VisualElement CreateContainer(params string[] classes)\n    {\n        var el = new VisualElement();\n        foreach (var c in classes) el.AddToClassList(c);\n        return el;\n    }\n\n    public static VisualElement CreateRow(params string[] extraClasses)\n    {\n        var el = new VisualElement();\n        el.AddToClassList(UIStyles.Row);\n        foreach (var c in extraClasses) el.AddToClassList(c);\n        return el;\n    }\n\n    public static VisualElement CreateColumn(params string[] extraClasses)\n    {\n        var el = new VisualElement();\n        el.AddToClassList(UIStyles.Column);\n        foreach (var c in extraClasses) el.AddToClassList(c);\n        return el;\n    }\n\n    public static VisualElement CreateDivider()\n    {\n        var el = new VisualElement();\n        el.AddToClassList(UIStyles.Divider);\n        return el;\n    }\n\n    public static VisualElement CreateGlassPanel()\n    {\n        var el = new VisualElement();\n        el.AddToClassList(UIStyles.GlassPanel);\n        return el;\n    }\n\n    // \u2500\u2500 Text \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    public static Label CreateLabel(string text, string styleClass = UIStyles.BodyText)\n    {\n        var label = new Label(text);\n        label.AddToClassList(styleClass);\n        return label;\n    }\n\n    public static Label CreateTitle(string text, bool large = true)\n        =&gt; CreateLabel(text, large ? UIStyles.TitleLarge : UIStyles.TitleMedium);\n\n    // \u2500\u2500 Buttons \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    public static Button CreateButton(string text, string styleClass = UIStyles.BtnPrimary)\n    {\n        var btn = new Button { text = text };\n        btn.AddToClassList(styleClass);\n        return btn;\n    }\n\n    public static Button CreateTabButton(string text)\n    {\n        var btn = new Button { text = text };\n        btn.AddToClassList(UIStyles.BtnTab);\n        return btn;\n    }\n\n    public static Button CreateIconButton(Sprite icon, string tooltip = \"\")\n    {\n        var btn = new Button();\n        btn.AddToClassList(UIStyles.BtnIcon);\n        btn.tooltip = tooltip;\n        if (icon != null)\n            btn.style.backgroundImage = new StyleBackground(icon);\n        return btn;\n    }\n\n    // \u2500\u2500 Inputs \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    public static (VisualElement group, TextField field) CreateTextField(\n        string labelText, string placeholder = \"\")\n    {\n        var group = new VisualElement();\n        group.AddToClassList(UIStyles.InputGroup);\n\n        var label = CreateLabel(labelText, UIStyles.InputLabel);\n        var field = new TextField { value = placeholder };\n        field.AddToClassList(UIStyles.InputField);\n\n        group.Add(label);\n        group.Add(field);\n\n        return (group, field);\n    }\n\n    public static (VisualElement group, TextField field) CreatePasswordField(string labelText)\n    {\n        var (group, field) = CreateTextField(labelText);\n        field.isPasswordField = true;\n        return (group, field);\n    }\n\n    public static (VisualElement group, Slider slider, Label valueLabel) CreateSlider(\n        string labelText, float min, float max, float initial)\n    {\n        var group = new VisualElement();\n        group.AddToClassList(UIStyles.InputGroup);\n\n        var headerRow = CreateRow();\n        headerRow.Add(CreateLabel(labelText, UIStyles.InputLabel));\n\n        var valueLabel = CreateLabel(initial.ToString(\"0%\"), UIStyles.CaptionText);\n        headerRow.Add(valueLabel);\n\n        var slider = new Slider(min, max) { value = initial };\n        slider.AddToClassList(UIStyles.InputField);\n\n        group.Add(headerRow);\n        group.Add(slider);\n\n        return (group, slider, valueLabel);\n    }\n\n    public static (VisualElement group, Toggle toggle) CreateToggle(\n        string labelText, bool initial = false)\n    {\n        var group = new VisualElement();\n        group.AddToClassList(UIStyles.InputGroup);\n\n        var toggle = new Toggle(labelText) { value = initial };\n        group.Add(toggle);\n\n        return (group, toggle);\n    }\n\n    public static (VisualElement group, DropdownField dropdown) CreateDropdown(\n        string labelText, List&lt;string&gt; choices, int defaultIndex = 0)\n    {\n        var group = new VisualElement();\n        group.AddToClassList(UIStyles.InputGroup);\n\n        group.Add(CreateLabel(labelText, UIStyles.InputLabel));\n\n        var dropdown = new DropdownField(choices, defaultIndex);\n        dropdown.AddToClassList(UIStyles.InputField);\n        group.Add(dropdown);\n\n        return (group, dropdown);\n    }\n\n    // \u2500\u2500 Composite \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    public static (VisualElement track, VisualElement fill, Label label) CreateProgressBar(\n        string labelText = \"\")\n    {\n        var track = new VisualElement();\n        track.AddToClassList(UIStyles.ProgressTrack);\n\n        var fill = new VisualElement();\n        fill.AddToClassList(UIStyles.ProgressFill);\n        track.Add(fill);\n\n        var label = CreateLabel(labelText, UIStyles.ProgressLabel);\n\n        return (track, fill, label);\n    }\n\n    public static (VisualElement card, Label title, Label body) CreateCard(\n        string title, string body)\n    {\n        var card = new VisualElement();\n        card.AddToClassList(UIStyles.Card);\n\n        var titleLabel = CreateLabel(title, UIStyles.TitleMedium);\n        var bodyLabel  = CreateLabel(body, UIStyles.BodyText);\n\n        card.Add(titleLabel);\n        card.Add(bodyLabel);\n\n        return (card, titleLabel, bodyLabel);\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#panelbuilder","title":"PanelBuilder","text":"<p>The base builder handles the panel skeleton. Typed subclasses add panel-specific elements and return typed element results \u2014 a simple record of every element the View will need at runtime.</p> <p>The View holds this result and never runs <code>Q&lt;&gt;()</code> after build time. If a builder's internals change, the compiler tells you what broke in the View.</p>"},{"location":"ai/cs_implementation/#base-builder","title":"Base Builder","text":"<pre><code>public class PanelBuilder\n{\n    protected readonly VisualElement _root;\n    protected VisualElement _body;\n    protected VisualElement _footer;\n\n    public PanelBuilder(VisualElement root)\n    {\n        _root = root;\n        _root.AddToClassList(UIStyles.PanelRoot);\n    }\n\n    public PanelBuilder AddHeader(string title)\n    {\n        var header = new VisualElement();\n        header.AddToClassList(UIStyles.PanelHeader);\n        header.Add(UIFactory.CreateTitle(title));\n        _root.Add(header);\n        return this;\n    }\n\n    // Variant for panels that need a back button in the header\n    public PanelBuilder AddHeaderWithBack(string title, out Button backButton)\n    {\n        var header = new VisualElement();\n        header.AddToClassList(UIStyles.PanelHeader);\n\n        var row = UIFactory.CreateRow();\n        backButton = UIFactory.CreateButton(\"\u2190\", UIStyles.BtnGhost);\n        row.Add(backButton);\n        row.Add(UIFactory.CreateTitle(title, large: false));\n        header.Add(row);\n        _root.Add(header);\n        return this;\n    }\n\n    // Variant for headers that need a right-side action button\n    public PanelBuilder AddHeaderWithAction(string title, out Label titleLabel,\n        out Button actionButton, string actionText = \"\u2699\")\n    {\n        var header = new VisualElement();\n        header.AddToClassList(UIStyles.PanelHeader);\n\n        var row = UIFactory.CreateRow();\n        titleLabel   = UIFactory.CreateTitle(title, large: false);\n        actionButton = UIFactory.CreateButton(actionText, UIStyles.BtnGhost);\n\n        row.Add(titleLabel);\n        row.Add(actionButton);\n        header.Add(row);\n        _root.Add(header);\n        return this;\n    }\n\n    protected VisualElement EnsureBody()\n    {\n        if (_body != null) return _body;\n        _body = new VisualElement();\n        _body.AddToClassList(UIStyles.PanelBody);\n        _root.Add(_body);\n        return _body;\n    }\n\n    protected VisualElement EnsureFooter()\n    {\n        if (_footer != null) return _footer;\n        _footer = new VisualElement();\n        _footer.AddToClassList(UIStyles.PanelFooter);\n        _root.Add(_footer);\n        return _footer;\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#typed-element-results","title":"Typed Element Results","text":"<p>Each builder returns one of these. The View holds the result and accesses elements by name \u2014 no string queries after build time.</p> <pre><code>public class LoginElements\n{\n    public TextField     UsernameField { get; init; }\n    public TextField     PasswordField { get; init; }\n    public Button        LoginButton   { get; init; }\n    public Label         ErrorLabel    { get; init; }\n}\n\npublic class DashboardElements\n{\n    public Label         WelcomeLabel   { get; init; }\n    public VisualElement ProgressFill   { get; init; }\n    public Label         ProgressLabel  { get; init; }\n    public VisualElement ModuleList     { get; init; }\n    public Button        SettingsButton { get; init; }\n}\n\npublic class SettingsElements\n{\n    public Button        VisualTab          { get; init; }\n    public Button        AudioTab           { get; init; }\n    public VisualElement VisualContent      { get; init; }\n    public VisualElement AudioContent       { get; init; }\n    public DropdownField ThemeDropdown      { get; init; }\n    public Toggle        HighContrastToggle { get; init; }\n    public Slider        MasterSlider       { get; init; }\n    public Label         MasterValueLabel   { get; init; }\n    public Slider        MusicSlider        { get; init; }\n    public Label         MusicValueLabel    { get; init; }\n    public Slider        SFXSlider          { get; init; }\n    public Label         SFXValueLabel      { get; init; }\n    public Button        BackButton         { get; init; }\n}\n\npublic class ModuleElements\n{\n    public Label         ModuleTitleLabel  { get; init; }\n    public Label         InstructionsLabel { get; init; }\n    public VisualElement MediaContainer    { get; init; }\n    public VisualElement StepList         { get; init; }\n    public Button        PreviousButton   { get; init; }\n    public Button        NextButton       { get; init; }\n    public Label         StepCountLabel   { get; init; }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#login-builder","title":"Login Builder","text":"<pre><code>public class LoginBuilder : PanelBuilder\n{\n    public LoginBuilder(VisualElement root) : base(root) { }\n\n    public LoginElements Build()\n    {\n        AddHeader(\"Welcome Back\");\n        var body = EnsureBody();\n\n        var (userGroup, usernameField) = UIFactory.CreateTextField(\"Username\");\n        var (passGroup, passwordField) = UIFactory.CreatePasswordField(\"Password\");\n\n        // Error label starts hidden \u2014 shown by the View on validation or auth failure\n        var errorLabel = UIFactory.CreateLabel(\"\", UIStyles.CaptionText);\n        errorLabel.AddToClassList(UIStyles.Hidden);\n\n        body.Add(userGroup);\n        body.Add(passGroup);\n        body.Add(errorLabel);\n\n        var footer      = EnsureFooter();\n        var loginButton = UIFactory.CreateButton(\"Sign In\");\n        footer.Add(loginButton);\n\n        return new LoginElements\n        {\n            UsernameField = usernameField,\n            PasswordField = passwordField,\n            LoginButton   = loginButton,\n            ErrorLabel    = errorLabel\n        };\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#dashboard-builder","title":"Dashboard Builder","text":"<pre><code>public class DashboardBuilder : PanelBuilder\n{\n    public DashboardBuilder(VisualElement root) : base(root) { }\n\n    public DashboardElements Build()\n    {\n        // Header with welcome text and settings button in the corner\n        AddHeaderWithAction(\"Hello\", out var welcomeLabel, out var settingsButton);\n\n        var body = EnsureBody();\n\n        // Overall progress section\n        var (progressTrack, progressFill, progressLabel) =\n            UIFactory.CreateProgressBar(\"Overall Progress\");\n\n        body.Add(progressLabel);\n        body.Add(progressTrack);\n        body.Add(UIFactory.CreateDivider());\n\n        // Module list \u2014 View calls PopulateModules() to fill this at runtime\n        body.Add(UIFactory.CreateLabel(\"Modules\", UIStyles.TitleMedium));\n        var moduleList = UIFactory.CreateColumn();\n        body.Add(moduleList);\n\n        return new DashboardElements\n        {\n            WelcomeLabel   = welcomeLabel,\n            ProgressFill   = progressFill,\n            ProgressLabel  = progressLabel,\n            ModuleList     = moduleList,\n            SettingsButton = settingsButton\n        };\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#settings-builder-tab-pattern","title":"Settings Builder \u2014 Tab Pattern","text":"<pre><code>public class SettingsBuilder : PanelBuilder\n{\n    private static readonly List&lt;string&gt; ThemeChoices =\n        new() { \"Default\", \"Dark\", \"Light\", \"High Contrast\" };\n\n    public SettingsBuilder(VisualElement root) : base(root) { }\n\n    public SettingsElements Build()\n    {\n        AddHeaderWithBack(\"Settings\", out var backButton);\n        var body = EnsureBody();\n\n        // \u2500\u2500 Tab bar \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n        var tabBar   = UIFactory.CreateRow(UIStyles.TabBar);\n        var visualTab = UIFactory.CreateTabButton(\"Visual\");\n        var audioTab  = UIFactory.CreateTabButton(\"Audio\");\n        visualTab.AddToClassList(UIStyles.BtnTabActive); // default active tab\n        tabBar.Add(visualTab);\n        tabBar.Add(audioTab);\n        body.Add(tabBar);\n\n        // \u2500\u2500 Visual tab content \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n        var visualContent = UIFactory.CreateColumn(UIStyles.TabContent);\n\n        var (themeGroup, themeDropdown)     = UIFactory.CreateDropdown(\"Theme\", ThemeChoices);\n        var (contrastGroup, contrastToggle) = UIFactory.CreateToggle(\"High Contrast Mode\");\n\n        visualContent.Add(themeGroup);\n        visualContent.Add(contrastGroup);\n        body.Add(visualContent);\n\n        // \u2500\u2500 Audio tab content (hidden by default) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n        var audioContent = UIFactory.CreateColumn(UIStyles.TabContent);\n        audioContent.AddToClassList(UIStyles.Hidden);\n\n        var (masterGroup, masterSlider, masterLabel) =\n            UIFactory.CreateSlider(\"Master Volume\", 0f, 1f, 0.8f);\n        var (musicGroup, musicSlider, musicLabel) =\n            UIFactory.CreateSlider(\"Music Volume\", 0f, 1f, 0.5f);\n        var (sfxGroup, sfxSlider, sfxLabel) =\n            UIFactory.CreateSlider(\"SFX Volume\", 0f, 1f, 0.7f);\n\n        audioContent.Add(masterGroup);\n        audioContent.Add(UIFactory.CreateDivider());\n        audioContent.Add(musicGroup);\n        audioContent.Add(sfxGroup);\n        body.Add(audioContent);\n\n        return new SettingsElements\n        {\n            VisualTab          = visualTab,\n            AudioTab           = audioTab,\n            VisualContent      = visualContent,\n            AudioContent       = audioContent,\n            ThemeDropdown      = themeDropdown,\n            HighContrastToggle = contrastToggle,\n            MasterSlider       = masterSlider,\n            MasterValueLabel   = masterLabel,\n            MusicSlider        = musicSlider,\n            MusicValueLabel    = musicLabel,\n            SFXSlider          = sfxSlider,\n            SFXValueLabel      = sfxLabel,\n            BackButton         = backButton\n        };\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#module-builder","title":"Module Builder","text":"<pre><code>public class ModuleBuilder : PanelBuilder\n{\n    public ModuleBuilder(VisualElement root) : base(root) { }\n\n    public ModuleElements Build()\n    {\n        var body = EnsureBody();\n\n        // Title and instructions at the top\n        var moduleTitleLabel  = UIFactory.CreateTitle(\"\", large: false);\n        var instructionsLabel = UIFactory.CreateLabel(\"\", UIStyles.BodyText);\n\n        body.Add(moduleTitleLabel);\n        body.Add(instructionsLabel);\n        body.Add(UIFactory.CreateDivider());\n\n        // Media placeholder \u2014 hidden until the Host sets content\n        var mediaContainer = UIFactory.CreateContainer(UIStyles.Card);\n        mediaContainer.AddToClassList(UIStyles.Hidden);\n        body.Add(mediaContainer);\n\n        // Step checklist \u2014 rebuilt by View on each step change\n        var stepList = UIFactory.CreateColumn();\n        body.Add(stepList);\n\n        // Footer: previous / step counter / next\n        var footer    = EnsureFooter();\n        var footerRow = UIFactory.CreateRow();\n\n        var prevButton     = UIFactory.CreateButton(\"\u2190 Previous\", UIStyles.BtnSecondary);\n        var stepCountLabel = UIFactory.CreateLabel(\"Step 1 of 1\", UIStyles.CaptionText);\n        var nextButton     = UIFactory.CreateButton(\"Next \u2192\", UIStyles.BtnPrimary);\n\n        footerRow.Add(prevButton);\n        footerRow.Add(stepCountLabel);\n        footerRow.Add(nextButton);\n        footer.Add(footerRow);\n\n        return new ModuleElements\n        {\n            ModuleTitleLabel  = moduleTitleLabel,\n            InstructionsLabel = instructionsLabel,\n            MediaContainer    = mediaContainer,\n            StepList          = stepList,\n            PreviousButton    = prevButton,\n            NextButton        = nextButton,\n            StepCountLabel    = stepCountLabel\n        };\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#views","title":"Views","text":"<p>Pure C#. Calls the builder, holds the element result, wires internal events, exposes them upward. No Unity API calls anywhere in this layer \u2014 if something requires <code>AudioListener</code>, <code>QualitySettings</code>, or a service call, it belongs in the Host.</p>"},{"location":"ai/cs_implementation/#login-view","title":"Login View","text":"<pre><code>public class LoginPanelView\n{\n    public event Action&lt;string, string&gt; OnLoginSubmitted;\n\n    private readonly LoginElements _els;\n\n    public LoginPanelView(VisualElement root)\n    {\n        _els = new LoginBuilder(root).Build();\n        Wire();\n    }\n\n    private void Wire()\n    {\n        _els.LoginButton.clicked += OnLoginClicked;\n    }\n\n    private void OnLoginClicked()\n    {\n        ClearError();\n\n        var username = _els.UsernameField.value.Trim();\n        var password = _els.PasswordField.value;\n\n        // Basic client-side validation before raising the event\n        if (string.IsNullOrEmpty(username))\n        {\n            ShowError(\"Please enter your username.\");\n            return;\n        }\n\n        if (string.IsNullOrEmpty(password))\n        {\n            ShowError(\"Please enter your password.\");\n            return;\n        }\n\n        SetInteractable(false);\n        OnLoginSubmitted?.Invoke(username, password);\n    }\n\n    // Called by Host on auth failure\n    public void ShowError(string message)\n    {\n        _els.ErrorLabel.text = message;\n        _els.ErrorLabel.RemoveFromClassList(UIStyles.Hidden);\n        _els.UsernameField.AddToClassList(UIStyles.InputError);\n    }\n\n    public void ClearError()\n    {\n        _els.ErrorLabel.AddToClassList(UIStyles.Hidden);\n        _els.UsernameField.RemoveFromClassList(UIStyles.InputError);\n    }\n\n    // Disabled while auth request is in flight, re-enabled on failure\n    public void SetInteractable(bool on)\n    {\n        _els.LoginButton.SetEnabled(on);\n        _els.UsernameField.SetEnabled(on);\n        _els.PasswordField.SetEnabled(on);\n        _els.LoginButton.text = on ? \"Sign In\" : \"Signing in...\";\n    }\n\n    // VR poke entry point \u2014 mirrors the click path exactly\n    public void HandlePoke(string pokeId)\n    {\n        if (pokeId == PokeIds.Login) OnLoginClicked();\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#settings-view-tab-switching","title":"Settings View \u2014 Tab Switching","text":"<p>Tab state lives entirely in the View. The Host and Controller have no knowledge of which tab is active.</p> <pre><code>public class SettingsPanelView\n{\n    public event Action         OnBackClicked;\n    public event Action&lt;string&gt; OnThemeChanged;\n    public event Action&lt;bool&gt;   OnHighContrastChanged;\n    public event Action&lt;float&gt;  OnMasterVolumeChanged;\n    public event Action&lt;float&gt;  OnMusicVolumeChanged;\n    public event Action&lt;float&gt;  OnSFXVolumeChanged;\n\n    private readonly SettingsElements _els;\n\n    public SettingsPanelView(VisualElement root)\n    {\n        _els = new SettingsBuilder(root).Build();\n        Wire();\n    }\n\n    private void Wire()\n    {\n        _els.BackButton.clicked += () =&gt; OnBackClicked?.Invoke();\n\n        _els.VisualTab.clicked += () =&gt; SwitchTab(audio: false);\n        _els.AudioTab.clicked  += () =&gt; SwitchTab(audio: true);\n\n        _els.ThemeDropdown.RegisterValueChangedCallback(\n            e =&gt; OnThemeChanged?.Invoke(e.newValue));\n\n        _els.HighContrastToggle.RegisterValueChangedCallback(\n            e =&gt; OnHighContrastChanged?.Invoke(e.newValue));\n\n        RegisterVolumeSlider(_els.MasterSlider, _els.MasterValueLabel,\n            v =&gt; OnMasterVolumeChanged?.Invoke(v));\n\n        RegisterVolumeSlider(_els.MusicSlider, _els.MusicValueLabel,\n            v =&gt; OnMusicVolumeChanged?.Invoke(v));\n\n        RegisterVolumeSlider(_els.SFXSlider, _els.SFXValueLabel,\n            v =&gt; OnSFXVolumeChanged?.Invoke(v));\n    }\n\n    // Shared helper avoids repeating the same three-line pattern per slider\n    private void RegisterVolumeSlider(Slider slider, Label label, Action&lt;float&gt; onChange)\n    {\n        slider.RegisterValueChangedCallback(e =&gt;\n        {\n            label.text = e.newValue.ToString(\"0%\");\n            onChange?.Invoke(e.newValue);\n        });\n    }\n\n    private void SwitchTab(bool audio)\n    {\n        _els.VisualTab.EnableInClassList(UIStyles.BtnTabActive, !audio);\n        _els.AudioTab.EnableInClassList(UIStyles.BtnTabActive,   audio);\n        _els.VisualContent.EnableInClassList(UIStyles.Hidden,    audio);\n        _els.AudioContent.EnableInClassList(UIStyles.Hidden,    !audio);\n    }\n\n    // Called by Host.Show() to sync sliders with saved values before panel opens\n    public void SetValues(float master, float music, float sfx,\n        string theme, bool highContrast)\n    {\n        // SetValueWithoutNotify prevents firing change events during initialisation\n        _els.MasterSlider.SetValueWithoutNotify(master);\n        _els.MasterValueLabel.text = master.ToString(\"0%\");\n\n        _els.MusicSlider.SetValueWithoutNotify(music);\n        _els.MusicValueLabel.text = music.ToString(\"0%\");\n\n        _els.SFXSlider.SetValueWithoutNotify(sfx);\n        _els.SFXValueLabel.text = sfx.ToString(\"0%\");\n\n        _els.ThemeDropdown.SetValueWithoutNotify(theme);\n        _els.HighContrastToggle.SetValueWithoutNotify(highContrast);\n    }\n\n    public void HandlePoke(string pokeId)\n    {\n        switch (pokeId)\n        {\n            case PokeIds.Back:      OnBackClicked?.Invoke(); break;\n            case PokeIds.TabVisual: SwitchTab(false);        break;\n            case PokeIds.TabAudio:  SwitchTab(true);         break;\n        }\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#module-view-dynamic-content-per-step","title":"Module View \u2014 Dynamic Content Per Step","text":"<pre><code>public class ModulePanelView\n{\n    public event Action OnPreviousClicked;\n    public event Action OnNextClicked;\n\n    private readonly ModuleElements _els;\n\n    public ModulePanelView(VisualElement root)\n    {\n        _els = new ModuleBuilder(root).Build();\n        Wire();\n    }\n\n    private void Wire()\n    {\n        _els.PreviousButton.clicked += () =&gt; OnPreviousClicked?.Invoke();\n        _els.NextButton.clicked     += () =&gt; OnNextClicked?.Invoke();\n    }\n\n    // Called by Host each time the step index changes\n    public void Populate(ModuleStepData step, int current, int total)\n    {\n        _els.ModuleTitleLabel.text  = step.ModuleTitle;\n        _els.InstructionsLabel.text = step.Instructions;\n        _els.StepCountLabel.text    = $\"Step {current} of {total}\";\n\n        _els.PreviousButton.SetEnabled(current &gt; 1);\n\n        // Last step: change button label to signal completion\n        _els.NextButton.text = current == total ? \"Complete \u2713\" : \"Next \u2192\";\n\n        // Show media only if this step has an image assigned\n        if (step.Media != null)\n        {\n            _els.MediaContainer.style.backgroundImage =\n                new StyleBackground(step.Media);\n            _els.MediaContainer.RemoveFromClassList(UIStyles.Hidden);\n        }\n        else\n        {\n            _els.MediaContainer.AddToClassList(UIStyles.Hidden);\n        }\n\n        RebuildStepList(step.Steps, current);\n    }\n\n    private void RebuildStepList(IList&lt;string&gt; steps, int activeIndex)\n    {\n        _els.StepList.Clear();\n\n        for (int i = 0; i &lt; steps.Count; i++)\n        {\n            var item  = UIFactory.CreateContainer(UIStyles.StepItem);\n            var label = UIFactory.CreateLabel(steps[i], UIStyles.BodyText);\n            item.Add(label);\n\n            if (i &lt; activeIndex - 1)\n                item.AddToClassList(UIStyles.StepItemComplete);\n            else if (i == activeIndex - 1)\n                item.AddToClassList(UIStyles.StepItemActive);\n\n            _els.StepList.Add(item);\n        }\n    }\n\n    public void HandlePoke(string pokeId)\n    {\n        switch (pokeId)\n        {\n            case PokeIds.Next:     OnNextClicked?.Invoke();     break;\n            case PokeIds.Previous: OnPreviousClicked?.Invoke(); break;\n        }\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#vr-interactable-handshake","title":"VR Interactable Handshake","text":"<pre><code>public interface IPokeTarget\n{\n    void OnPoked(string buttonId);\n}\n\npublic static class PokeIds\n{\n    public const string Login     = \"login\";\n    public const string Back      = \"back\";\n    public const string Next      = \"next\";\n    public const string Previous  = \"previous\";\n    public const string TabVisual = \"tab-visual\";\n    public const string TabAudio  = \"tab-audio\";\n}\n</code></pre> <p>The uGUI button sitting above the UITK panel calls <code>host.OnPoked(PokeIds.Next)</code> in its <code>onClick</code>. The Host passes it to <code>view.HandlePoke()</code>, which runs the same code path as a pointer click. Poke and pointer events are in sync with no duplication.</p>"},{"location":"ai/cs_implementation/#hosts","title":"Hosts","text":"<p>MonoBehaviour. Owns the panel lifecycle and handles everything that requires Unity APIs \u2014 audio, quality settings, scene loading, save calls. Views never do this.</p>"},{"location":"ai/cs_implementation/#base-host","title":"Base Host","text":"<pre><code>public abstract class BasePanelHost : MonoBehaviour\n{\n    [SerializeField] protected UIDocument uiDocument;\n    [SerializeField] protected StyleSheet styleSheet;\n\n    protected bool IsGenerated { get; private set; }\n    protected VisualElement Root =&gt; uiDocument.rootVisualElement;\n\n    public virtual void Generate()\n    {\n        if (IsGenerated) Dispose();\n        if (styleSheet != null)\n            Root.styleSheets.Add(styleSheet);\n        IsGenerated = true;\n    }\n\n    public virtual void Show()\n    {\n        Root.RemoveFromClassList(UIStyles.Hidden);\n        Root.AddToClassList(UIStyles.FadeIn);\n    }\n\n    public virtual void Hide()\n    {\n        Root.AddToClassList(UIStyles.Hidden);\n        Root.RemoveFromClassList(UIStyles.FadeIn);\n    }\n\n    public virtual void Dispose()\n    {\n        Root.Clear();\n        Root.styleSheets.Clear();\n        IsGenerated = false;\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#login-host","title":"Login Host","text":"<pre><code>public class LoginPanelHost : BasePanelHost, IPokeTarget\n{\n    public event Action&lt;string, string&gt; OnLoginSubmitted;\n\n    private LoginPanelView _view;\n\n    public override void Generate()\n    {\n        base.Generate();\n        _view = new LoginPanelView(Root);\n        _view.OnLoginSubmitted += (user, pass) =&gt; OnLoginSubmitted?.Invoke(user, pass);\n        Show();\n    }\n\n    // Called by Controller if the auth service returns a failure\n    public void NotifyLoginFailed(string reason)\n    {\n        _view?.ShowError(reason);\n        _view?.SetInteractable(true);\n    }\n\n    public void OnPoked(string buttonId) =&gt; _view?.HandlePoke(buttonId);\n\n    public override void Dispose()\n    {\n        _view = null;\n        base.Dispose();\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#settings-host","title":"Settings Host","text":"<pre><code>public class SettingsPanelHost : BasePanelHost, IPokeTarget\n{\n    [SerializeField] private AppSettings _appSettings;\n\n    public event Action OnBackRequested;\n\n    private SettingsPanelView _view;\n\n    public override void Generate()\n    {\n        base.Generate();\n        _view = new SettingsPanelView(Root);\n\n        _view.OnBackClicked         += () =&gt; OnBackRequested?.Invoke();\n        _view.OnThemeChanged        += name  =&gt; ThemeManager.Instance.Apply(name);\n        _view.OnHighContrastChanged += on    =&gt; ThemeManager.Instance.SetHighContrast(on);\n        _view.OnMasterVolumeChanged += value =&gt;\n        {\n            _appSettings.MasterVolume = value;\n            AudioManager.SetMaster(value);\n        };\n        _view.OnMusicVolumeChanged += value =&gt;\n        {\n            _appSettings.MusicVolume = value;\n            AudioManager.SetMusic(value);\n        };\n        _view.OnSFXVolumeChanged += value =&gt;\n        {\n            _appSettings.SFXVolume = value;\n            AudioManager.SetSFX(value);\n        };\n\n        Hide(); // Settings starts hidden \u2014 shown by Controller on demand\n    }\n\n    public override void Show()\n    {\n        // Sync sliders with current saved values every time the panel opens\n        _view?.SetValues(\n            _appSettings.MasterVolume,\n            _appSettings.MusicVolume,\n            _appSettings.SFXVolume,\n            _appSettings.Theme,\n            _appSettings.HighContrast\n        );\n        base.Show();\n    }\n\n    public void OnPoked(string buttonId) =&gt; _view?.HandlePoke(buttonId);\n\n    public override void Dispose()\n    {\n        _view = null;\n        base.Dispose();\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#module-host","title":"Module Host","text":"<pre><code>public class ModulePanelHost : BasePanelHost, IPokeTarget\n{\n    public event Action OnModuleCompleted;\n\n    private ModulePanelView      _view;\n    private List&lt;ModuleStepData&gt; _steps;\n    private int                  _currentStep;\n\n    public override void Generate()\n    {\n        base.Generate();\n        _view = new ModulePanelView(Root);\n        _view.OnNextClicked     += HandleNext;\n        _view.OnPreviousClicked += HandlePrevious;\n        Hide();\n    }\n\n    public void LoadModule(List&lt;ModuleStepData&gt; steps)\n    {\n        _steps       = steps;\n        _currentStep = 1;\n        RefreshView();\n        Show();\n    }\n\n    private void HandleNext()\n    {\n        if (_currentStep &gt;= _steps.Count)\n        {\n            OnModuleCompleted?.Invoke();\n            return;\n        }\n        _currentStep++;\n        RefreshView();\n    }\n\n    private void HandlePrevious()\n    {\n        if (_currentStep &lt;= 1) return;\n        _currentStep--;\n        RefreshView();\n    }\n\n    private void RefreshView()\n        =&gt; _view?.Populate(_steps[_currentStep - 1], _currentStep, _steps.Count);\n\n    public void OnPoked(string buttonId) =&gt; _view?.HandlePoke(buttonId);\n\n    public override void Dispose()\n    {\n        _view  = null;\n        _steps = null;\n        base.Dispose();\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#appcontroller","title":"AppController","text":"<p>Single MonoBehaviour for the screen set. Owns navigation only \u2014 no UI element references, no builder calls, no direct View interaction.</p> <pre><code>public class AppController : MonoBehaviour\n{\n    [Header(\"Hosts\")]\n    [SerializeField] private LoginPanelHost     _loginHost;\n    [SerializeField] private DashboardPanelHost _dashboardHost;\n    [SerializeField] private SettingsPanelHost  _settingsHost;\n    [SerializeField] private ModulePanelHost    _moduleHost;\n\n    // \u2500\u2500 Lifecycle \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    private void OnEnable()\n    {\n        GenerateAll();\n        SubscribeAll();\n        ShowOnly(_loginHost);\n    }\n\n    private void OnDisable()\n    {\n        UnsubscribeAll();\n    }\n\n    private void GenerateAll()\n    {\n        _loginHost.Generate();\n        _dashboardHost.Generate();\n        _settingsHost.Generate();\n        _moduleHost.Generate();\n    }\n\n    // \u2500\u2500 Subscriptions \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    private void SubscribeAll()\n    {\n        _loginHost.OnLoginSubmitted        += HandleLogin;\n        _dashboardHost.OnSettingsRequested += () =&gt; ShowOnly(_settingsHost);\n        _dashboardHost.OnModuleSelected    += HandleModuleSelected;\n        _settingsHost.OnBackRequested      += () =&gt; ShowOnly(_dashboardHost);\n        _moduleHost.OnModuleCompleted      += HandleModuleCompleted;\n    }\n\n    private void UnsubscribeAll()\n    {\n        _loginHost.OnLoginSubmitted        -= HandleLogin;\n        _dashboardHost.OnSettingsRequested -= () =&gt; ShowOnly(_settingsHost);\n        _dashboardHost.OnModuleSelected    -= HandleModuleSelected;\n        _settingsHost.OnBackRequested      -= () =&gt; ShowOnly(_dashboardHost);\n        _moduleHost.OnModuleCompleted      -= HandleModuleCompleted;\n    }\n\n    // \u2500\u2500 Navigation \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    private void ShowOnly(BasePanelHost target)\n    {\n        _loginHost.Hide();\n        _dashboardHost.Hide();\n        _settingsHost.Hide();\n        _moduleHost.Hide();\n        target.Show();\n    }\n\n    // \u2500\u2500 Handlers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    private void HandleLogin(string username, string password)\n    {\n        // Replace with real auth service call\n        // On success:\n        _dashboardHost.SetUserData(username, progress: 0.4f);\n        _dashboardHost.SetModules(ModuleService.GetAll());\n        ShowOnly(_dashboardHost);\n\n        // On failure:\n        // _loginHost.NotifyLoginFailed(\"Invalid credentials.\");\n    }\n\n    private void HandleModuleSelected(string moduleId)\n    {\n        var steps = ModuleService.GetSteps(moduleId);\n        _moduleHost.LoadModule(steps);\n        ShowOnly(_moduleHost);\n    }\n\n    private void HandleModuleCompleted()\n    {\n        // Update progress data, unlock next module, return to dashboard\n        ShowOnly(_dashboardHost);\n    }\n}\n</code></pre>"},{"location":"ai/cs_implementation/#file-structure","title":"File Structure","text":"<pre><code>Assets/Scripts/UI/\n\u251c\u2500\u2500 Common/\n\u2502   \u251c\u2500\u2500 UIStyles.cs\n\u2502   \u2514\u2500\u2500 IPokeTarget.cs\n\u251c\u2500\u2500 Factory/\n\u2502   \u2514\u2500\u2500 UIFactory.cs\n\u251c\u2500\u2500 Builder/\n\u2502   \u251c\u2500\u2500 PanelBuilder.cs\n\u2502   \u251c\u2500\u2500 LoginBuilder.cs\n\u2502   \u251c\u2500\u2500 DashboardBuilder.cs\n\u2502   \u251c\u2500\u2500 SettingsBuilder.cs\n\u2502   \u2514\u2500\u2500 ModuleBuilder.cs\n\u251c\u2500\u2500 Views/\n\u2502   \u251c\u2500\u2500 LoginPanelView.cs\n\u2502   \u251c\u2500\u2500 DashboardPanelView.cs\n\u2502   \u251c\u2500\u2500 SettingsPanelView.cs\n\u2502   \u2514\u2500\u2500 ModulePanelView.cs\n\u251c\u2500\u2500 Hosts/\n\u2502   \u251c\u2500\u2500 BasePanelHost.cs\n\u2502   \u251c\u2500\u2500 LoginPanelHost.cs\n\u2502   \u251c\u2500\u2500 DashboardPanelHost.cs\n\u2502   \u251c\u2500\u2500 SettingsPanelHost.cs\n\u2502   \u2514\u2500\u2500 ModulePanelHost.cs\n\u251c\u2500\u2500 Controllers/\n\u2502   \u2514\u2500\u2500 AppController.cs\n\u2514\u2500\u2500 Models/\n    \u251c\u2500\u2500 ModuleData.cs\n    \u2514\u2500\u2500 ModuleStepData.cs\n</code></pre>"},{"location":"ai/industry_uitk/","title":"Industry UI Toolkit Workflow","text":"<p>Basis: Unite 2024 session recordings, Unity 6.3 official roadmap posts, confirmed shipped titles Scope: What studios are actually doing with UITK in production, as of early 2026</p>"},{"location":"ai/industry_uitk/#the-honest-landscape","title":"The Honest Landscape","text":"<p>UITK in production is still rare. Most shipped Unity games using it are either Unity's own samples or early adopters who partnered directly with Unity engineering. The best documented real-world case is Football Manager 2025, which is the only publicly discussed large-scale UITK shipping title as of writing. Everything else is either small indie projects, internal Unity samples, or studios still migrating.</p> <p>This matters for calibrating expectations. There is no ten-year body of UITK production patterns the way there is for UGUI. The \"industry standard\" is still being established.</p>"},{"location":"ai/industry_uitk/#football-manager-2025-the-closest-thing-to-a-production-reference","title":"Football Manager 2025 \u2014 The Closest Thing to a Production Reference","text":"<p>Sports Interactive migrated FM25 to Unity from a proprietary engine, making it one of the first major commercial titles to ship UITK at scale. They presented the technical detail at Unite 2024 in the session \"Tackling UI Challenges in Football Manager 2025\" (recording publicly available).</p>"},{"location":"ai/industry_uitk/#what-they-actually-did","title":"What They Actually Did","text":"<p>FM25's UI/UX is driven by what they called a \"tile and card\" system. A tile is a panel of information with multiple states, from small amounts of information to larger cards which contain more material. This is a data-driven component model \u2014 the same tile type renders differently depending on what data is bound to it.</p> <p>Their workflow had designers and developers working together to create prototypes using ScriptableObjects as data sources. Data sources are established at a root container and propagate through the hierarchy so all child elements inherit the necessary data. Elements bind to data sources using a path-based system, with binding modes determining how the UI and data source interact \u2014 allowing designers to make dynamic, data-driven changes without touching code.</p> <p>For styling, they emphasised reusability: inline styles allowed immediate visual tweaks, while USS selectors enabled styles to be shared across elements \u2014 following the same logic as CSS class reuse on the web.</p> <p>Sports Interactive worked closely with Unity's engineers directly to adapt the engine to their needs. This is not a workflow most teams can replicate, but it tells you where the pain points were significant enough to require engine-level collaboration.</p>"},{"location":"ai/industry_uitk/#key-takeaway-for-this-project","title":"Key Takeaway for This Project","text":"<p>The FM25 architecture \u2014 ScriptableObject data sources, path-based binding, designer-editable without code \u2014 maps directly onto the ScriptableObject theme preset idea in this project's goals. It's validation that the instinct is correct, and it's the pattern to study in the Unite 2024 demo project (downloadable via the Unity Discussions post linked in the References page).</p>"},{"location":"ai/industry_uitk/#what-the-unite-2024-performance-session-said","title":"What the Unite 2024 Performance Session Said","text":"<p>The second relevant Unite 2024 session was \"Getting the Best Performance with UI Toolkit\" led by Nicolas Borromeo. The confirmed topics covered were:</p> <p>Chained draw calls, buffer sizes, dynamic atlasing, and handling limitations including custom shaders.</p> <p>These are the real levers that matter for Quest 2. No summary of this session is available in text form \u2014 watch it. It is the most directly applicable publicly available performance resource for UITK that exists.</p>"},{"location":"ai/industry_uitk/#practical-patterns-that-have-emerged","title":"Practical Patterns That Have Emerged","text":"<p>These come from the Unity 6.3 roadmap threads, the BagelGame sample, and the FM25 talk combined \u2014 not from a single authoritative source.</p>"},{"location":"ai/industry_uitk/#uxml-for-structure-uss-for-everything-visual","title":"UXML for Structure, USS for Everything Visual","text":"<p>The consistent pattern across all official samples and the FM25 talk is strict separation: UXML defines hierarchy and names, USS defines all visual properties, C# only touches logic and binding. Runtime style manipulation via inline C# style properties is treated as a last resort, not a default.</p> <p>Why this matters for your project: if creatives need to adjust visual output, they should be able to do it entirely in USS without opening a C# file. The ScriptableObject theme system can swap USS variables, but the USS files themselves should be readable and editable by non-programmers.</p>"},{"location":"ai/industry_uitk/#data-binding-over-manual-updates","title":"Data Binding Over Manual Updates","text":"<p>Unity 6 native <code>SerializedObject</code> binding is the expected approach for any value that changes at runtime. Manual <code>label.text = value</code> assignments in Update loops are considered legacy \u2014 they bypass the binding system and create maintenance overhead. The FM25 workflow confirmed this: binding paths propagate through the hierarchy from a root data source.</p> <p>The caveat: binding has garbage allocation implications that matter on Quest 2. The <code>TrackPropertyValue</code> approach generates less GC pressure than full <code>Bind()</code> on frequently-updating properties. The Unite 2024 performance session covers this \u2014 watch it before choosing your binding strategy.</p>"},{"location":"ai/industry_uitk/#component-naming-and-file-structure","title":"Component Naming and File Structure","text":"<p>A clear directory split that emerged from community practice: UXML in a Layouts folder, USS in Styles, C# in Scripts, and art assets in their own folder. Screens are full UI compositions, Components are reusable pieces. Flat structure for screens (easy to browse), nested structure for components (because there will be many of them).</p> <p>File naming uses PascalCase for C# (matching Unity conventions), and descriptive kebab-case for sprite assets. Version suffixes in filenames like <code>Buttons_final_REALLY.uss</code> are explicitly called out as anti-patterns \u2014 use Git branches for experimentation, not filename suffixes.</p>"},{"location":"ai/industry_uitk/#uss-custom-properties-variables-as-the-theme-interface","title":"USS Custom Properties (Variables) as the Theme Interface","text":"<p>The consistent approach for theming is <code>:root</code> custom properties in USS, updated at runtime by swapping stylesheet assets or patching variable values. This keeps the theme contract explicit \u2014 designers know which variables exist and what they control, and can adjust them without understanding the C# side.</p>"},{"location":"ai/industry_uitk/#what-does-not-exist-yet","title":"What Does Not Exist Yet","text":"<p>Being honest about gaps in publicly available practice:</p> <p>No established VR/XR UITK workflow. FM25 is desktop/PC. BagelGame is desktop/PC. There are no shipped titles and no Unite talks specifically addressing UITK in a VR context. The Meta SDK interaction bridge is genuinely unsolved in public documentation \u2014 this project will be defining that pattern, not following one.</p> <p>No large-scale open source UITK projects. The available reference implementations are all Unity-controlled samples. There is no community equivalent of the UGUI ecosystem that built up over a decade.</p> <p>Testing tooling is immature. Unity 6.3 added some UI testing support, but there is no established equivalent to the web's component testing ecosystem. Unit testing ViewModels is straightforward; integration testing rendered UITK panels is not well documented.</p>"},{"location":"ai/industry_uitk/#patterns-worth-adopting-from-adjacent-fields","title":"Patterns Worth Adopting From Adjacent Fields","text":"<p>Since production UITK patterns are sparse, the adjacent fields worth drawing from:</p> <p>Web component architecture \u2014 the UXML/USS/C# split is structurally identical to HTML/CSS/JS. Patterns like BEM naming for USS classes, design token systems for theme variables, and component-driven development all transfer directly.</p> <p>Unity editor UITK \u2014 the editor has used UITK since Unity 2019. Editor extension codebases are the largest body of real UITK code that exists. The patterns there (custom elements, binding, style management) are valid runtime patterns too, with some caveats around editor-only APIs.</p> <p>General Unity MVP/MVVM \u2014 the Game Developer article on UI architecture for Blood Runs Cold is worth reading as a UGUI pattern reference. The system described was battle-tested in released mobile games and the architectural ideas (screen manager, presenter layer, event-driven updates) translate to UITK even if the implementation details differ.</p>"},{"location":"ai/industry_uitk/#summary-what-to-actually-follow","title":"Summary: What to Actually Follow","text":"Source What to take from it FM25 Unite 2024 talk ScriptableObject data sources, designer-editable binding, tile/card component model Unite 2024 performance session Draw call batching, atlas limits, binding GC \u2014 watch before finalising Quest 2 approach BagelGame World space panel setup, USS theming structure, shader filter integration Unity 6.3 roadmap threads Current feature availability, what's coming \u2014 treat as living reference Web CSS/component patterns BEM naming, design tokens, component architecture \u2014 transfer directly to USS/UXML <p>Do not treat any single source as a complete playbook. The workflow for UITK in VR at this scale is being written now.</p> <p>All production references verified against public sources. FM25 architectural details sourced from the Unite 2024 session and Sports Interactive's own development blog.</p>"},{"location":"ai/layer_architecture/","title":"Controller \u2192 Host \u2192 View Architecture","text":"<p>Based on: Actual implementation from the Avatar Academy UITK project Pattern: Factory \u2192 View \u2192 Host \u2192 Controller Context: Code-generated UITK panels with MonoBehaviour lifecycle management</p>"},{"location":"ai/layer_architecture/#what-the-architecture-is","title":"What the Architecture Is","text":"<p>Three layers with distinct responsibilities:</p> <pre><code>StartMenuController          (MonoBehaviour \u2014 scene orchestration)\n    \u2502\n    \u2514\u2500\u25ba StartMenuPanelHost   (MonoBehaviour \u2014 panel lifecycle)\n            \u2502\n            \u2514\u2500\u25ba StartMenuPanelView  (Pure C# \u2014 UI generation via Factory)\n</code></pre> <p>Controller \u2014 scene-level. Knows about multiple panels and how they relate. Handles navigation, application logic, and coordinates which panels are visible.</p> <p>Host \u2014 panel-level. Owns a single panel's lifecycle: Generate(), Show(), Hide(), Dispose(). Acts as the boundary between Unity (MonoBehaviour, UIDocument) and the pure C# view. Exposes events upward to the Controller.</p> <p>View \u2014 pure C#, no Unity dependencies. Uses the Factory to create elements, wires up internal events, and exposes them for the Host to subscribe to. Has no knowledge of scene state or other panels.</p> <p>This split \u2014 scene-level vs panel-level \u2014 is the most useful structural decision in the architecture. It means a Controller can coordinate three panels without any of those panels knowing about each other.</p>"},{"location":"ai/layer_architecture/#where-it-sits-in-mvvm-terms","title":"Where It Sits in MVVM Terms","text":"Your Layer Nearest MVVM Equivalent Controller Application Controller / Navigator Host View Controller View View (absent) ViewModel \u2014 only needed when presentation logic exists <p>The ViewModel layer is intentionally absent for simple panels and that's correct. A start menu with four buttons and no state has no presentation logic to encapsulate. Adding a ViewModel there would be structure for its own sake.</p>"},{"location":"ai/layer_architecture/#suggested-improvements-to-startmenucontroller","title":"Suggested Improvements to StartMenuController","text":"<p>These are based on partial code visibility \u2014 verify against what's actually there before applying.</p>"},{"location":"ai/layer_architecture/#1-redundant-subscribeevents-call","title":"1. Redundant SubscribeEvents() call","text":"<p>If <code>Generate()</code> in the Host already calls <code>SubscribeEvents()</code> internally, calling it again from <code>BindButtons()</code> in the Controller doubles up the subscription. If that's the case, remove the explicit call from <code>BindButtons()</code> and let Host manage its own internal wiring. The Controller should only be subscribing to events the Host exposes publicly.</p>"},{"location":"ai/layer_architecture/#2-settings-panel-regenerating-on-every-toggle","title":"2. Settings panel regenerating on every toggle","text":"<p>Calling <code>Generate()</code> each time settings are toggled recreates the entire UI tree. For a settings panel that doesn't change structure between openings, the better approach is to generate once at startup and then use <code>Show()</code> / <code>Hide()</code> for visibility toggling. The tradeoff is memory (the panel exists even when hidden) vs. CPU cost (rebuilding the tree on each open). For a settings panel, always-in-memory is the right call.</p> <pre><code>private void OnEnable()\n{\n    _startMenuPanel.Generate();\n    _settingsPanel.Generate();\n    _settingsPanel.Hide();       // generated but hidden\n    SubscribeToEvents();\n}\n\nprivate void ToggleSettings()\n{\n    _settingsActive = !_settingsActive;\n    if (_settingsActive) _settingsPanel.Show();\n    else _settingsPanel.Hide();\n}\n</code></pre>"},{"location":"ai/layer_architecture/#3-showpanel-helper-for-mutual-exclusion","title":"3. ShowPanel() helper for mutual exclusion","text":"<p>If you have more than two panels that need to be mutually exclusive, a helper that hides all and shows one is cleaner than managing show/hide pairs manually:</p> <pre><code>private void ShowPanel(BasePanelHost target)\n{\n    _startMenuPanel.Hide();\n    _settingsPanel.Hide();\n    target.Show();\n}\n</code></pre> <p>This scales without accumulating pairwise show/hide logic when you add a third or fourth panel.</p>"},{"location":"ai/layer_architecture/#when-to-add-a-viewmodel","title":"When to Add a ViewModel","text":"<p>The decision is straightforward: add a ViewModel when the View needs to display something other than raw data. If the panel contains formatting, validation, computed values, or state that affects how data is presented, that logic belongs in a ViewModel rather than the View.</p> Panel type Needs ViewModel? Why Button-only menus No No data to transform Pause / confirmation dialogs No No state Settings with sliders Yes Volume needs formatting, validation Inventory Yes Filtering, sorting, selection state Character sheet Yes Computed stats, percentage bars Live HUD Maybe Depends on whether values need formatting <p>When you do add a ViewModel, it slots between Host and View. The Host creates it, passes it to the View, and subscribes to its events for anything that requires Unity APIs:</p> <pre><code>Host creates ViewModel\nHost passes ViewModel into View constructor\nView binds UI elements to ViewModel properties\nViewModel raises events \u2192 Host handles Unity-specific side effects\n    (e.g. AudioListener.volume, QualitySettings, Save())\n</code></pre> <p>The ViewModel itself stays pure C# and testable. The Host is the only place where ViewModel events result in Unity API calls.</p>"},{"location":"ai/layer_architecture/#directory-structure","title":"Directory Structure","text":"<pre><code>Assets/Scripts/UI/\n\u251c\u2500\u2500 Controllers/          # Scene-level orchestration\n\u251c\u2500\u2500 Hosts/\n\u2502   \u2514\u2500\u2500 Base/             # BasePanelHost\n\u251c\u2500\u2500 Views/\n\u2502   \u2514\u2500\u2500 Base/             # BasePanelView\n\u251c\u2500\u2500 ViewModels/           # Add as panels require them\n\u251c\u2500\u2500 Models/               # Data structures passed to ViewModels\n\u2514\u2500\u2500 Common/               # Shared utilities (ObservableProperty, etc.)\n</code></pre> <p><code>ViewModels/</code> starts empty and grows as panels accumulate presentation logic. Keeping it separate from Views makes the distinction visible \u2014 if you're writing formatting or validation logic in a View file, it's a signal it should move.</p>"},{"location":"ai/layer_architecture/#what-this-architecture-is-good-at","title":"What This Architecture Is Good At","text":"<p>Lifecycle is explicit. Generate, Show, Hide, and Dispose are named operations on the Host rather than implicit behaviour scattered across OnEnable/OnDisable. This makes panel state predictable.</p> <p>The Controller doesn't touch UITK. All UIDocument references live in Hosts. The Controller only calls methods on Hosts and handles events from them. If the UI implementation changes (e.g. switching a panel from code-generated to UXML-driven), the Controller doesn't change.</p> <p>Views are testable without Unity. Pure C# Views with no MonoBehaviour dependency can be instantiated in unit tests if needed. The Factory they call also has no Unity dependencies in principle.</p>"},{"location":"ai/layer_architecture/#what-to-watch-as-it-scales","title":"What to Watch as It Scales","text":"<p>Host proliferation. As the project grows, you'll have many Hosts. Consider whether BasePanelHost needs more shared behaviour (e.g. standard fade animations) or whether each Host reimplements the same Show/Hide pattern independently.</p> <p>Event chain length. Currently: View fires event \u2192 Host rebroadcasts \u2192 Controller handles. For simple panels that's fine. If you find Controllers subscribing to events that tunnel through multiple Hosts, consider whether a shared event bus or direct reference is cleaner at that point.</p> <p>Factory as the single source of element creation. The Factory approach means visual consistency is enforced at creation time rather than per-panel. As the style system grows (ScriptableObject themes, USS variable swapping), the Factory is the natural place to apply those \u2014 keep it the only place elements are instantiated.</p> <p>Architecture description reflects the actual implementation. Improvement suggestions are provisional \u2014 verify against the full codebase before applying.</p>"},{"location":"ai/mvvm/","title":"MVVM in UI Toolkit \u2014 Implementation Reference","text":"<p>Purpose: Comparison point against the Controller \u2192 Host \u2192 View architecture Context: Unity 6.3 UITK with runtime data binding Honest framing: MVVM is not universally better \u2014 it solves different problems</p>"},{"location":"ai/mvvm/#what-mvvm-actually-is","title":"What MVVM Actually Is","text":"<p>Model-View-ViewModel is a pattern built around data binding as the primary communication mechanism between layers. The ViewModel exposes observable state; the View binds to it. Neither layer calls the other directly.</p> <pre><code>Model  \u2190\u2192  ViewModel  \u2190\u2192  View\n             \u2191                \u2191\n         pure C#          UXML/USS/C#\n         no Unity         no business logic\n</code></pre> <p>The key distinction from MVC or MVP: the ViewModel doesn't hold a reference to the View. The View holds a reference to the ViewModel and observes it. This inversion is what makes ViewModels unit-testable without instantiating any UI.</p>"},{"location":"ai/mvvm/#the-three-layers","title":"The Three Layers","text":""},{"location":"ai/mvvm/#model","title":"Model","text":"<p>Raw data and business logic. No Unity dependencies, no presentation concerns. A <code>PlayerStats</code> ScriptableObject or a plain C# class representing inventory state. Models don't know they're being displayed.</p>"},{"location":"ai/mvvm/#viewmodel","title":"ViewModel","text":"<p>Transforms Model data into something the View can display directly. Contains:</p> <ul> <li>Observable properties (wrapped values that notify on change)</li> <li>Formatted strings (<code>$\"{health}/{maxHealth}\"</code>, percentages, timestamps)</li> <li>Commands (encapsulated actions the View can invoke)</li> <li>Validation logic</li> <li>State derived from multiple Model properties</li> </ul> <p>Does not contain: Unity API calls, scene references, MonoBehaviour inheritance.</p>"},{"location":"ai/mvvm/#view","title":"View","text":"<p>Binds to ViewModel properties and calls ViewModel commands. In UITK this means registering callbacks on ViewModel observable properties and updating elements in response. Contains no logic \u2014 only wiring.</p>"},{"location":"ai/mvvm/#observable-property-the-foundation","title":"Observable Property \u2014 The Foundation","text":"<p>Everything in MVVM depends on change notification. The simplest implementation:</p> <pre><code>public class Observable&lt;T&gt;\n{\n    private T _value;\n\n    public event Action&lt;T&gt; Changed;\n\n    public T Value\n    {\n        get =&gt; _value;\n        set\n        {\n            if (EqualityComparer&lt;T&gt;.Default.Equals(_value, value)) return;\n            _value = value;\n            Changed?.Invoke(_value);\n        }\n    }\n\n    public Observable(T initial = default) =&gt; _value = initial;\n}\n</code></pre> <p>The equality check matters \u2014 without it every assignment fires a notification regardless of whether the value changed, which on a frequently-updated HUD will cause unnecessary UI updates.</p> <p>Unity 6 native binding via <code>SerializedObject</code> is an alternative for ScriptableObject-backed Models, but <code>Observable&lt;T&gt;</code> works for any C# class and doesn't require Unity's serialization pipeline.</p>"},{"location":"ai/mvvm/#viewmodel-implementation","title":"ViewModel Implementation","text":"<pre><code>// No MonoBehaviour, no Unity using directives needed\npublic class HealthViewModel\n{\n    // Observable state the View binds to\n    public Observable&lt;string&gt; HealthText { get; } = new();\n    public Observable&lt;float&gt; HealthFraction { get; } = new();\n    public Observable&lt;bool&gt; IsCritical { get; } = new();\n\n    // Command the View can invoke\n    public Action OnHealRequested { get; set; }\n\n    private readonly PlayerStats _stats;\n\n    public HealthViewModel(PlayerStats stats)\n    {\n        _stats = stats;\n        _stats.HealthChanged += Refresh;\n        Refresh();\n    }\n\n    private void Refresh()\n    {\n        float fraction = (float)_stats.Health / _stats.MaxHealth;\n        HealthText.Value = $\"{_stats.Health} / {_stats.MaxHealth}\";\n        HealthFraction.Value = fraction;\n        IsCritical.Value = fraction &lt; 0.25f;\n    }\n\n    public void Dispose()\n    {\n        _stats.HealthChanged -= Refresh;\n    }\n}\n</code></pre> <p>Notice what's not here: no <code>label.text =</code>, no <code>AddToClassList</code>, no <code>UIDocument</code>. The ViewModel has no idea what kind of UI is observing it. You could bind this to a UITK panel, a uGUI canvas, or a unit test assertion \u2014 the ViewModel doesn't change.</p>"},{"location":"ai/mvvm/#view-implementation-uitk","title":"View Implementation (UITK)","text":"<p>The View's only job is to wire ViewModel observables to UI elements:</p> <pre><code>public class HealthView\n{\n    private readonly HealthViewModel _vm;\n    private readonly Label _healthLabel;\n    private readonly ProgressBar _healthBar;\n    private readonly Button _healButton;\n    private readonly VisualElement _root;\n\n    public HealthView(VisualElement root, HealthViewModel vm)\n    {\n        _root = root;\n        _vm = vm;\n\n        // Query elements \u2014 cache on construction, never query in callbacks\n        _healthLabel = root.Q&lt;Label&gt;(\"health-label\");\n        _healthBar = root.Q&lt;ProgressBar&gt;(\"health-bar\");\n        _healButton = root.Q&lt;Button&gt;(\"heal-button\");\n\n        Bind();\n    }\n\n    private void Bind()\n    {\n        // Observable \u2192 UI element\n        _vm.HealthText.Changed += text =&gt; _healthLabel.text = text;\n        _vm.HealthFraction.Changed += f =&gt; _healthBar.value = f * 100f;\n        _vm.IsCritical.Changed += critical =&gt;\n        {\n            _root.EnableInClassList(\"health--critical\", critical);\n            _root.EnableInClassList(\"health--normal\", !critical);\n        };\n\n        // UI element \u2192 ViewModel command\n        _healButton.clicked += () =&gt; _vm.OnHealRequested?.Invoke();\n\n        // Initialise with current values without waiting for a change\n        _healthLabel.text = _vm.HealthText.Value;\n        _healthBar.value = _vm.HealthFraction.Value * 100f;\n    }\n\n    public void Dispose()\n    {\n        // Unsubscribe to prevent memory leaks\n        _vm.HealthText.Changed -= text =&gt; _healthLabel.text = text;\n        _vm.HealthFraction.Changed -= f =&gt; _healthBar.value = f * 100f;\n        // etc.\n    }\n}\n</code></pre> <p>A note on disposal: the lambda unsubscription pattern above doesn't actually work \u2014 you can't unsubscribe a lambda that wasn't stored. In practice, store callbacks as named fields or use a disposable subscription list. This is a common MVVM footgun in C#.</p> <p>Better disposal pattern:</p> <pre><code>private readonly List&lt;Action&gt; _unbinders = new();\n\nprivate void Bind()\n{\n    Register(_vm.HealthText.Changed, text =&gt; _healthLabel.text = text);\n    // ...\n}\n\nprivate void Register&lt;T&gt;(ref event Action&lt;T&gt; evt, Action&lt;T&gt; handler)\n{\n    evt += handler;\n    _unbinders.Add(() =&gt; evt -= handler);\n}\n\npublic void Dispose()\n{\n    foreach (var unbind in _unbinders) unbind();\n    _unbinders.Clear();\n}\n</code></pre> <p>Or use a disposable wrapper pattern. Either way, disposal is where MVVM implementations most commonly leak.</p>"},{"location":"ai/mvvm/#where-mvvm-fits-in-the-host-view-architecture","title":"Where MVVM Fits in the Host \u2192 View Architecture","text":"<p>MVVM isn't a replacement for your Controller \u2192 Host \u2192 View architecture. The ViewModel slots between Host and View for panels that have presentation logic:</p> <pre><code>Controller   (scene orchestration \u2014 unchanged)\n    \u2502\n    \u25bc\nHost         (lifecycle, Unity APIs, creates ViewModel)\n    \u2502\n    \u25bc\nViewModel    (presentation logic, observable state)\n    \u2502\n    \u25bc\nView         (binds to ViewModel, no logic)\n</code></pre> <p>For panels without presentation logic (a four-button start menu), ViewModel adds nothing \u2014 the Host can pass data directly to the View. The test for whether a ViewModel is justified: does the View need to display anything other than the raw value it received? If yes, ViewModel. If no, skip it.</p>"},{"location":"ai/mvvm/#unit-testing-the-viewmodel","title":"Unit Testing the ViewModel","text":"<p>The core payoff of the pattern:</p> <pre><code>[Test]\npublic void HealthText_FormatsCorrectly_WhenHealthChanges()\n{\n    var stats = new PlayerStats { Health = 75, MaxHealth = 100 };\n    var vm = new HealthViewModel(stats);\n\n    // Capture the observable output\n    string captured = null;\n    vm.HealthText.Changed += text =&gt; captured = text;\n\n    stats.Health = 50;\n    stats.NotifyHealthChanged();\n\n    Assert.AreEqual(\"50 / 100\", captured);\n}\n\n[Test]\npublic void IsCritical_True_WhenHealthBelowThreshold()\n{\n    var stats = new PlayerStats { Health = 100, MaxHealth = 100 };\n    var vm = new HealthViewModel(stats);\n\n    stats.Health = 20;\n    stats.NotifyHealthChanged();\n\n    Assert.IsTrue(vm.IsCritical.Value);\n}\n</code></pre> <p>No scene, no UIDocument, no MonoBehaviour. This runs in Unity's test runner without entering play mode. The value scales with panel complexity \u2014 a character sheet ViewModel with twelve computed properties and three validation rules is genuinely worth testing this way.</p>"},{"location":"ai/mvvm/#where-mvvm-creates-problems","title":"Where MVVM Creates Problems","text":"<p>Binding disposal is error-prone. Every subscription needs a corresponding unsubscription. Forget one and you have a reference keeping a disposed View alive. This is less of an issue in your Host-managed lifecycle because the Host's <code>Dispose()</code> is explicit and called in a known place \u2014 but it still requires discipline.</p> <p>Observable chains get complex. A ViewModel property that depends on three Model properties and a user preference requires careful ordering of notifications. If the wrong thing fires first, the View gets an intermediate invalid state. <code>HealthFraction</code> that depends on both <code>Health</code> and <code>MaxHealth</code> needs both to be set before notifying, or you get a flash of incorrect values.</p> <p>It's boilerplate-heavy for simple cases. A settings slider that maps directly to a float value needs an <code>Observable&lt;float&gt;</code>, a subscription in the View, and a disposal registration \u2014 for something a direct <code>Bind()</code> call on a SerializedObject would handle in one line. Use Unity's native binding for the simple cases.</p> <p>Testing the View itself is still hard. The ViewModel being testable doesn't mean the visual result is verified. You can confirm that <code>HealthText.Value</code> is <code>\"50 / 100\"</code> without ever confirming that the label actually shows that text in the panel. Integration testing of the rendered output is still the unsolved problem.</p>"},{"location":"ai/mvvm/#mvvm-vs-controller-host-view-the-honest-comparison","title":"MVVM vs Controller \u2192 Host \u2192 View: The Honest Comparison","text":"Concern Controller \u2192 Host \u2192 View With MVVM (Host + ViewModel + View) Simple panels Clean, minimal Overengineered Complex panels Logic leaks into Host or View Contained in testable ViewModel Designer-editable Host is MonoBehaviour \u2014 inspector-friendly ViewModel is pure C# \u2014 no inspector Unit testing Host has Unity deps, hard to test ViewModel has no Unity deps, easy to test Boilerplate Low Higher \u2014 Observable wiring throughout Lifecycle clarity Explicit (Generate/Show/Hide/Dispose) Depends on Host \u2014 same lifecycle, just more layers Learning curve Low for Unity devs Moderate \u2014 subscription patterns require care <p>Neither is universally better. The architecture you have is the right default; MVVM is the right addition for panels with non-trivial presentation logic.</p>"},{"location":"ai/mvvm/#practical-decision","title":"Practical Decision","text":"<p>Before writing a ViewModel, answer these:</p> <ol> <li>Does the panel display formatted or computed values? (percentages, timestamps, derived stats)</li> <li>Does the panel have validation? (form inputs, error states)</li> <li>Does the panel have state that affects display but isn't in the Model? (selected item, active filter)</li> <li>Would you want to unit-test this panel's logic?</li> </ol> <p>If one or more is yes, write the ViewModel. If all are no, the Host-to-View direct approach is sufficient and cleaner.</p> <p>Observable implementation shown is illustrative \u2014 validate against your project's existing event patterns before adopting. Disposal pattern requires more robust implementation than the naive lambda approach shown."},{"location":"ai/performance/","title":"Quest 2 VR UI Performance Reference","text":"<p>Target: Meta Quest 2 (Snapdragon XR2, Adreno 650) Framework: UI Toolkit + uGUI for Meta SDK interactables Sources: Unity 6.3 official documentation, Meta developer guidelines, Unite 2024 performance session</p>"},{"location":"ai/performance/#a-note-on-numbers","title":"A Note on Numbers","text":"<p>No performance number in this document should be treated as a fact until you measure it on your device. What this document provides instead is verified architectural understanding and profiling methodology so you can get real numbers yourself.</p>"},{"location":"ai/performance/#frame-budget-whats-actually-confirmed","title":"Frame Budget (What's Actually Confirmed)","text":"<p>The frame rate target is 72 FPS, giving ~13.8ms per frame. Of that, approximately 2ms is reserved for the timewarp and guardian system, leaving around 11.8ms for application rendering.</p> <p>Your UI rendering is competing directly with world rendering, physics, and audio within that 11.8ms. There is no confirmed breakdown of how much of that budget UI \"should\" consume \u2014 that depends entirely on your scene complexity. Measure it.</p>"},{"location":"ai/performance/#how-uitk-rendering-actually-works-unity-63-official","title":"How UITK Rendering Actually Works (Unity 6.3 Official)","text":"<p>Understanding this is more useful than any made-up timing table.</p>"},{"location":"ai/performance/#the-uber-shader","title":"The Uber Shader","text":"<p>UI Toolkit consolidates all UI rendering functionality into a single \"uber shader.\" Rather than rely on multiple shader variants, this shader uses dynamic branching to select the appropriate rendering path at runtime. This reduces CPU overhead by minimizing shader switches but does add some GPU cost due to the branching logic.</p> <p>This is important: UITK's rendering is not a naive \"one draw call per element\" system. It's an opinionated pipeline with specific constraints you need to work within.</p>"},{"location":"ai/performance/#the-8-texture-limit","title":"The 8-Texture Limit","text":"<p>The uber shader supports up to eight textures within the same batch, allowing elements with different textures to render in the same draw call. Exceeding the eight-texture limit forces the batching system to split into separate batches, increasing overhead.</p> <p>This is a hard constraint. If your VR panel uses more than 8 unique un-atlased textures in a single hierarchy, you will pay draw call overhead regardless of how well you've written your USS. Texture atlasing is the mitigation.</p>"},{"location":"ai/performance/#batching-fundamentals","title":"Batching Fundamentals","text":"<p>To batch elements efficiently they must share the same GPU state \u2014 the same shaders, textures, mesh data, and other GPU-specific parameters. For example, a sequence of text elements using the same font and style can be batched together. However, inserting an image between them requires different GPU settings, forcing a new batch.</p> <p>The practical implication for design: element order in the hierarchy matters. Interleaving text and images breaks batches even if everything uses the same stylesheet. Grouping same-type elements where possible reduces draw call overhead.</p>"},{"location":"ai/performance/#vertex-buffers","title":"Vertex Buffers","text":"<p>When a UIDocument creates a Panel at runtime, it pre-allocates a single vertex buffer. If the UI exceeds the capacity of this buffer, additional buffers are created, which fragments batching and increases draw calls. The Vertex Budget in Panel Settings configures the initial size of the vertex buffer \u2014 the default value of 0 lets Unity determine the size automatically, but for complex UIs, manually increasing this value can improve performance.</p> <p>For world-space VR panels this is worth tuning once you have a complex UI built. Profile with the Frame Debugger to see if you're spilling across multiple vertex buffers.</p>"},{"location":"ai/performance/#update-mechanisms-and-their-costs","title":"Update Mechanisms and Their Costs","text":"<p>The Unity 6.3 docs confirm four update mechanisms that affect performance, in rough order of cost:</p> <p>Style resolution \u2014 triggered when USS classes are added/removed or inline styles are changed. Large or deeply nested hierarchies make this expensive. Minimise frequent class toggling on elements with many children.</p> <p>Layout recalculation \u2014 triggered by changes to element size, position, or alignment. This is why animating <code>width</code>, <code>height</code>, <code>left</code>, or <code>top</code> properties is expensive \u2014 each frame triggers a full layout pass. Use <code>transform: translate/scale</code> for animation instead, which bypasses layout recalculation entirely.</p> <p>Vertex buffer updates \u2014 triggered when element geometry changes (rounded corners, borders). Avoid modifying <code>border-radius</code> or border properties at runtime unless necessary.</p> <p>Rendering state changes \u2014 triggered by masking or unique textures that break batching. Each mask in UITK requires a stencil operation that breaks the current batch. Use them sparingly.</p>"},{"location":"ai/performance/#the-uss-first-argument-whats-actually-true","title":"The USS-First Argument (What's Actually True)","text":"<p>USS gradients render as vertex-coloured geometry tessellated at build time, not at runtime. The GPU interpolates vertex colours during rasterisation, which is essentially free. A shader-based gradient evaluates per-pixel in the fragment stage, which costs real fill-rate.</p> <p>On a mobile TBDR GPU like the Adreno 650, fill-rate is your scarcest resource when stereo rendering at 1832\u00d71920 per eye. Fragment shader cost scales with screen coverage. USS gradient cost does not. The principle is sound even if the exact multiplier requires your own profiling to establish.</p> <p>What USS can do that keeps you out of the fragment shader:</p> <ul> <li>Linear and radial gradients</li> <li>Solid fills with alpha</li> <li>Border radius (rounded corners)</li> <li>Border styling</li> <li>Box shadow (note: may not be supported on all UITK versions \u2014 check docs)</li> <li>Opacity</li> <li>Scale, translate, rotate via transforms</li> <li>Colour transitions via USS <code>transition</code> property</li> </ul> <p>What USS cannot do and therefore genuinely needs a shader:</p> <ul> <li>Background blur (glass morphism with real blur \u2014 not simulated with opacity)</li> <li>Procedural animated noise or distortion</li> <li>UV-scrolling textures</li> <li>Depth-aware effects</li> </ul> <p>The \"fake\" glass morphism approach \u2014 semi-transparent fill + thin border + subtle background gradient \u2014 is a legitimate design choice, not a compromise forced by performance. It's what most high-quality apps actually do.</p>"},{"location":"ai/performance/#uitk-specific-vr-considerations","title":"UITK-Specific VR Considerations","text":"<p>These are specific to the world-space render texture pipeline used for UITK in VR, which differs from standard screen-space UI.</p> <p>Render texture resolution is your call. Unlike screen-space UI where resolution is fixed to the display, you choose the Panel Settings render texture resolution for world-space panels. Higher resolution = sharper text, more GPU memory, more bandwidth. Lower resolution = blurrier but cheaper. This is a design tradeoff you need to tune on device, not a formula problem.</p> <p>World-space UITK renders to a texture first, then to a quad in the scene. This means every world-space UI panel incurs at least one additional render target blit. If you have multiple UITK panels visible simultaneously (e.g. multiple tablet screens), each has its own render texture cost.</p> <p>Single Pass Instanced rendering and UITK. Meta's SPI renders both eyes in one pass. Standard scene geometry benefits from this. Whether your UITK render texture setup interacts cleanly with SPI depends on how you configure the panel and the world-space quad's material. Test this specifically \u2014 some setups have been reported to render the texture correctly to one eye only without explicit configuration.</p> <p>The Poke Interactable layer is uGUI, not UITK. The visual layer (UITK) and interaction layer (uGUI + Meta SDK) are separate systems. The event bridge between them \u2014 translating poke contacts into UITK pointer events \u2014 is custom work. This bridge itself has performance implications if it runs every frame. Design it to be event-driven rather than polling.</p>"},{"location":"ai/performance/#confirmed-batching-breakers-avoid-these","title":"Confirmed Batching Breakers (Avoid These)","text":"<p>Sourced from Unity 6.3 official documentation:</p> <ul> <li>More than 8 unique textures in a single panel hierarchy \u2014 breaks the uber shader batch</li> <li>Masking \u2014 each mask requires a stencil operation that forces a batch break</li> <li>Custom materials on individual elements \u2014 exits the uber shader entirely, each unique material is a separate draw call</li> <li>Vertex buffer overflow \u2014 too many elements without adjusting Vertex Budget in Panel Settings</li> <li>Interleaving different element types in the hierarchy (text between images, etc.) \u2014 forces batch breaks even with shared styles</li> </ul>"},{"location":"ai/performance/#profiling-methodology-metas-official-guidance","title":"Profiling Methodology (Meta's Official Guidance)","text":"<p>Lock your CPU/GPU level before profiling to get consistent results. To use Unity Profiler with a standalone Meta Quest headset, you can profile your app as it runs on the headset via ADB or WiFi. Make sure to lock your CPU/GPU level before profiling to get consistent profiling results and measure improvements.</p> <p>Focus on bottlenecks first and change one thing at a time, such as resolution, hardware, quality, or configuration. It can be useful to disable Multithreaded Rendering in Player Settings during debugging \u2014 this slows down the renderer but gives a clearer view of frame time. Turn it back on when done.</p> <p>Tools to use:</p> <ul> <li>Unity Profiler via ADB \u2014 for CPU/GPU frame time</li> <li>Unity Frame Debugger \u2014 for draw call inspection and batch analysis</li> <li>RenderDoc (sideloaded on Quest) \u2014 for detailed GPU frame capture</li> <li>Unity's Overdraw mode in Scene View \u2014 to spot expensive fill-rate areas</li> </ul> <p>Never profile UI on desktop hardware. Quest 2's GPU crosses the 1 TFLOP mark, putting it in the same performance territory as the original Xbox One. A desktop GPU with 10-30 TFLOPS will make your shaders look essentially free. The performance cliff between desktop and Quest 2 is real and large.</p>"},{"location":"ai/performance/#what-to-actually-benchmark","title":"What to Actually Benchmark","text":"<p>Since we're not providing fabricated timing tables, here are the benchmarks worth running yourself once you have a working UI:</p> <ol> <li> <p>Baseline draw call count \u2014 open Frame Debugger, count draw calls with a representative screen visible. Note it down. Every optimisation should be compared against this number.</p> </li> <li> <p>USS-only panel vs same panel with custom shader \u2014 implement a visual effect both ways, profile each separately on device. This gives you your actual multiplier for your specific hardware and effect.</p> </li> <li> <p>Render texture resolution sweep \u2014 render the same panel at 512\u00d7512, 1024\u00d71024, and 2048\u00d72048. Profile GPU frame time each time. Find the crossover where quality gain stops justifying cost.</p> </li> <li> <p>Texture count at batch limit \u2014 build a panel with 7, 8, and 9 unique textures. Profile the draw call count. Confirm the 8-texture limit is real in your Unity version and see what happens when you cross it.</p> </li> <li> <p>Layout animation vs transform animation \u2014 animate a panel sliding in via <code>left</code> property vs <code>translate</code> property. Profile the update mechanism cost each way. This is the most impactful optimisation for common VR menu transitions.</p> </li> </ol>"},{"location":"ai/performance/#summary-the-principles-that-are-actually-verified","title":"Summary: The Principles That Are Actually Verified","text":"Principle Source Confidence USS gradients use vertex geometry, not fragment shaders Unity architecture docs High Uber shader handles up to 8 textures per batch Unity 6.3 Manual High Exceeding 8 textures breaks batching Unity 6.3 Manual High Masking breaks batches Unity 6.3 Manual High Layout property animation is more expensive than transform animation Unity 6.3 Manual High Frame budget is ~11.8ms after timewarp reservation Meta dev docs High Desktop profiling does not represent Quest 2 performance General knowledge High Specific ms timings for USS vs shader effects Not sourced \u2014 measure yourself N/A \"USS is 15x faster than shaders\" Fabricated \u2014 do not use N/A <p>This document supersedes the previous performance analysis. All performance claims are sourced or explicitly marked as requiring device measurement.</p>"},{"location":"ai/uss_analysis/","title":"UITK Visual Styling \u2014 Modern Dark Glass Aesthetic","text":"<p>Verified against: Unity 6.3 LTS docs (fetched February 2026) Aesthetic target: Vercel / Linear / Raycast \u2014 professional dark glass, clean hierarchy Scope: USS styling, gradients, transitions, Shader Graph per-element materials Platform: Quest 2 render texture \u2192 world space quad pipeline Note: The default theme is intentionally restrained. The token system makes it fully customisable \u2014 glows, gradients, and colour pops are a theme swap away.</p>"},{"location":"ai/uss_analysis/#what-the-vercel-linear-aesthetic-actually-is","title":"What the Vercel / Linear Aesthetic Actually Is","text":"<p>Before techniques, it's worth being precise about what makes these interfaces look the way they do. It is not primarily about effects \u2014 it is about restraint and surface hierarchy.</p> <p>The defining characteristics:</p> <ul> <li>Near-black base surfaces, not pure black. <code>#0a0a0f</code> to <code>#0d0d12</code> \u2014 a very slight cool blue-black rather than flat black. Pure black in UI reads as a void; this reads as a surface.</li> <li>Colour appears almost nowhere on the base layer. The surfaces, cards, and panels are essentially monochrome. Colour exists only in interactive elements, status indicators, and deliberate accent moments.</li> <li>Borders are the primary way surfaces are separated. Not shadows, not strong background colour contrast \u2014 a single pixel border at <code>rgba(255,255,255, 0.06\u20130.10)</code> is what defines a card edge.</li> <li>Typography carries the hierarchy. Large, slightly tracked titles. Muted body text. The weight contrast between heading and body is doing most of the work.</li> <li>Gradients are used extremely sparingly and precisely. One gradient highlight on a hero element, or a very subtle radial glow behind a primary CTA. Not on every card.</li> <li>Interactive feedback is immediate and physical. Hover states are instant or near-instant (80\u2013100ms). Press states give a perceptible scale response. There is no ambiguity about whether you clicked something.</li> </ul> <p>The customisable layer sits on top of this. The token system means a designer can push any element toward a more vibrant, glow-heavy, gradient-rich look by editing theme values. The default theme ships restrained; custom themes can be anything.</p>"},{"location":"ai/uss_analysis/#the-honest-capability-map","title":"The Honest Capability Map","text":"<p>What UITK supports vs what web developers take for granted in 2026. Every gap confirmed against Unity 6.3 docs.</p> Feature CSS USS (Unity 6.3) Workaround <code>linear-gradient()</code> \u2705 \u274c Baked texture, SVG, or Shader Graph <code>radial-gradient()</code> \u2705 \u274c Same <code>box-shadow</code> \u2705 \u274c Border trick or Shader Graph glow <code>backdrop-filter: blur()</code> \u2705 \u26a0\ufe0f Partial <code>filter:</code> on a sibling element <code>@keyframes</code> \u2705 \u274c C# <code>schedule</code> or DOTween <code>transition</code> \u2705 \u2705 \u2014 Transform (translate/rotate/scale) \u2705 \u2705 layout-free \u2014 <code>filter: blur/grayscale/invert</code> \u2705 \u2705 \u2014 Custom shader per element \u274c \u2705 <code>-unity-material</code> \u2014 CSS custom properties <code>var()</code> \u2705 \u2705 \u2014 <code>opacity</code> \u2705 \u2705 \u2014 <code>border-radius</code> \u2705 \u2705 \u2014 Spring physics animations \u2705 via libs \u274c DOTween spring ease <code>mix-blend-mode</code> \u2705 \u274c Shader Graph blend node <p>The critical gap is <code>linear-gradient()</code> \u2014 absent from USS since UI Toolkit launched. Everything that defines modern web surfaces relies on gradients. In UITK every gradient needs a workaround.</p>"},{"location":"ai/uss_analysis/#default-dark-theme-the-colour-language","title":"Default Dark Theme \u2014 The Colour Language","text":"<p>These are the base token values for the default professional theme. Every value has a reason.</p> <pre><code>/* base-variables.uss */\n:root {\n    /* \u2500\u2500 Surfaces \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n    /* Not pure black. The slight blue shift reads as a lit surface, not a void */\n    --color-background:       rgb(10, 10, 15);\n    --color-surface:          rgb(16, 16, 24);\n    --color-surface-raised:   rgb(22, 22, 32);\n    --color-surface-overlay:  rgb(28, 28, 40);\n\n    /* \u2500\u2500 Borders \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n    /* Low opacity white. This is doing the work of defining edges */\n    --color-border:           rgba(255, 255, 255, 0.07);\n    --color-border-subtle:    rgba(255, 255, 255, 0.04);\n    --color-border-emphasis:  rgba(255, 255, 255, 0.14);\n\n    /* \u2500\u2500 Text \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n    --color-text-primary:     rgb(237, 237, 240);   /* near white, not harsh */\n    --color-text-secondary:   rgb(160, 160, 170);   /* muted \u2014 for labels, captions */\n    --color-text-tertiary:    rgb(100, 100, 110);   /* very muted \u2014 timestamps, hints */\n\n    /* \u2500\u2500 Accent (the only real colour on screen by default) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n    --color-accent:           rgb(99, 102, 241);    /* indigo \u2014 restrained, professional */\n    --color-accent-hover:     rgb(118, 121, 255);\n    --color-accent-muted:     rgba(99, 102, 241, 0.12);  /* tinted backgrounds */\n    --color-on-accent:        rgb(255, 255, 255);\n\n    /* \u2500\u2500 Semantic \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n    --color-success:          rgb(52, 211, 153);\n    --color-warning:          rgb(251, 191, 36);\n    --color-error:            rgb(248, 113, 113);\n\n    /* \u2500\u2500 Typography \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n    --size-text-xs:           11px;\n    --size-text-sm:           13px;\n    --size-text-base:         15px;\n    --size-text-lg:           18px;\n    --size-text-xl:           24px;\n    --size-text-2xl:          32px;\n    --size-text-3xl:          48px;\n\n    /* \u2500\u2500 Spacing \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n    --space-1:                4px;\n    --space-2:                8px;\n    --space-3:                12px;\n    --space-4:                16px;\n    --space-6:                24px;\n    --space-8:                32px;\n    --space-10:               40px;\n    --space-12:               48px;\n\n    /* \u2500\u2500 Radius \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n    --radius-sm:              4px;\n    --radius-md:              8px;\n    --radius-lg:              12px;\n    --radius-xl:              16px;\n    --radius-full:            999px;\n\n    /* \u2500\u2500 Animation \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 */\n    --duration-instant:       80ms;\n    --duration-fast:          150ms;\n    --duration-normal:        250ms;\n    --duration-slow:          400ms;\n    --ease-out:               cubic-bezier(0.0, 0.0, 0.2, 1);\n    --ease-in-out:            cubic-bezier(0.4, 0.0, 0.2, 1);\n    --ease-spring:            cubic-bezier(0.34, 1.56, 0.64, 1);\n}\n</code></pre> <p>The indigo accent (<code>#6366f1</code>) is the Linear default. For a more Vercel-adjacent feel, swap it to white/near-white \u2014 Vercel's UI is almost monochrome with white as the interactive colour. Both are in the realm of \"professional dark\", one warmer, one colder.</p>"},{"location":"ai/uss_analysis/#surface-and-panel-styling","title":"Surface and Panel Styling","text":""},{"location":"ai/uss_analysis/#the-panel-stack","title":"The Panel Stack","text":"<p>Every panel uses the same base pattern. Surfaces stack by raising the background colour value slightly \u2014 not by using shadows.</p> <pre><code>/* panels.uss */\n\n.panel-root {\n    flex-grow: 1;\n    background-color: var(--color-background);\n    padding: var(--space-6);\n}\n\n/* A contained panel \u2014 cards, dialogs, settings panes */\n.panel-surface {\n    background-color: var(--color-surface);\n    border-width: 1px;\n    border-color: var(--color-border);\n    border-radius: var(--radius-lg);\n    padding: var(--space-6);\n}\n\n/* Elevated above panel-surface \u2014 dropdowns, tooltips, modals */\n.panel-raised {\n    background-color: var(--color-surface-raised);\n    border-width: 1px;\n    border-color: var(--color-border-emphasis);\n    border-radius: var(--radius-lg);\n    padding: var(--space-4);\n}\n\n/* Header within a panel */\n.panel-header {\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    padding-bottom: var(--space-4);\n    border-bottom-width: 1px;\n    border-color: var(--color-border-subtle);\n    margin-bottom: var(--space-6);\n}\n\n.panel-footer {\n    padding-top: var(--space-4);\n    border-top-width: 1px;\n    border-color: var(--color-border-subtle);\n    margin-top: var(--space-6);\n    flex-direction: row;\n    justify-content: flex-end;\n}\n\n.divider {\n    height: 1px;\n    background-color: var(--color-border-subtle);\n    margin: var(--space-4) 0;\n}\n</code></pre>"},{"location":"ai/uss_analysis/#glass-panel-variant","title":"Glass Panel Variant","text":"<p>The glass variant is for panels that float visually over other content \u2014 a settings overlay, a tooltip, a confirmation dialog. In the Vercel/Linear aesthetic this effect is very subtle \u2014 mostly just the border change and a near-transparent fill.</p> <pre><code>/* The \"glass\" in this aesthetic is 90% about the border, 10% about the fill */\n.glass-panel {\n    background-color: rgba(16, 16, 24, 0.72);\n    border-width: 1px;\n    border-color: rgba(255, 255, 255, 0.10);\n    border-radius: var(--radius-xl);\n    padding: var(--space-6);\n}\n\n/* Optional: use USS filter for a blur-behind effect on a sibling element.\n   Performance cost: renders subtree to intermediate texture. Use sparingly. */\n.glass-blur-layer {\n    position: absolute;\n    top: 0; left: 0; right: 0; bottom: 0;\n    filter: blur(20px);\n}\n</code></pre> <p>For the Shader Graph sheen that completes the glass effect \u2014 a subtle bright gradient along the top edge \u2014 see the Shader Graph section below.</p>"},{"location":"ai/uss_analysis/#typography","title":"Typography","text":"<p>Clean typography carries most of the hierarchy in this aesthetic. The key principle: contrast comes from weight and opacity, not from using many font sizes.</p> <pre><code>/* typography.uss */\n\n.text-title {\n    font-size: var(--size-text-2xl);\n    color: var(--color-text-primary);\n    -unity-font-style: bold;\n    letter-spacing: -0.5px;  /* slight tracking-tight \u2014 characteristic of Linear */\n}\n\n.text-heading {\n    font-size: var(--size-text-xl);\n    color: var(--color-text-primary);\n    -unity-font-style: bold;\n    letter-spacing: -0.3px;\n}\n\n.text-subheading {\n    font-size: var(--size-text-lg);\n    color: var(--color-text-secondary);\n    -unity-font-style: normal;\n}\n\n.text-body {\n    font-size: var(--size-text-base);\n    color: var(--color-text-primary);\n    white-space: normal;\n}\n\n.text-label {\n    font-size: var(--size-text-sm);\n    color: var(--color-text-secondary);\n    -unity-font-style: bold;\n    letter-spacing: 0.3px;\n}\n\n.text-caption {\n    font-size: var(--size-text-xs);\n    color: var(--color-text-tertiary);\n}\n\n/* Accent text \u2014 used for active states, links, CTA labels */\n.text-accent {\n    color: var(--color-accent);\n    font-size: var(--size-text-sm);\n    -unity-font-style: bold;\n}\n\n/* Monospace \u2014 for module step codes, identifiers */\n.text-mono {\n    font-size: var(--size-text-sm);\n    color: var(--color-text-secondary);\n}\n</code></pre>"},{"location":"ai/uss_analysis/#buttons","title":"Buttons","text":"<pre><code>/* buttons.uss */\n\n/* Primary \u2014 accent fill. Used once per panel maximum */\n.btn-primary {\n    background-color: var(--color-accent);\n    color: var(--color-on-accent);\n    border-radius: var(--radius-md);\n    border-width: 0;\n    padding: var(--space-2) var(--space-4);\n    font-size: var(--size-text-sm);\n    -unity-font-style: bold;\n\n    transition-property: background-color, scale;\n    transition-duration: var(--duration-instant), var(--duration-instant);\n    transition-timing-function: var(--ease-out);\n}\n.btn-primary:hover  { background-color: var(--color-accent-hover); scale: 1.02 1.02; }\n.btn-primary:active { scale: 0.97 0.97; }\n\n/* Secondary \u2014 bordered, no fill. The workhorse button */\n.btn-secondary {\n    background-color: transparent;\n    color: var(--color-text-primary);\n    border-width: 1px;\n    border-color: var(--color-border-emphasis);\n    border-radius: var(--radius-md);\n    padding: var(--space-2) var(--space-4);\n    font-size: var(--size-text-sm);\n\n    transition-property: border-color, background-color, scale;\n    transition-duration: var(--duration-instant);\n    transition-timing-function: var(--ease-out);\n}\n.btn-secondary:hover  {\n    border-color: rgba(255, 255, 255, 0.24);\n    background-color: rgba(255, 255, 255, 0.04);\n    scale: 1.01 1.01;\n}\n.btn-secondary:active { scale: 0.97 0.97; }\n\n/* Ghost \u2014 invisible until hover. Used for icon buttons and secondary actions */\n.btn-ghost {\n    background-color: transparent;\n    color: var(--color-text-tertiary);\n    border-width: 0;\n    padding: var(--space-2);\n    border-radius: var(--radius-sm);\n\n    transition-property: color, background-color;\n    transition-duration: var(--duration-instant);\n}\n.btn-ghost:hover {\n    color: var(--color-text-primary);\n    background-color: rgba(255, 255, 255, 0.06);\n}\n\n/* Tab button */\n.btn-tab {\n    background-color: transparent;\n    color: var(--color-text-secondary);\n    border-width: 0 0 1px 0;\n    border-color: transparent;\n    border-radius: 0;\n    padding: var(--space-2) var(--space-4);\n    font-size: var(--size-text-sm);\n\n    transition-property: color, border-color;\n    transition-duration: var(--duration-fast);\n}\n.btn-tab--active {\n    color: var(--color-text-primary);\n    border-color: var(--color-accent);\n}\n.btn-tab:hover:not(.btn-tab--active) {\n    color: var(--color-text-primary);\n}\n</code></pre>"},{"location":"ai/uss_analysis/#cards-and-module-list-items","title":"Cards and Module List Items","text":"<pre><code>/* components.uss */\n\n.card {\n    background-color: var(--color-surface);\n    border-width: 1px;\n    border-color: var(--color-border);\n    border-radius: var(--radius-lg);\n    padding: var(--space-4);\n    margin-bottom: var(--space-2);\n\n    transition-property: border-color, translate, background-color;\n    transition-duration: var(--duration-instant);\n    transition-timing-function: var(--ease-out);\n}\n\n/* Hover: border brightens + slight lift. No glow by default */\n.card:hover {\n    border-color: var(--color-border-emphasis);\n    translate: 0 -2px;\n    background-color: var(--color-surface-raised);\n}\n\n/* Active/selected state: accent-tinted border */\n.card--active {\n    border-color: var(--color-accent);\n    background-color: var(--color-accent-muted);\n}\n\n.card--locked {\n    opacity: 0.4;\n}\n\n/* Progress bar \u2014 used inside cards and on the dashboard */\n.progress-track {\n    height: 3px;  /* Intentionally thin \u2014 Vercel/Linear use very thin bars */\n    background-color: var(--color-surface-overlay);\n    border-radius: var(--radius-full);\n    overflow: hidden;\n}\n\n.progress-fill {\n    height: 100%;\n    background-color: var(--color-accent);\n    border-radius: var(--radius-full);\n    transition-property: width;\n    transition-duration: var(--duration-slow);\n    transition-timing-function: var(--ease-out);\n}\n\n/* Badge \u2014 status pill */\n.badge {\n    border-radius: var(--radius-full);\n    padding: 2px var(--space-2);\n    font-size: var(--size-text-xs);\n    -unity-font-style: bold;\n}\n.badge--success { background-color: rgba(52, 211, 153, 0.12); color: rgb(52, 211, 153); }\n.badge--warning { background-color: rgba(251, 191, 36, 0.12);  color: rgb(251, 191, 36); }\n.badge--error   { background-color: rgba(248, 113, 113, 0.12); color: rgb(248, 113, 113); }\n.badge--default { background-color: var(--color-surface-raised); color: var(--color-text-secondary); }\n</code></pre>"},{"location":"ai/uss_analysis/#inputs","title":"Inputs","text":"<pre><code>/* inputs.uss */\n\n.input-group { margin-bottom: var(--space-4); }\n\n.input-label {\n    font-size: var(--size-text-xs);\n    color: var(--color-text-secondary);\n    -unity-font-style: bold;\n    letter-spacing: 0.4px;\n    margin-bottom: var(--space-1);\n}\n\n.input-field {\n    background-color: var(--color-surface-raised);\n    border-width: 1px;\n    border-color: var(--color-border);\n    border-radius: var(--radius-md);\n    color: var(--color-text-primary);\n    padding: var(--space-2) var(--space-3);\n    font-size: var(--size-text-base);\n\n    transition-property: border-color;\n    transition-duration: var(--duration-fast);\n}\n.input-field:focus       { border-color: var(--color-accent); }\n.input-field--error      { border-color: var(--color-error); }\n\n/* Slider track */\n.input-field .unity-base-slider__tracker {\n    background-color: var(--color-surface-overlay);\n    border-radius: var(--radius-full);\n    height: 3px;\n    border-width: 0;\n}\n\n/* Slider thumb */\n.input-field .unity-base-slider__dragger {\n    background-color: var(--color-text-primary);\n    border-radius: var(--radius-full);\n    width: 14px;\n    height: 14px;\n    margin-top: -5px;\n    border-width: 0;\n    transition-property: scale, background-color;\n    transition-duration: var(--duration-instant);\n}\n.input-field .unity-base-slider__dragger:hover {\n    background-color: var(--color-accent);\n    scale: 1.2 1.2;\n}\n</code></pre>"},{"location":"ai/uss_analysis/#transitions-and-animations","title":"Transitions and Animations","text":""},{"location":"ai/uss_analysis/#the-safe-properties","title":"The Safe Properties","text":"<p>Only animate these on Quest 2 without hesitation \u2014 they bypass layout recalculation:</p> <pre><code>translate    rotate    scale    opacity    background-color\nborder-color    color    filter (careful \u2014 see below)\n</code></pre> <p>Never animate <code>width</code>, <code>height</code>, <code>padding</code>, <code>margin</code>, <code>left</code>, <code>top</code> for visual effects. Use <code>scale</code> or <code>translate</code> instead.</p>"},{"location":"ai/uss_analysis/#panel-entry-fade-and-slide-up","title":"Panel Entry \u2014 Fade and Slide Up","text":"<pre><code>/* animations.uss */\n\n.panel-root {\n    opacity: 0;\n    translate: 0 8px;\n    transition-property: opacity, translate;\n    transition-duration: var(--duration-normal), var(--duration-normal);\n    transition-timing-function: var(--ease-out), var(--ease-out);\n}\n\n.panel-root.visible {\n    opacity: 1;\n    translate: 0 0;\n}\n\n.hidden { display: none; }\n.invisible { opacity: 0; }\n\n/* Reduced motion \u2014 applied to root when user preference is set */\n.reduced-motion * {\n    transition-duration: 0s !important;\n}\n</code></pre> <pre><code>// Host.Show() \u2014 one-frame delay is required for transition to fire\npublic override void Show()\n{\n    Root.RemoveFromClassList(UIStyles.Hidden);\n    Root.schedule.Execute(() =&gt;\n        Root.AddToClassList(UIStyles.Visible)\n    ).StartingIn(16);\n}\n\npublic override void Hide()\n{\n    Root.RemoveFromClassList(UIStyles.Visible);\n    Root.schedule.Execute(() =&gt;\n        Root.AddToClassList(UIStyles.Hidden)\n    ).StartingIn((long)(250)); // match transition duration\n}\n</code></pre>"},{"location":"ai/uss_analysis/#staggered-list-entry","title":"Staggered List Entry","text":"<p>No native USS equivalent. C# schedule loop:</p> <pre><code>private void AnimateListEntries(VisualElement list)\n{\n    int i = 0;\n    foreach (var child in list.Children())\n    {\n        child.AddToClassList(\"entry-hidden\"); // opacity:0, translate: 0 6px\n        int index = i++;\n        child.schedule.Execute(() =&gt; {\n            child.RemoveFromClassList(\"entry-hidden\");\n            child.AddToClassList(\"entry-visible\"); // opacity:1, translate: 0 0\n        }).StartingIn(index * 50L); // 50ms stagger\n    }\n}\n</code></pre>"},{"location":"ai/uss_analysis/#number-counter-progress-stats","title":"Number Counter (Progress / Stats)","text":"<p>Animating a numeric value display \u2014 common in dashboards:</p> <pre><code>private void AnimateCounter(Label label, float from, float to, float duration = 0.6f)\n{\n    float elapsed = 0f;\n    label.schedule.Execute(timer =&gt; {\n        elapsed += timer.deltaTime / 1000f;\n        float t = Mathf.Clamp01(elapsed / duration);\n        // Ease out cubic\n        float eased = 1f - Mathf.Pow(1f - t, 3f);\n        label.text = Mathf.RoundToInt(Mathf.Lerp(from, to, eased)).ToString();\n    }).Until(() =&gt; elapsed &gt;= duration);\n}\n</code></pre>"},{"location":"ai/uss_analysis/#gradients-the-workaround-playbook","title":"Gradients \u2014 The Workaround Playbook","text":"<p><code>linear-gradient()</code> is not in USS. The options in priority order for this aesthetic:</p>"},{"location":"ai/uss_analysis/#1-baked-textures-for-static-decoration","title":"1. Baked textures for static decoration","text":"<p>For the very subtle gradient that appears in hero panels or behind primary CTAs. A near-transparent PNG tinted by USS.</p> <pre><code>.hero-gradient-bg {\n    background-image: url(\"project://Assets/UI/Textures/gradient-corner.png\");\n    -unity-background-scale-mode: stretch-to-fill;\n    /* Tint with accent colour at very low opacity */\n    -unity-background-image-tint-color: rgba(99, 102, 241, 0.08);\n}\n</code></pre> <p>When generating gradient textures, raise the alpha channel to a power of 2 or 3 before export. A linear ramp looks flat and dated. Power 2 gives a fast-then-slow falloff \u2014 the texture looks like light catching a surface edge, not a colour fill.</p>"},{"location":"ai/uss_analysis/#2-svg-assets-for-crisp-scalable-gradients","title":"2. SVG assets for crisp scalable gradients","text":"<p>SVGs natively support <code>linearGradient</code> and <code>radialGradient</code>. A designer creates them in Figma, exports SVG, Unity renders them at any resolution without texture memory overhead.</p> <pre><code>.card-accent-bg {\n    background-image: url(\"project://Assets/UI/Vectors/accent-radial.svg\");\n    -unity-background-scale-mode: stretch-to-fill;\n}\n</code></pre> <p>Best for: Card accent backgrounds, decorative section highlights. Colours are baked into the SVG \u2014 not theme-reactive. Either provide multiple SVG variants per theme or use Option 3 for theme-reactive gradients.</p>"},{"location":"ai/uss_analysis/#3-shader-graph-material-for-dynamic-and-animated-gradients","title":"3. Shader Graph material for dynamic and animated gradients","text":"<p>The correct approach for anything theme-reactive or animated. Assigned via USS <code>-unity-material</code>. Runs per-element on the GPU.</p> <pre><code>.card-gradient {\n    -unity-material: url(\"project://Assets/UI/Materials/CardGradient.mat\");\n}\n</code></pre> <p>The Power curve in the shader is the difference between a 2004 gradient and a 2026 one. Linear UV (power 1.0) = flat, boring. Power 2.0 = quadratic ease, smooth. Power 3.0 = fast highlight, slow fade \u2014 reads as a light source hitting a surface from one angle.</p> <pre><code>/* Conceptual shader graph \u2014 CardGradient */\nElement Layout UV\n    \u2192 Y component (0=top, 1=bottom)\n    \u2192 1 - Y  (flip: top=1, bottom=0)\n    \u2192 Power(node: 2.5)\n    \u2192 Multiply(intensity: 0.06)  \u2190 very subtle by default\n    \u2192 Add to Default Solid output\n    \u2192 Render Type Branch (Solid port) \u2192 Fragment Base Color\n</code></pre> <p>For a more vibrant theme with a visible gradient, raise the intensity parameter. The material exposes it as a Blackboard property so it can be set via <code>material.SetFloat(\"_Intensity\", 0.18f)</code> from the <code>ThemeManager</code>.</p> <p>Performance note: One simple gradient shader is 5\u201310 GPU instructions \u2014 effectively free. Every distinct material breaks UITK batching. Keep distinct materials to a small set. Prefer controlling variation via shader properties, not separate materials.</p>"},{"location":"ai/uss_analysis/#shader-graph-per-element-effects","title":"Shader Graph Per-Element Effects","text":"<p>All of the following use the <code>-unity-material</code> USS property and stay within the UITK pipeline. No separate camera passes or uGUI overlays required.</p>"},{"location":"ai/uss_analysis/#glass-panel-sheen","title":"Glass Panel Sheen","text":"<p>The bright highlight along the top edge of a glass panel. This is what sells the glass surface \u2014 more important than the blur.</p> <pre><code>Element Layout UV\n    \u2192 Y component\n    \u2192 1 - Y  (top=1)\n    \u2192 Power(2.5)                    \u2190 fast falloff\n    \u2192 Multiply(sheenIntensity: 0.08)\n    \u2192 Add to base glass colour\n    \u2192 Render Type Branch (Solid) \u2192 Fragment\n</code></pre> <p>At <code>sheenIntensity: 0.08</code> this is barely perceptible \u2014 just enough that the surface reads differently at the top vs bottom. For the Linear-style feel, keep it very subtle. For a more sci-fi aesthetic, push to <code>0.20\u20130.30</code>.</p>"},{"location":"ai/uss_analysis/#border-glow-replaces-css-box-shadow","title":"Border Glow (Replaces CSS <code>box-shadow</code>)","text":"<p>CSS <code>box-shadow</code> doesn't exist in USS. This shader adds a soft inner glow near the element's border, which reads similarly to an outer glow on the panel.</p> <pre><code>Element Layout UV \u2192 remap to -1..1 (Multiply 2, Subtract 1)\n    \u2192 Abs\n    \u2192 Max(X, Y)                    \u2190 outermost edge of the element\n    \u2192 SmoothStep(0.80, 1.0)        \u2190 only the outer ~20%\n    \u2192 Multiply(glowColour)\n    \u2192 Add to Default Solid output\n    \u2192 Render Type Branch (Solid) \u2192 Fragment\n</code></pre> <p>At low intensity with an accent colour this reads as a subtle selection glow. Higher intensity gives you the neon border look. Controlled by a Blackboard <code>_GlowColour</code> and <code>_GlowIntensity</code> property \u2014 set to near-zero by default, overridden by the glow theme.</p>"},{"location":"ai/uss_analysis/#card-hover-sheen","title":"Card Hover Sheen","text":"<p>The bright light sweep across a card on hover \u2014 a technique used heavily in Linear's interface.</p> <pre><code>_HoverProgress (float 0\u21921, animated from C#)\n\nElement Layout UV \u2192 X component\n    \u2192 abs(X - _HoverProgress)     \u2190 distance from sweep position\n    \u2192 1 - SmoothStep(0.0, 0.25)  \u2190 soft bright band ~25% wide\n    \u2192 Multiply(0.08)              \u2190 subtle\n    \u2192 Add to Default Solid output\n</code></pre> <pre><code>// Animate from View.Wire() \u2014 card registers pointer events\ncard.RegisterCallback&lt;PointerEnterEvent&gt;(_ =&gt; {\n    var mat = card.resolvedStyle.unityMaterial;\n    if (mat == null) return;\n\n    float elapsed = 0f;\n    const float duration = 0.5f;\n    card.schedule.Execute(timer =&gt; {\n        elapsed += timer.deltaTime / 1000f;\n        mat.SetFloat(\"_HoverProgress\", Mathf.Clamp01(elapsed / duration));\n    }).Until(() =&gt; elapsed &gt;= duration);\n});\n</code></pre>"},{"location":"ai/uss_analysis/#vignette","title":"Vignette","text":"<p>Applied to the outermost panel container. Darkens the edges of the screen, reinforcing the \"VR display\" quality and drawing focus to the centre.</p> <pre><code>Element Layout UV \u2192 remap to -1..1\n    \u2192 Length (distance from centre)\n    \u2192 Power(1.8)\n    \u2192 Multiply(vignetteStrength: 0.20)\n    \u2192 Clamp(0, 1)\n    \u2192 1 - result\n    \u2192 Multiply with Default Solid output\n    \u2192 Render Type Branch (Solid) \u2192 Fragment\n</code></pre> <p>Default <code>vignetteStrength: 0.20</code> is tasteful \u2014 edges are 20% darker. The full-screen vignette Shader Graph for the render texture overlay is covered in the bonus doc.</p>"},{"location":"ai/uss_analysis/#scanlines","title":"Scanlines","text":"<p>A very subtle CRT texture effect. In a VR context this reads as \"this is a screen\" rather than \"this is a flat plane\".</p> <pre><code>Element Layout UV \u2192 Y component\n    \u2192 Multiply(lineFrequency: 100.0)\n    \u2192 Fraction\n    \u2192 Step(0.5)\n    \u2192 1 - result\n    \u2192 Multiply(lineIntensity: 0.025)   \u2190 very subtle on Quest 2\n    \u2192 1 - result\n    \u2192 Multiply with Default Solid output\n</code></pre> <p>Keep <code>lineIntensity</code> below <code>0.04</code> for Quest 2. Strong scanlines will strobe at 72fps. The goal is texture, not distraction.</p>"},{"location":"ai/uss_analysis/#the-customisable-layer-glow-and-colour-themes","title":"The Customisable Layer \u2014 Glow and Colour Themes","text":"<p>The default theme is intentionally minimal. The Shader Graph materials all expose Blackboard properties. The <code>UITheme</code> ScriptableObject maps to those properties. A designer wanting a \"neon glow\" theme sets:</p> <pre><code>GlowIntensity:    0.30      (was 0.02)\nSheenIntensity:   0.25      (was 0.08)\nGradientIntensity: 0.18     (was 0.05)\nColorAccent:      #00ff88   (was indigo)\n</code></pre> <p>And sets those on the material at theme-switch time from <code>ThemeManager</code>:</p> <pre><code>private void ApplyShaderProperties(UITheme theme)\n{\n    if (theme.GlowMaterial != null)\n    {\n        theme.GlowMaterial.SetColor(\"_GlowColour\",    theme.ColorAccent);\n        theme.GlowMaterial.SetFloat(\"_GlowIntensity\", theme.GlowIntensity);\n    }\n\n    if (theme.GradientMaterial != null)\n    {\n        theme.GradientMaterial.SetColor(\"_GradientColour\",    theme.ColorAccent);\n        theme.GradientMaterial.SetFloat(\"_GradientIntensity\", theme.GradientIntensity);\n    }\n}\n</code></pre> <p>The professional default ships quiet. The vibrant variant is a preset the designer creates in the inspector.</p>"},{"location":"ai/uss_analysis/#what-cannot-be-done-within-the-uitk-pipeline","title":"What Cannot Be Done Within the UITK Pipeline","text":"<p>These effects require going outside the <code>-unity-material</code> per-element approach. They are documented in the bonus doc (Global Render Texture Overlay) and are entirely optional \u2014 the UITK pipeline delivers a complete and good-looking UI without them.</p> <ul> <li>Full-screen scanlines/vignette as a post-process over the complete render texture</li> <li>True depth-of-field or bloom affecting the VR panel as a whole</li> <li>Chromatic aberration on the panel edges</li> <li>Blurring the 3D world visible through a glass panel (requires a scene render texture read)</li> </ul>"},{"location":"ai/uss_analysis/#file-structure","title":"File Structure","text":"<pre><code>Assets/UI/\n\u251c\u2500\u2500 Styles/\n\u2502   \u251c\u2500\u2500 base-variables.uss\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u2502   \u251c\u2500\u2500 typography.uss\n\u2502   \u2502   \u251c\u2500\u2500 panels.uss\n\u2502   \u2502   \u251c\u2500\u2500 buttons.uss\n\u2502   \u2502   \u251c\u2500\u2500 inputs.uss\n\u2502   \u2502   \u251c\u2500\u2500 components.uss     (cards, badges, progress)\n\u2502   \u2502   \u2514\u2500\u2500 animations.uss\n\u2502   \u2514\u2500\u2500 themes/\n\u2502       \u251c\u2500\u2500 theme-default.uss\n\u2502       \u251c\u2500\u2500 theme-vibrant.uss  (accent colours, higher glow)\n\u2502       \u2514\u2500\u2500 theme-light.uss\n\u2502\n\u251c\u2500\u2500 Materials/\n\u2502   \u251c\u2500\u2500 UI_GlassPanel.mat      (sheen + subtle gradient)\n\u2502   \u251c\u2500\u2500 UI_CardGradient.mat    (card bg gradient, very subtle default)\n\u2502   \u251c\u2500\u2500 UI_BorderGlow.mat      (selection / hover glow)\n\u2502   \u251c\u2500\u2500 UI_CardSheen.mat       (hover sweep)\n\u2502   \u2514\u2500\u2500 UI_ScreenBase.mat      (vignette + scanlines on root panel)\n\u2502\n\u251c\u2500\u2500 Shaders/\n\u2502   \u251c\u2500\u2500 GlassPanel.shadergraph\n\u2502   \u251c\u2500\u2500 CardGradient.shadergraph\n\u2502   \u251c\u2500\u2500 BorderGlow.shadergraph\n\u2502   \u251c\u2500\u2500 CardSheen.shadergraph\n\u2502   \u2514\u2500\u2500 ScreenBase.shadergraph\n\u2502\n\u251c\u2500\u2500 Textures/\n\u2502   \u251c\u2500\u2500 gradient-corner-tl.png\n\u2502   \u2514\u2500\u2500 gradient-radial-centre.png\n\u2502\n\u2514\u2500\u2500 Vectors/\n    \u251c\u2500\u2500 accent-radial.svg\n    \u2514\u2500\u2500 accent-linear-horizontal.svg\n</code></pre>"},{"location":"ai/uss_implementation/","title":"USS Theming \u2014 ScriptableObjects, Variables, Runtime Switching","text":"<p>Approach: Swap full StyleSheet assets for major themes + patch CSS custom properties for user tweaks Designer control: Colours, typography, spacing, animation Persistence: PlayerPrefs Note: Code samples are demonstrative \u2014 not production-complete</p>"},{"location":"ai/uss_implementation/#system-overview","title":"System Overview","text":"<pre><code>UITheme (ScriptableObject)\n    \u2502  stores all designable values as serialized fields\n    \u2502  inspector-editable, no code required for designers\n    \u2502\n    \u25bc\nUIThemePreset (USS asset, one per theme)\n    \u2502  declares :root custom properties matching the ScriptableObject fields\n    \u2502  applied as the base stylesheet on the Panel Settings\n    \u2502\n    \u25bc\nThemeManager (MonoBehaviour singleton)\n    \u2502  swaps StyleSheet assets for theme changes\n    \u2502  patches individual custom properties for user tweaks\n    \u2502  writes preferences to PlayerPrefs\n    \u2502\n    \u25bc\nComponent USS files (buttons.uss, panels.uss, typography.uss \u2026)\n    \u2502  consume var(--token-name) throughout\n    \u2502  never hardcode colour or size values\n</code></pre> <p>The key principle: USS files never contain hardcoded values. Every colour, size, duration, and font reference goes through a custom property (<code>var(--token)</code>). The theme system controls what those tokens resolve to. Swapping a theme changes everything in one operation.</p>"},{"location":"ai/uss_implementation/#design-tokens-the-token-naming-convention","title":"Design Tokens \u2014 the Token Naming Convention","text":"<p>All custom properties follow a three-level naming convention:</p> <pre><code>--category-role-variant\n\n--color-primary            base primary colour\n--color-primary-hover      primary on hover\n--color-primary-disabled   primary when disabled\n--color-surface            panel background\n--color-surface-raised     card / elevated surface\n--color-on-surface         text sitting on a surface\n--color-on-primary         text sitting on a primary button\n\n--size-text-body           body text size\n--size-text-label          label text size\n--size-text-title-sm       small title\n--size-text-title-lg       large title\n\n--space-xs                 4px\n--space-sm                 8px\n--space-md                 16px\n--space-lg                 24px\n--space-xl                 40px\n\n--radius-sm                4px\n--radius-md                8px\n--radius-lg                16px\n--radius-pill              999px\n\n--duration-fast            0.1s\n--duration-normal          0.25s\n--duration-slow            0.4s\n--ease-out                 cubic-bezier(0.0, 0.0, 0.2, 1)\n</code></pre> <p>Naming things this way means a designer can read any USS rule and know exactly what token to change to affect it, without reading C# code.</p>"},{"location":"ai/uss_implementation/#uitheme-scriptableobject","title":"UITheme ScriptableObject","text":"<p>The ScriptableObject is the designer-facing interface. Every property maps to a CSS custom property token. Field names mirror token names to make the mapping obvious.</p> <pre><code>[CreateAssetMenu(fileName = \"NewTheme\", menuName = \"Training App/UI Theme\")]\npublic class UITheme : ScriptableObject\n{\n    [Header(\"Meta\")]\n    public string ThemeName = \"Default\";\n    public StyleSheet StyleSheetAsset; // the USS file to swap in\n\n    [Header(\"Colours \u2014 Primary\")]\n    public Color ColorPrimary         = new Color(0.27f, 0.51f, 0.95f);\n    public Color ColorPrimaryHover    = new Color(0.38f, 0.60f, 1.00f);\n    public Color ColorPrimaryDisabled = new Color(0.27f, 0.51f, 0.95f, 0.4f);\n    public Color ColorOnPrimary       = Color.white;\n\n    [Header(\"Colours \u2014 Surface\")]\n    public Color ColorBackground      = new Color(0.06f, 0.06f, 0.10f);\n    public Color ColorSurface         = new Color(0.10f, 0.12f, 0.18f);\n    public Color ColorSurfaceRaised   = new Color(0.14f, 0.17f, 0.24f);\n    public Color ColorOnSurface       = new Color(0.90f, 0.90f, 0.95f);\n    public Color ColorOnSurfaceMuted  = new Color(0.55f, 0.57f, 0.65f);\n\n    [Header(\"Colours \u2014 Semantic\")]\n    public Color ColorSuccess         = new Color(0.20f, 0.80f, 0.50f);\n    public Color ColorWarning         = new Color(0.95f, 0.75f, 0.20f);\n    public Color ColorError           = new Color(0.95f, 0.35f, 0.35f);\n\n    [Header(\"Colours \u2014 Glass / Overlay\")]\n    [Range(0f, 1f)]\n    public float GlassFillAlpha       = 0.12f;\n    [Range(0f, 1f)]\n    public float GlassBorderAlpha     = 0.15f;\n\n    [Header(\"Typography\")]\n    public Font  BodyFont;\n    public float SizeTextBody         = 16f;\n    public float SizeTextLabel        = 13f;\n    public float SizeTextCaption      = 11f;\n    public float SizeTextTitleSm      = 20f;\n    public float SizeTextTitleLg      = 32f;\n\n    [Header(\"Spacing\")]\n    public float SpaceXS              = 4f;\n    public float SpaceSM              = 8f;\n    public float SpaceMD              = 16f;\n    public float SpaceLG              = 24f;\n    public float SpaceXL              = 40f;\n\n    [Header(\"Border Radius\")]\n    public float RadiusSM             = 4f;\n    public float RadiusMD             = 8f;\n    public float RadiusLG             = 16f;\n\n    [Header(\"Animation\")]\n    public float DurationFast         = 0.1f;\n    public float DurationNormal       = 0.25f;\n    public float DurationSlow         = 0.4f;\n}\n</code></pre> <p>Designers create theme assets via Assets \u2192 Create \u2192 Training App \u2192 UI Theme, fill in the inspector, and hand the asset to a developer to register. No code is touched.</p>"},{"location":"ai/uss_implementation/#themeregistry-scriptableobject","title":"ThemeRegistry ScriptableObject","text":"<p>A single asset that lists all available themes. Referenced by <code>ThemeManager</code> and the settings dropdown. Designers add themes here by dragging assets in \u2014 no code required.</p> <pre><code>[CreateAssetMenu(fileName = \"ThemeRegistry\", menuName = \"Training App/Theme Registry\")]\npublic class ThemeRegistry : ScriptableObject\n{\n    public UITheme DefaultTheme;\n    public List&lt;UITheme&gt; AllThemes = new();\n\n    public UITheme GetByName(string name)\n        =&gt; AllThemes.Find(t =&gt; t.ThemeName == name) ?? DefaultTheme;\n\n    public List&lt;string&gt; GetThemeNames()\n        =&gt; AllThemes.ConvertAll(t =&gt; t.ThemeName);\n}\n</code></pre>"},{"location":"ai/uss_implementation/#uss-structure-component-files","title":"USS Structure \u2014 Component Files","text":"<p>USS files are split by concern. They never hardcode values \u2014 everything goes through tokens.</p>"},{"location":"ai/uss_implementation/#base-variablesuss","title":"base-variables.uss","text":"<p>This file is the fallback. It declares every token with a default value so the UI is never broken if a theme hasn't been applied yet. Loaded first in Panel Settings.</p> <pre><code>:root {\n    /* Colours */\n    --color-primary:          rgb(69, 130, 242);\n    --color-primary-hover:    rgb(97, 153, 255);\n    --color-primary-disabled: rgba(69, 130, 242, 0.4);\n    --color-on-primary:       rgb(255, 255, 255);\n\n    --color-background:       rgb(15, 15, 26);\n    --color-surface:          rgb(26, 31, 46);\n    --color-surface-raised:   rgb(36, 43, 64);\n    --color-on-surface:       rgb(230, 230, 242);\n    --color-on-surface-muted: rgb(140, 145, 166);\n\n    --color-success:          rgb(51, 204, 128);\n    --color-warning:          rgb(242, 191, 51);\n    --color-error:            rgb(242, 89, 89);\n\n    /* Typography */\n    --size-text-body:         16px;\n    --size-text-label:        13px;\n    --size-text-caption:      11px;\n    --size-text-title-sm:     20px;\n    --size-text-title-lg:     32px;\n\n    /* Spacing */\n    --space-xs:               4px;\n    --space-sm:               8px;\n    --space-md:               16px;\n    --space-lg:               24px;\n    --space-xl:               40px;\n\n    /* Radius */\n    --radius-sm:              4px;\n    --radius-md:              8px;\n    --radius-lg:              16px;\n    --radius-pill:            999px;\n\n    /* Animation */\n    --duration-fast:          0.1s;\n    --duration-normal:        0.25s;\n    --duration-slow:          0.4s;\n}\n</code></pre>"},{"location":"ai/uss_implementation/#theme-darkuss-theme-high-contrastuss","title":"theme-dark.uss / theme-high-contrast.uss","text":"<p>One file per theme. Overrides only the tokens that differ from the default. Swapping this file in is the entire theme change operation.</p> <pre><code>/* theme-high-contrast.uss \u2014 only overrides what changes */\n:root {\n    --color-primary:          rgb(255, 255, 0);\n    --color-primary-hover:    rgb(255, 255, 153);\n    --color-on-primary:       rgb(0, 0, 0);\n\n    --color-background:       rgb(0, 0, 0);\n    --color-surface:          rgb(20, 20, 20);\n    --color-on-surface:       rgb(255, 255, 255);\n    --color-on-surface-muted: rgb(200, 200, 200);\n}\n</code></pre>"},{"location":"ai/uss_implementation/#buttonsuss","title":"buttons.uss","text":"<pre><code>.btn-primary {\n    background-color: var(--color-primary);\n    color:            var(--color-on-primary);\n    border-radius:    var(--radius-md);\n    padding:          var(--space-sm) var(--space-md);\n    font-size:        var(--size-text-label);\n\n    transition-property:   background-color, scale;\n    transition-duration:   var(--duration-fast), var(--duration-fast);\n    transition-timing-function: ease-out;\n}\n\n.btn-primary:hover {\n    background-color: var(--color-primary-hover);\n    scale:            1.03 1.03;\n}\n\n.btn-primary:active {\n    scale: 0.97 0.97;\n}\n\n.btn-primary:disabled {\n    background-color: var(--color-primary-disabled);\n    opacity:          0.6;\n}\n\n.btn-secondary {\n    background-color: transparent;\n    color:            var(--color-primary);\n    border-color:     var(--color-primary);\n    border-width:     1px;\n    border-radius:    var(--radius-md);\n    padding:          var(--space-sm) var(--space-md);\n    font-size:        var(--size-text-label);\n\n    transition-property: border-color, color;\n    transition-duration: var(--duration-fast);\n}\n\n.btn-secondary:hover {\n    border-color: var(--color-primary-hover);\n    color:        var(--color-primary-hover);\n}\n\n.btn-ghost {\n    background-color: transparent;\n    color:            var(--color-on-surface-muted);\n    border-width:     0;\n    padding:          var(--space-sm);\n    border-radius:    var(--radius-sm);\n\n    transition-property: color, background-color;\n    transition-duration: var(--duration-fast);\n}\n\n.btn-ghost:hover {\n    color:            var(--color-on-surface);\n    background-color: rgba(255, 255, 255, 0.06);\n}\n\n.btn-tab {\n    background-color: transparent;\n    color:            var(--color-on-surface-muted);\n    border-width:     0 0 2px 0;\n    border-color:     transparent;\n    border-radius:    0;\n    padding:          var(--space-sm) var(--space-md);\n    font-size:        var(--size-text-label);\n\n    transition-property: color, border-color;\n    transition-duration: var(--duration-fast);\n}\n\n.btn-tab--active {\n    color:        var(--color-primary);\n    border-color: var(--color-primary);\n}\n</code></pre>"},{"location":"ai/uss_implementation/#panelsuss","title":"panels.uss","text":"<pre><code>.panel-root {\n    flex-grow:        1;\n    background-color: var(--color-background);\n    padding:          var(--space-lg);\n}\n\n.panel-header {\n    flex-direction:  row;\n    justify-content: space-between;\n    align-items:     center;\n    margin-bottom:   var(--space-lg);\n    padding-bottom:  var(--space-md);\n    border-bottom-width: 1px;\n    border-color:    rgba(255, 255, 255, 0.08);\n}\n\n.panel-body {\n    flex-grow: 1;\n    gap:       var(--space-md);\n}\n\n.panel-footer {\n    margin-top:      var(--space-lg);\n    padding-top:     var(--space-md);\n    border-top-width: 1px;\n    border-color:    rgba(255, 255, 255, 0.08);\n}\n\n.glass-panel {\n    background-color: rgba(255, 255, 255, 0.08);\n    border-width:     1px;\n    border-color:     rgba(255, 255, 255, 0.12);\n    border-radius:    var(--radius-lg);\n    padding:          var(--space-lg);\n}\n\n.card {\n    background-color: var(--color-surface-raised);\n    border-radius:    var(--radius-md);\n    padding:          var(--space-md);\n    margin-bottom:    var(--space-sm);\n\n    transition-property: background-color;\n    transition-duration: var(--duration-fast);\n}\n\n.card:hover {\n    background-color: rgba(255, 255, 255, 0.08);\n}\n\n.card--locked {\n    opacity: 0.45;\n}\n\n.divider {\n    height:           1px;\n    background-color: rgba(255, 255, 255, 0.08);\n    margin:           var(--space-md) 0;\n}\n\n.progress-track {\n    height:           6px;\n    background-color: var(--color-surface-raised);\n    border-radius:    var(--radius-pill);\n    overflow:         hidden;\n}\n\n.progress-fill {\n    height:           100%;\n    background-color: var(--color-primary);\n    border-radius:    var(--radius-pill);\n\n    transition-property: width;\n    transition-duration: var(--duration-slow);\n}\n</code></pre>"},{"location":"ai/uss_implementation/#typographyuss","title":"typography.uss","text":"<pre><code>.title-large {\n    font-size:    var(--size-text-title-lg);\n    color:        var(--color-on-surface);\n    -unity-font-style: bold;\n    letter-spacing: 0.5px;\n}\n\n.title-medium {\n    font-size:    var(--size-text-title-sm);\n    color:        var(--color-on-surface);\n    -unity-font-style: bold;\n}\n\n.body-text {\n    font-size: var(--size-text-body);\n    color:     var(--color-on-surface);\n}\n\n.label-text {\n    font-size: var(--size-text-label);\n    color:     var(--color-on-surface);\n    -unity-font-style: bold;\n}\n\n.caption-text {\n    font-size: var(--size-text-caption);\n    color:     var(--color-on-surface-muted);\n}\n\n.input-label {\n    font-size:     var(--size-text-caption);\n    color:         var(--color-on-surface-muted);\n    margin-bottom: var(--space-xs);\n    -unity-font-style: bold;\n    letter-spacing: 0.5px;\n    text-transform: uppercase; /* Note: check Unity 6.3 text-transform support */\n}\n</code></pre>"},{"location":"ai/uss_implementation/#inputsuss","title":"inputs.uss","text":"<pre><code>.input-group {\n    gap:           var(--space-xs);\n    margin-bottom: var(--space-md);\n}\n\n.input-field {\n    background-color: var(--color-surface-raised);\n    border-color:     rgba(255, 255, 255, 0.12);\n    border-width:     1px;\n    border-radius:    var(--radius-md);\n    color:            var(--color-on-surface);\n    padding:          var(--space-sm) var(--space-md);\n    font-size:        var(--size-text-body);\n\n    transition-property: border-color;\n    transition-duration: var(--duration-fast);\n}\n\n.input-field:focus {\n    border-color: var(--color-primary);\n}\n\n.input-field--error {\n    border-color: var(--color-error);\n}\n\n/* Slider track */\n.input-field .unity-base-slider__tracker {\n    background-color: var(--color-surface-raised);\n    border-radius:    var(--radius-pill);\n    height:           4px;\n}\n\n/* Slider fill */\n.input-field .unity-base-slider__dragger {\n    background-color: var(--color-primary);\n    border-radius:    var(--radius-pill);\n    width:            18px;\n    height:           18px;\n    margin-top:       -7px;\n    border-width:     0;\n}\n\n/* Tab bar */\n.tab-bar {\n    flex-direction: row;\n    border-bottom-width: 1px;\n    border-color:   rgba(255, 255, 255, 0.08);\n    margin-bottom:  var(--space-md);\n}\n</code></pre>"},{"location":"ai/uss_implementation/#animationsuss","title":"animations.uss","text":"<pre><code>/* Panel entry \u2014 add class on Show(), remove on Hide() */\n.fade-in {\n    opacity: 1;\n    transition-property: opacity;\n    transition-duration: var(--duration-normal);\n}\n\n.hidden {\n    display: none;\n}\n\n/* Step list items */\n.step-item {\n    flex-direction: row;\n    align-items:    center;\n    padding:        var(--space-sm) var(--space-md);\n    border-radius:  var(--radius-sm);\n    gap:            var(--space-sm);\n    color:          var(--color-on-surface-muted);\n\n    transition-property: color, background-color;\n    transition-duration: var(--duration-fast);\n}\n\n.step-item--active {\n    color:            var(--color-on-surface);\n    background-color: rgba(255, 255, 255, 0.05);\n}\n\n.step-item--complete {\n    color: var(--color-success);\n}\n\n/* Reduced motion support \u2014 add to root element when user opts in */\n.reduced-motion * {\n    transition-duration: 0s !important;\n}\n</code></pre>"},{"location":"ai/uss_implementation/#uss-load-order-in-panel-settings","title":"USS Load Order in Panel Settings","text":"<p>Order matters \u2014 later files override earlier ones for the same selector.</p> <pre><code>Panel Settings \u2192 Style Sheets (loaded in this order):\n  1. base-variables.uss    \u2190 token defaults, never removed\n  2. theme-dark.uss        \u2190 swapped for theme changes\n  3. typography.uss        \u2190 consumes tokens\n  4. panels.uss\n  5. buttons.uss\n  6. inputs.uss\n  7. animations.uss\n</code></pre> <p>Only slot 2 changes at runtime. Everything else stays loaded.</p>"},{"location":"ai/uss_implementation/#thememanager","title":"ThemeManager","text":"<p>Handles stylesheet swapping and individual token patching. The patching path is used for user tweaks (e.g. a custom accent colour) that don't warrant a full theme swap.</p> <pre><code>public class ThemeManager : MonoBehaviour\n{\n    public static ThemeManager Instance { get; private set; }\n\n    [SerializeField] private ThemeRegistry _registry;\n    [SerializeField] private PanelSettings _panelSettings; // drag in from inspector\n\n    private UITheme   _activeTheme;\n    private StyleSheet _activeThemeSheet;\n\n    // \u2500\u2500 Lifecycle \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    private void Awake()\n    {\n        if (Instance != null) { Destroy(gameObject); return; }\n        Instance = this;\n        DontDestroyOnLoad(gameObject);\n    }\n\n    private void Start()\n    {\n        var savedTheme = PlayerPrefs.GetString(\"ThemeName\", _registry.DefaultTheme.ThemeName);\n        Apply(_registry.GetByName(savedTheme));\n    }\n\n    // \u2500\u2500 Public API \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    // Called by SettingsHost when a theme is selected\n    public void Apply(string themeName)\n        =&gt; Apply(_registry.GetByName(themeName));\n\n    public void Apply(UITheme theme)\n    {\n        if (theme == null) return;\n\n        SwapThemeStyleSheet(theme);\n        PatchTokensFromTheme(theme);\n\n        _activeTheme = theme;\n        PlayerPrefs.SetString(\"ThemeName\", theme.ThemeName);\n    }\n\n    // Patch a single colour token \u2014 for user accent colour customisation\n    public void PatchColor(string token, Color color)\n    {\n        var root = GetPanelRoot();\n        if (root == null) return;\n        root.style.SetCustomProperty(token, color);\n    }\n\n    public void SetHighContrast(bool on)\n    {\n        var root = GetPanelRoot();\n        if (root == null) return;\n        root.EnableInClassList(\"high-contrast\", on);\n        PlayerPrefs.SetInt(\"HighContrast\", on ? 1 : 0);\n    }\n\n    public void SetReducedMotion(bool on)\n    {\n        var root = GetPanelRoot();\n        if (root == null) return;\n        root.EnableInClassList(\"reduced-motion\", on);\n        PlayerPrefs.SetInt(\"ReducedMotion\", on ? 1 : 0);\n    }\n\n    // \u2500\u2500 Internal \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n    private void SwapThemeStyleSheet(UITheme theme)\n    {\n        if (theme.StyleSheetAsset == null) return;\n\n        var root = GetPanelRoot();\n        if (root == null) return;\n\n        // Remove previous theme sheet if present\n        if (_activeThemeSheet != null &amp;&amp; root.styleSheets.Contains(_activeThemeSheet))\n            root.styleSheets.Remove(_activeThemeSheet);\n\n        // Insert theme sheet at index 1 (after base-variables, before components)\n        root.styleSheets.Insert(1, theme.StyleSheetAsset);\n        _activeThemeSheet = theme.StyleSheetAsset;\n    }\n\n    private void PatchTokensFromTheme(UITheme theme)\n    {\n        var root = GetPanelRoot();\n        if (root == null) return;\n\n        // Colours\n        root.style.SetCustomProperty(\"--color-primary\",          theme.ColorPrimary);\n        root.style.SetCustomProperty(\"--color-primary-hover\",    theme.ColorPrimaryHover);\n        root.style.SetCustomProperty(\"--color-primary-disabled\", theme.ColorPrimaryDisabled);\n        root.style.SetCustomProperty(\"--color-on-primary\",       theme.ColorOnPrimary);\n        root.style.SetCustomProperty(\"--color-background\",       theme.ColorBackground);\n        root.style.SetCustomProperty(\"--color-surface\",          theme.ColorSurface);\n        root.style.SetCustomProperty(\"--color-surface-raised\",   theme.ColorSurfaceRaised);\n        root.style.SetCustomProperty(\"--color-on-surface\",       theme.ColorOnSurface);\n        root.style.SetCustomProperty(\"--color-on-surface-muted\", theme.ColorOnSurfaceMuted);\n        root.style.SetCustomProperty(\"--color-success\",          theme.ColorSuccess);\n        root.style.SetCustomProperty(\"--color-warning\",          theme.ColorWarning);\n        root.style.SetCustomProperty(\"--color-error\",            theme.ColorError);\n\n        // Spacing\n        root.style.SetCustomProperty(\"--space-xs\", new Length(theme.SpaceXS, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--space-sm\", new Length(theme.SpaceSM, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--space-md\", new Length(theme.SpaceMD, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--space-lg\", new Length(theme.SpaceLG, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--space-xl\", new Length(theme.SpaceXL, LengthUnit.Pixel));\n\n        // Typography\n        root.style.SetCustomProperty(\"--size-text-body\",     new Length(theme.SizeTextBody,     LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--size-text-label\",    new Length(theme.SizeTextLabel,    LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--size-text-caption\",  new Length(theme.SizeTextCaption,  LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--size-text-title-sm\", new Length(theme.SizeTextTitleSm,  LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--size-text-title-lg\", new Length(theme.SizeTextTitleLg,  LengthUnit.Pixel));\n\n        // Radius\n        root.style.SetCustomProperty(\"--radius-sm\", new Length(theme.RadiusSM, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--radius-md\", new Length(theme.RadiusMD, LengthUnit.Pixel));\n        root.style.SetCustomProperty(\"--radius-lg\", new Length(theme.RadiusLG, LengthUnit.Pixel));\n\n        // Animation\n        root.style.SetCustomProperty(\"--duration-fast\",   new TimeValue(theme.DurationFast,   TimeUnit.Second));\n        root.style.SetCustomProperty(\"--duration-normal\", new TimeValue(theme.DurationNormal, TimeUnit.Second));\n        root.style.SetCustomProperty(\"--duration-slow\",   new TimeValue(theme.DurationSlow,   TimeUnit.Second));\n    }\n\n    private VisualElement GetPanelRoot()\n        =&gt; _panelSettings?.visualTree?.rootVisualElement;\n}\n</code></pre>"},{"location":"ai/uss_implementation/#setcustomproperty-extension","title":"SetCustomProperty Extension","text":"<p>Unity 6.3 doesn't yet expose a fully clean public API for setting arbitrary custom properties on a <code>IStyle</code>. This extension method handles the current workaround using the inline style override path. Verify against your Unity version \u2014 this API surface is actively evolving.</p> <pre><code>public static class StyleExtensions\n{\n    public static void SetCustomProperty(this IStyle style, string property, Color value)\n    {\n        // Unity 6.x: custom property patching on VisualElement inline styles\n        // The exact API depends on Unity version \u2014 check release notes for your build.\n        // This is the pattern used in Unity's own samples as of 6.3.\n        var colorValue = new StyleColor(value);\n        style.SetCustomProperty(property, colorValue.ToString());\n    }\n\n    public static void SetCustomProperty(this IStyle style, string property, Length value)\n    {\n        style.SetCustomProperty(property, value.ToString());\n    }\n\n    public static void SetCustomProperty(this IStyle style, string property, TimeValue value)\n    {\n        style.SetCustomProperty(property, $\"{value.value}s\");\n    }\n}\n</code></pre>"},{"location":"ai/uss_implementation/#userpreferences-scriptableobject","title":"UserPreferences ScriptableObject","text":"<p>Separate from theme presets \u2014 this holds the user's personal overrides and accessibility flags. Saved to <code>PlayerPrefs</code> as JSON.</p> <pre><code>[CreateAssetMenu(fileName = \"UserPreferences\", menuName = \"Training App/User Preferences\")]\npublic class UserPreferences : ScriptableObject\n{\n    [Header(\"Theme\")]\n    public string SelectedTheme   = \"Default\";\n\n    [Header(\"Accessibility\")]\n    public bool   HighContrast    = false;\n    public bool   ReducedMotion   = false;\n\n    [Header(\"Custom Accent\")]\n    public bool   UseCustomAccent = false;\n    public Color  CustomAccent    = new Color(0.27f, 0.51f, 0.95f);\n\n    private const string PrefsKey = \"UserPreferences\";\n\n    public void Save()\n    {\n        PlayerPrefs.SetString(PrefsKey, JsonUtility.ToJson(this));\n        PlayerPrefs.Save();\n    }\n\n    public void Load()\n    {\n        if (PlayerPrefs.HasKey(PrefsKey))\n            JsonUtility.FromJsonOverwrite(PlayerPrefs.GetString(PrefsKey), this);\n    }\n\n    public void Apply(ThemeManager themeManager)\n    {\n        themeManager.Apply(SelectedTheme);\n        themeManager.SetHighContrast(HighContrast);\n        themeManager.SetReducedMotion(ReducedMotion);\n\n        if (UseCustomAccent)\n            themeManager.PatchColor(\"--color-primary\", CustomAccent);\n    }\n}\n</code></pre>"},{"location":"ai/uss_implementation/#wiring-it-into-the-settings-host","title":"Wiring It into the Settings Host","text":"<p>The Settings Host now connects the View's events to both the theme system and the preferences object.</p> <pre><code>public class SettingsPanelHost : BasePanelHost, IPokeTarget\n{\n    [SerializeField] private UserPreferences _prefs;\n\n    public event Action OnBackRequested;\n\n    private SettingsPanelView _view;\n\n    public override void Generate()\n    {\n        base.Generate();\n        _view = new SettingsPanelView(Root);\n\n        _view.OnBackClicked         += () =&gt; OnBackRequested?.Invoke();\n\n        _view.OnThemeChanged        += name =&gt;\n        {\n            _prefs.SelectedTheme = name;\n            _prefs.Save();\n            ThemeManager.Instance.Apply(name);\n        };\n\n        _view.OnHighContrastChanged += on =&gt;\n        {\n            _prefs.HighContrast = on;\n            _prefs.Save();\n            ThemeManager.Instance.SetHighContrast(on);\n        };\n\n        _view.OnMasterVolumeChanged += value =&gt;\n        {\n            _prefs.MasterVolume = value;  // add to UserPreferences if needed\n            AudioManager.SetMaster(value);\n        };\n\n        Hide();\n    }\n\n    public override void Show()\n    {\n        _view?.SetValues(\n            AudioManager.Master,\n            AudioManager.Music,\n            AudioManager.SFX,\n            _prefs.SelectedTheme,\n            _prefs.HighContrast\n        );\n        base.Show();\n    }\n\n    public void OnPoked(string buttonId) =&gt; _view?.HandlePoke(buttonId);\n}\n</code></pre>"},{"location":"ai/uss_implementation/#designer-workflow","title":"Designer Workflow","text":"<p>With this setup, a designer can:</p> <ol> <li> <p>Create a new theme: Assets \u2192 Create \u2192 Training App \u2192 UI Theme, fill in the inspector colour pickers and sliders, drag the corresponding USS file into the StyleSheetAsset field.</p> </li> <li> <p>Register the theme: Drag the new asset into the <code>ThemeRegistry.AllThemes</code> list. It will appear automatically in the settings dropdown.</p> </li> <li> <p>Adjust spacing or type scale: Open any theme asset, change the spacing or font size values, hit play. No code touched.</p> </li> <li> <p>Test in editor: ThemeManager.Apply() can be called from a custom inspector button (or just hit play with the desired theme asset set as DefaultTheme).</p> </li> </ol> <p>The USS files themselves are still designer-editable for fine-grained control \u2014 but because they only contain <code>var(--token)</code> references, changing a value in the token system propagates everywhere without hunting through component files.</p>"},{"location":"ai/uss_implementation/#file-structure","title":"File Structure","text":"<pre><code>Assets/\n\u251c\u2500\u2500 Settings/\n\u2502   \u251c\u2500\u2500 ThemeRegistry.asset\n\u2502   \u251c\u2500\u2500 UserPreferences.asset\n\u2502   \u2514\u2500\u2500 Themes/\n\u2502       \u251c\u2500\u2500 Theme_Default.asset\n\u2502       \u251c\u2500\u2500 Theme_Dark.asset\n\u2502       \u251c\u2500\u2500 Theme_Light.asset\n\u2502       \u2514\u2500\u2500 Theme_HighContrast.asset\n\u2502\n\u2514\u2500\u2500 UI/\n    \u251c\u2500\u2500 Styles/\n    \u2502   \u251c\u2500\u2500 base-variables.uss    \u2190 token defaults\n    \u2502   \u251c\u2500\u2500 theme-dark.uss        \u2190 theme overrides (one per theme)\n    \u2502   \u251c\u2500\u2500 theme-high-contrast.uss\n    \u2502   \u251c\u2500\u2500 typography.uss\n    \u2502   \u251c\u2500\u2500 panels.uss\n    \u2502   \u251c\u2500\u2500 buttons.uss\n    \u2502   \u251c\u2500\u2500 inputs.uss\n    \u2502   \u2514\u2500\u2500 animations.uss\n    \u2502\n    \u2514\u2500\u2500 Scripts/\n        \u251c\u2500\u2500 UITheme.cs\n        \u251c\u2500\u2500 ThemeRegistry.cs\n        \u251c\u2500\u2500 UserPreferences.cs\n        \u251c\u2500\u2500 ThemeManager.cs\n        \u2514\u2500\u2500 StyleExtensions.cs\n</code></pre>"},{"location":"ai/uss_overlay_bonus/","title":"Bonus: Global Render Texture Overlay","text":"<p>Optional addition \u2014 everything in the main styling doc works without this What this adds: Full-screen scanlines, vignette, chromatic aberration as a single pass over the entire VR panel after all UITK content is drawn Pipeline: uGUI RawImage or URP Blit sitting above the render texture</p>"},{"location":"ai/uss_overlay_bonus/#the-architecture","title":"The Architecture","text":"<p>The UITK panel renders to a <code>RenderTexture</code>. That texture is displayed on a world-space quad in the scene. The global overlay is a second uGUI <code>Image</code> or <code>RawImage</code> component that sits above the render texture in screen space, using a Shader Graph material that samples the render texture and applies effects to it as a full-screen pass.</p> <pre><code>Scene Camera\n    \u2193\nUITK Panel \u2192 RenderTexture A\n    \u2193\nWorld-space quad (displays RenderTexture A)\n    \u2193\nCanvas (Screen Space - Camera)\n    \u2514\u2500 RawImage (full-screen, Overlay material)\n           \u2193\n           Shader samples RenderTexture A\n           Applies: scanlines, vignette, chromatic aberration\n           Outputs to screen\n</code></pre> <p>This is entirely separate from the UITK pipeline. The UITK document and all its panels are unaware of it. It is additive \u2014 disable the RawImage and the UI looks like the main styling doc. Enable it and the screen-wide effects layer on top.</p>"},{"location":"ai/uss_overlay_bonus/#the-overlay-shader-shader-graph-canvas-target","title":"The Overlay Shader (Shader Graph, Canvas target)","text":"<p>This shader is assigned to the fullscreen RawImage. It samples the render texture and applies the effects.</p> <p>Required nodes: - <code>Sample Texture 2D</code> \u2014 sample the render texture passed as a Blackboard property <code>_MainTex</code> - <code>Element Layout UV</code> or screen UV for sampling position - Standard math nodes for each effect</p>"},{"location":"ai/uss_overlay_bonus/#vignette-pass","title":"Vignette pass","text":"<pre><code>Screen UV \u2192 remap to -1..1\n    \u2192 Length\n    \u2192 Power(vignetteExp: 1.8)\n    \u2192 Multiply(_VignetteStrength)\n    \u2192 Clamp(0,1)\n    \u2192 1 - result       \u2190 centre bright, edges dark\n    \u2192 Multiply(sampled render texture colour)\n</code></pre>"},{"location":"ai/uss_overlay_bonus/#scanlines-pass","title":"Scanlines pass","text":"<pre><code>Screen UV \u2192 Y component\n    \u2192 Multiply(_LineFrequency: 200.0)   \u2190 more lines than per-panel version\n    \u2192 Fraction\n    \u2192 Step(0.5)\n    \u2192 1 - result\n    \u2192 Multiply(_LineIntensity: 0.02)\n    \u2192 1 - result\n    \u2192 Multiply(after-vignette colour)\n</code></pre>"},{"location":"ai/uss_overlay_bonus/#chromatic-aberration-pass","title":"Chromatic aberration pass","text":"<p>Samples the render texture three times at slightly offset UVs, one per colour channel:</p> <pre><code>UV offset for R channel: UV + float2(_Aberration, 0)\nUV offset for G channel: UV (no offset)\nUV offset for B channel: UV - float2(_Aberration, 0)\n\nSample R from offset R UV\nSample G from base UV\nSample B from offset B UV\n\nCombine: float4(R.r, G.g, B.b, 1.0)\n</code></pre> <p>At <code>_Aberration: 0.002</code> this is nearly imperceptible \u2014 just enough that the panel reads as a screen with slightly imperfect optics. At <code>0.01</code> it reads as visible distortion. Default should be <code>0.001\u20130.003</code>.</p>"},{"location":"ai/uss_overlay_bonus/#performance-on-quest-2","title":"Performance on Quest 2","text":"<p>This is an extra full-screen pass on top of all UITK rendering. At Quest 2 resolution:</p> <ul> <li>Additional render texture read: bandwidth cost, not compute</li> <li>Chromatic aberration: 3 texture samples per pixel \u2014 noticeable cost</li> <li>Scanlines + vignette only: 1 texture sample + cheap arithmetic \u2014 acceptable</li> </ul> <p>Recommendation: Ship with scanlines + vignette only. Add chromatic aberration as an option that defaults off and only enable it if profiling shows headroom.</p>"},{"location":"ai/uss_overlay_bonus/#c-setup","title":"C# Setup","text":"<pre><code>public class RenderTextureOverlay : MonoBehaviour\n{\n    [SerializeField] private RenderTexture _uitkRenderTexture;\n    [SerializeField] private RawImage      _overlayImage;\n    [SerializeField] private Material      _overlayMaterial;\n\n    [Range(0f, 0.4f)]\n    [SerializeField] private float _vignetteStrength = 0.20f;\n\n    [Range(0f, 0.06f)]\n    [SerializeField] private float _lineIntensity = 0.020f;\n\n    [Range(0f, 0.010f)]\n    [SerializeField] private float _aberration = 0.001f;\n\n    private void Start()\n    {\n        _overlayImage.texture  = _uitkRenderTexture;\n        _overlayImage.material = _overlayMaterial;\n        ApplyProperties();\n    }\n\n    private void ApplyProperties()\n    {\n        _overlayMaterial.SetFloat(\"_VignetteStrength\", _vignetteStrength);\n        _overlayMaterial.SetFloat(\"_LineIntensity\",    _lineIntensity);\n        _overlayMaterial.SetFloat(\"_Aberration\",       _aberration);\n    }\n\n    // Called by ThemeManager if overlay settings are in UITheme\n    public void ApplyTheme(UITheme theme)\n    {\n        _vignetteStrength = theme.OverlayVignetteStrength;\n        _lineIntensity    = theme.OverlayLineIntensity;\n        _aberration       = theme.OverlayAberration;\n        ApplyProperties();\n    }\n}\n</code></pre> <p>This doc covers the optional global overlay pipeline. It is not required for the main UITK visual system described in the primary styling doc.</p>"},{"location":"references/uitk_refs/","title":"UI Toolkit Unity References","text":"<p>Some links to videos and docs relating to UI Toolkit and it's recent updates in Unity 6.3</p>"},{"location":"references/uitk_refs/#official-unity-resources","title":"Official Unity Resources","text":"<p>Official Resources by Unity themselves. All created recently as they have been really pushing UI Toolkit in Unity 6.</p>"},{"location":"references/uitk_refs/#unity-documents","title":"Unity Documents","text":"<ul> <li>Getting Started - UI Shader Graph</li> <li>UI Toolkit for Advanced Unity Developers</li> <li>UITK in XR</li> <li>How to Create World Space UI in UITK</li> </ul>"},{"location":"references/uitk_refs/#unity-samples","title":"Unity Samples","text":"<ul> <li>Bagel Game - UITK World Space Demo</li> <li>QuizU - UITK Sample</li> <li>Dragon Crashers - UITK Sample</li> </ul>"},{"location":"references/uitk_refs/#unity-videos","title":"Unity Videos","text":"<ul> <li>UITK Intro Series - Brand New</li> <li>UITK at Unite 2024</li> </ul>"},{"location":"research/shader_graph/","title":"Shader Graph in UI Toolkit","text":""},{"location":"research/shader_graph/#overview","title":"Overview","text":"<p>As of Unity 6.3, Shader Graph Materials can now be applied directly to UITK Visual Elements to improve the graphical quality while maintaining the performance.</p> <p>Some effects are still bad for VR and some effects like gradients should be done in USS, but for vector graphics backgrounds, scanlines, vignette, clouds, these can all be added now.</p> <p>It is a very new implementation so resources are scarce but at least Unity are doing a big push promoting it right now. </p>"},{"location":"research/shader_graph/#implementation","title":"Implementation","text":"<p>When generating UI Toolkit through code, it is very easy to quickly add effects and styles through a factory and the builder pattern which is what I have done in the past.</p> <p>From what I have seen I should be able to get material implementation working alright. The main challenge will be finding what looks good without tanking performance too much. </p>"},{"location":"research/shader_graph/#resources","title":"Resources","text":""},{"location":"research/shader_graph/#youtube-videos","title":"YouTube Videos","text":"<ul> <li> <p>Shader Graph in UITK</p> </li> <li> <p>Cam Ayres Vid (He Works for Unity)</p> </li> </ul>"},{"location":"research/vr_integration/","title":"UITK VR Integration","text":""}]}